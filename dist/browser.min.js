(function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,g.__libxjs=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){'use strict';function getLens(b64){var len=b64.length;if(0<len%4)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");-1===validLen&&(validLen=len);var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function toByteArray(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(_byteLength(b64,validLen,placeHoldersLen)),curByte=0,len=0<placeHoldersLen?validLen-4:validLen,tmp,i;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=255&tmp>>16,arr[curByte++]=255&tmp>>8,arr[curByte++]=255&tmp;return 2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp),1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=255&tmp>>8,arr[curByte++]=255&tmp),arr}function tripletToBase64(num){return lookup[63&num>>18]+lookup[63&num>>12]+lookup[63&num>>6]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var output=[],i=start,tmp;i<end;i+=3)tmp=(16711680&uint8[i]<<16)+(65280&uint8[i+1]<<8)+(255&uint8[i+2]),output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){for(var len=uint8.length,extraBytes=len%3,parts=[],maxChunkLength=16383,i=0,len2=len-extraBytes,tmp;i<len2;i+=maxChunkLength)parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));return 1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[63&tmp<<4]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[63&tmp>>4]+lookup[63&tmp<<2]+"=")),parts.join("")}exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"==typeof Uint8Array?Array:Uint8Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62,revLookup[95]=63},{}],2:[function(){},{}],3:[function(require,module,exports){(function(){(function(){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */'use strict';function createBuffer(length){if(2147483647<length)throw new RangeError("The value \""+length+"\" is invalid for option \"size\"");var buf=new Uint8Array(length);return buf.__proto__=Buffer.prototype,buf}function Buffer(arg,encodingOrOffset,length){if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new TypeError("The \"string\" argument must be of type string. Received type number");return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}function from(value,encodingOrOffset,length){if("string"==typeof value)return fromString(value,encodingOrOffset);if(ArrayBuffer.isView(value))return fromArrayLike(value);if(null==value)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value);if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer))return fromArrayBuffer(value,encodingOrOffset,length);if("number"==typeof value)throw new TypeError("The \"value\" argument must not be of type number. Received type number");var valueOf=value.valueOf&&value.valueOf();if(null!=valueOf&&valueOf!==value)return Buffer.from(valueOf,encodingOrOffset,length);var b=fromObject(value);if(b)return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof value[Symbol.toPrimitive])return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value)}function assertSize(size){if("number"!=typeof size)throw new TypeError("\"size\" argument must be of type number");else if(0>size)throw new RangeError("The value \""+size+"\" is invalid for option \"size\"")}function alloc(size,fill,encoding){return assertSize(size),0>=size?createBuffer(size):void 0===fill?createBuffer(size):"string"==typeof encoding?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}function allocUnsafe(size){return assertSize(size),createBuffer(0>size?0:0|checked(size))}function fromString(string,encoding){if(("string"!=typeof encoding||""===encoding)&&(encoding="utf8"),!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);var length=0|byteLength(string,encoding),buf=createBuffer(length),actual=buf.write(string,encoding);return actual!==length&&(buf=buf.slice(0,actual)),buf}function fromArrayLike(array){for(var length=0>array.length?0:0|checked(array.length),buf=createBuffer(length),i=0;i<length;i+=1)buf[i]=255&array[i];return buf}function fromArrayBuffer(array,byteOffset,length){if(0>byteOffset||array.byteLength<byteOffset)throw new RangeError("\"offset\" is outside of buffer bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("\"length\" is outside of buffer bounds");var buf;return buf=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),buf.__proto__=Buffer.prototype,buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length),buf=createBuffer(len);return 0===buf.length?buf:(obj.copy(buf,0,0,len),buf)}return void 0===obj.length?"Buffer"===obj.type&&Array.isArray(obj.data)?fromArrayLike(obj.data):void 0:"number"!=typeof obj.length||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj)}function checked(length){if(length>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer))return string.byteLength;if("string"!=typeof string)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof string);var len=string.length,mustMatch=2<arguments.length&&!0===arguments[2];if(!mustMatch&&0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return mustMatch?-1:utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0;}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||0>start)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),0>=end)return"";if(end>>>=0,start>>>=0,end<=start)return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0;}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):2147483647<byteOffset?byteOffset=2147483647:-2147483648>byteOffset&&(byteOffset=-2147483648),byteOffset=+byteOffset,numberIsNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),0>byteOffset&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(0>byteOffset)if(dir)byteOffset=0;else return-1;if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}var indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&(encoding=(encoding+"").toLowerCase(),"ucs2"===encoding||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(2>arr.length||2>val.length)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)!==read(val,-1===foundIndex?0:i-foundIndex))-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1;else if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;0<=i;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=+offset||0;var remaining=buf.length-offset;length?(length=+length,length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;length>strLen/2&&(length=strLen/2);for(var i=0,parsed;i<length;++i){if(parsed=parseInt(string.substr(2*i,2),16),numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=239<firstByte?4:223<firstByte?3:191<firstByte?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;1===bytesPerSequence?128>firstByte&&(codePoint=firstByte):2===bytesPerSequence?(secondByte=buf[i+1],128==(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,127<tempCodePoint&&(codePoint=tempCodePoint))):3===bytesPerSequence?(secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,2047<tempCodePoint&&(55296>tempCodePoint||57343<tempCodePoint)&&(codePoint=tempCodePoint))):4===bytesPerSequence?(secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,65535<tempCodePoint&&1114112>tempCodePoint&&(codePoint=tempCodePoint))):void 0}null===codePoint?(codePoint=65533,bytesPerSequence=1):65535<codePoint&&(codePoint-=65536,res.push(55296|1023&codePoint>>>10),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||0>start)&&(start=0),(!end||0>end||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(0!=offset%1||0>offset)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(value>max||value<min)throw new RangeError("\"value\" argument is out of bounds");if(offset+ext>buf.length)throw new RangeError("Index out of range")}function checkIEEE754(buf,value,offset,ext){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(0>offset)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=str.split("=")[0],str=str.trim().replace(INVALID_BASE64_RE,""),2>str.length)return"";for(;0!=str.length%4;)str+="=";return str}function toHex(n){return 16>n?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0,codePoint;i<length;++i){if(codePoint=string.charCodeAt(i),55295<codePoint&&57344>codePoint){if(!leadSurrogate){if(56319<codePoint){-1<(units-=3)&&bytes.push(239,191,189);continue}else if(i+1===length){-1<(units-=3)&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(56320>codePoint){-1<(units-=3)&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&-1<(units-=3)&&bytes.push(239,191,189);if(leadSurrogate=null,128>codePoint){if(0>(units-=1))break;bytes.push(codePoint)}else if(2048>codePoint){if(0>(units-=2))break;bytes.push(192|codePoint>>6,128|63&codePoint)}else if(65536>codePoint){if(0>(units-=3))break;bytes.push(224|codePoint>>12,128|63&codePoint>>6,128|63&codePoint)}else if(1114112>codePoint){if(0>(units-=4))break;bytes.push(240|codePoint>>18,128|63&codePoint>>12,128|63&codePoint>>6,128|63&codePoint)}else throw new Error("Invalid code point")}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var byteArray=[],i=0,c,hi,lo;i<str.length&&!(0>(units-=2));++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isInstance(obj,type){return obj instanceof type||null!=obj&&null!=obj.constructor&&null!=obj.constructor.name&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=function(length){return+length!=length&&(length=0),Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50;exports.kMaxLength=2147483647,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){return Buffer.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){return Buffer.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)},Buffer.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==Buffer.prototype},Buffer.compare=function(a,b){if(isInstance(a,Uint8Array)&&(a=Buffer.from(a,a.offset,a.byteLength)),isInstance(b,Uint8Array)&&(b=Buffer.from(b,b.offset,b.byteLength)),!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch((encoding+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},Buffer.concat=function(list,length){if(!Array.isArray(list))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===list.length)return Buffer.alloc(0);var i;if(length===void 0)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)&&(buf=Buffer.from(buf)),!Buffer.isBuffer(buf))throw new TypeError("\"list\" argument must be an Array of Buffers");buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(0!=len%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(0!=len%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(0!=len%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim(),this.length>max&&(str+=" ... "),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)&&(target=Buffer.from(target,target.offset,target.byteLength)),!Buffer.isBuffer(target))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof target);if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),0>start||end>target.length||0>thisStart||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(start>>>=0,end>>>=0,thisStart>>>=0,thisEnd>>>=0,this===target)return 0;for(var x=thisEnd-thisStart,y=end-start,len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset>>>=0,isFinite(length)?(length>>>=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),0<string.length&&(0>length||0>offset)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0;}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start,end=void 0===end?len:~~end,0>start?(start+=len,0>start&&(start=0)):start>len&&(start=len),0>end?(end+=len,0>end&&(end=0)):end>len&&(end=len),end<start&&(end=start);var newBuf=this.subarray(start,end);return newBuf.__proto__=Buffer.prototype,newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;0<byteLength&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];0<i&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,byteLength>>>=0,!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=255&value/mul;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,byteLength>>>=0,!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1,mul=1;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)this[offset+i]=255&value/mul;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value,offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)0>value&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=255&(value/mul>>0)-sub;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)0>value&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=255&(value/mul>>0)-sub;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,127,-128),0>value&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),0>value&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),0<end&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(0>targetStart)throw new RangeError("targetStart out of bounds");if(0>start||start>=this.length)throw new RangeError("Index out of range");if(0>end)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start;if(this===target&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(targetStart,start,end);else if(this===target&&start<targetStart&&targetStart<end)for(var i=len-1;0<=i;--i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(1===val.length){var code=val.charCodeAt(0);("utf8"===encoding&&128>code||"latin1"===encoding)&&(val=code)}}else"number"==typeof val&&(val&=255);if(0>start||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;start>>>=0,end=end===void 0?this.length:end>>>0,val||(val=0);var i;if("number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding),len=bytes.length;if(0===len)throw new TypeError("The value \""+val+"\" is invalid for argument \"value\"");for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,require("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:7}],4:[function(require,module){module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],5:[function(require,module){'use strict';function ProcessEmitWarning(warning){console&&console.warn&&console.warn(warning)}function EventEmitter(){EventEmitter.init.call(this)}function checkListener(listener){if("function"!=typeof listener)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof listener)}function _getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing;if(checkListener(listener),events=target._events,void 0===events?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),m=_getMaxListeners(target),0<m&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+(type+" listeners added. Use emitter.setMaxListeners() to increase limit"));w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,ProcessEmitWarning(w)}return target}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(events===void 0)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(events!==void 0){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){for(var ret=Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}function addErrorHandlerIfEventEmitter(emitter,handler,flags){"function"==typeof emitter.on&&eventTargetAgnosticAddListener(emitter,"error",handler,flags)}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if("function"==typeof emitter.on)flags.once?emitter.once(name,listener):emitter.on(name,listener);else if("function"==typeof emitter.addEventListener)emitter.addEventListener(name,function wrapListener(arg){flags.once&&emitter.removeEventListener(name,wrapListener),listener(arg)});else throw new TypeError("The \"emitter\" argument must be of type EventEmitter. Received type "+typeof emitter)}var R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)},ReflectOwnKeys;ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function(value){return value!==value};module.exports=EventEmitter,module.exports.once=function(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver),reject(err)}function resolver(){"function"==typeof emitter.removeListener&&emitter.removeListener("error",errorListener),resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:!0}),"error"!==name&&addErrorHandlerIfEventEmitter(emitter,errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||0>arg||NumberIsNaN(arg))throw new RangeError("The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received "+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||0>n||NumberIsNaN(n))throw new RangeError("The value of \"n\" is out of range. It must be a non-negative number. Received "+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(events!==void 0)doError=doError&&events.error===void 0;else if(!doError)return!1;if(doError){var er;if(0<args.length&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(handler===void 0)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)ReflectApply(listeners[i],this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){return checkListener(listener),this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){return checkListener(listener),this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if(checkListener(listener),events=this._events,void 0===events)return this;if(list=events[type],void 0===list)return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;0<=i;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(0>position)return this;0===position?list.shift():spliceOne(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(events=this._events,void 0===events)return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var keys=Object.keys(events),key;for(i=0;i<keys.length;++i)key=keys[i],"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(listeners=events[type],"function"==typeof listeners)this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;0<=i;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return 0<this._eventsCount?ReflectOwnKeys(this._events):[]}},{}],6:[function(require,module){function validateParams(params){if("string"==typeof params&&(params=url.parse(params)),params.protocol||(params.protocol="https:"),"https:"!==params.protocol)throw new Error("Protocol \""+params.protocol+"\" not supported. Expected \"https:\"");return params}var http=require("http"),url=require("url"),https=module.exports;for(var key in http)http.hasOwnProperty(key)&&(https[key]=http[key]);https.request=function(params,cb){return params=validateParams(params),http.request.call(this,params,cb)},https.get=function(params,cb){return params=validateParams(params),http.get.call(this,params,cb)}},{http:30,url:35}],7:[function(require,module,exports){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */exports.read=function(buffer,offset,isLE,mLen,nBytes){var eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i],e,m;for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;0<nBits;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;0<nBits;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*(1/0);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=0>value||0===value&&0>1/value?1:0,e,m,c;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),1>value*(c=Math.pow(2,-e))&&(e--,c*=2),value+=1<=e+eBias?rt/c:rt*Math.pow(2,1-eBias),2<=value*c&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):1<=e+eBias?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));8<=mLen;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;0<eLen;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],8:[function(require,module){module.exports="function"==typeof Object.create?function(ctor,superCtor){superCtor&&(ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}}))}:function(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}}},{}],9:[function(require,module){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;(function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}})();var queue=[],draining=!1,queueIndex=-1,currentQueue;process.nextTick=function(fun){var args=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(){return[]},process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],10:[function(require,module,exports){(function(global){(function(){/*! https://mths.be/punycode v1.4.1 by @mathias */(function(root){function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";1<parts.length&&(result=parts[0]+"@",string=parts[1]),string=string.replace(regexSeparators,".");var labels=string.split("."),encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){for(var output=[],counter=0,length=string.length,value,extra;counter<length;)value=string.charCodeAt(counter++),55296<=value&&56319>=value&&counter<length?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return 65535<value&&(value-=65536,output+=stringFromCharCode(55296|1023&value>>>10),value=56320|1023&value),output+=stringFromCharCode(value),output}).join("")}function basicToDigit(codePoint){return 10>codePoint-48?codePoint-22:26>codePoint-65?codePoint-65:26>codePoint-97?codePoint-97:36}function digitToBasic(digit,flag){return digit+22+75*(26>digit)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);455<delta;k+=36)delta=floor(delta/35);return floor(k+36*delta/(delta+38))}function decode(input){var output=[],inputLength=input.length,i=0,n=128,bias=72,out,basic,j,index,oldi,w,k,digit,t,baseMinusT;for(basic=input.lastIndexOf("-"),0>basic&&(basic=0),j=0;j<basic;++j)128<=input.charCodeAt(j)&&error("not-basic"),output.push(input.charCodeAt(j));for(index=0<basic?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=36;;k+=36){if(index>=inputLength&&error("invalid-input"),digit=basicToDigit(input.charCodeAt(index++)),(36<=digit||digit>floor((2147483647-i)/w))&&error("overflow"),i+=digit*w,t=k<=bias?1:k>=bias+26?26:k-bias,digit<t)break;baseMinusT=36-t,w>floor(2147483647/baseMinusT)&&error("overflow"),w*=baseMinusT}out=output.length+1,bias=adapt(i-oldi,out,0==oldi),floor(i/out)>2147483647-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var output=[],n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;for(input=ucs2decode(input),inputLength=input.length,n=128,delta=0,bias=72,j=0;j<inputLength;++j)currentValue=input[j],128>currentValue&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=2147483647,j=0;j<inputLength;++j)currentValue=input[j],currentValue>=n&&currentValue<m&&(m=currentValue);for(handledCPCountPlusOne=handledCPCount+1,m-n>floor((2147483647-delta)/handledCPCountPlusOne)&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if(currentValue=input[j],currentValue<n&&2147483647<++delta&&error("overflow"),currentValue==n){for(q=delta,k=36;;k+=36){if(t=k<=bias?1:k>=bias+26?26:k-bias,q<t)break;qMinusT=q-t,baseMinusT=36-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule="object"==typeof module&&module&&!module.nodeType&&module,freeGlobal="object"==typeof global&&global;(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)&&(root=freeGlobal);var regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},floor=Math.floor,stringFromCharCode=String.fromCharCode,punycode,key;if(punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,function(string){return /[^\x20-\x7E]/.test(string)?"xn--"+encode(string):string})},toUnicode:function(input){return mapDomain(input,function(string){return /^xn--/.test(string)?decode(string.slice(4).toLowerCase()):string})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return punycode});else if(!(freeExports&&freeModule))root.punycode=punycode;else if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])})(this)}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],11:[function(require,module){'use strict';function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;0<maxKeys&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var x=qs[i].replace(/\+/g,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;0<=idx?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],12:[function(require,module){'use strict';function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return"";}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],13:[function(require,module,exports){'use strict';exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":11,"./encode":12}],14:[function(require,module){'use strict';function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}function createErrorType(code,message,Base){function getMessage(arg1,arg2,arg3){return"string"==typeof message?message:message(arg1,arg2,arg3)}Base||(Base=Error);var NodeError=function(_Base){function NodeError(arg1,arg2,arg3){return _Base.call(this,getMessage(arg1,arg2,arg3))||this}return _inheritsLoose(NodeError,_Base),NodeError}(Base);NodeError.prototype.name=Base.name,NodeError.prototype.code=code,codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;return expected=expected.map(function(i){return i+""}),2<len?"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]:2===len?"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1]):"of ".concat(thing," ").concat(expected[0])}return"of ".concat(thing," ").concat(expected+"")}function startsWith(str,search,pos){return str.substr(!pos||0>pos?0:+pos,search.length)===search}function endsWith(str,search,this_len){return(void 0===this_len||this_len>str.length)&&(this_len=str.length),str.substring(this_len-search.length,this_len)===search}function includes(str,search,start){return"number"!=typeof start&&(start=0),!(start+search.length>str.length)&&-1!==str.indexOf(search,start)}var codes={};createErrorType("ERR_INVALID_OPT_VALUE",function(name,value){return"The value \""+value+"\" is invalid for option \""+name+"\""},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(name,expected,actual){var determiner;"string"==typeof expected&&startsWith(expected,"not ")?(determiner="must not be",expected=expected.replace(/^not /,"")):determiner="must be";var msg;if(endsWith(name," argument"))msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"));else{var type=includes(name,".")?"property":"argument";msg="The \"".concat(name,"\" ").concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}return msg+=". Received type ".concat(typeof actual),msg},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(name){return"The "+name+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(name){return"Cannot call "+name+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(arg){return"Unknown encoding: "+arg},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=codes},{}],15:[function(require,module){(function(process){(function(){'use strict';function Duplex(options){return this instanceof Duplex?void(Readable.call(this,options),Writable.call(this,options),this.allowHalfOpen=!0,options&&(!1===options.readable&&(this.readable=!1),!1===options.writable&&(this.writable=!1),!1===options.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))):new Duplex(options)}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");require("inherits")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0,method;v<keys.length;v++)method=keys[v],Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method]);Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(value){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=value,this._writableState.destroyed=value)}})}).call(this)}).call(this,require("_process"))},{"./_stream_readable":17,"./_stream_writable":19,_process:9,inherits:8}],16:[function(require,module){'use strict';function PassThrough(options){return this instanceof PassThrough?void Transform.call(this,options):new PassThrough(options)}module.exports=PassThrough;var Transform=require("./_stream_transform");require("inherits")(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":18,inherits:8}],17:[function(require,module){(function(process,global){(function(){'use strict';function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}function prependListener(emitter,event,fn){return"function"==typeof emitter.prependListener?emitter.prependListener(event,fn):void(emitter._events&&emitter._events[event]?Array.isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn))}function ReadableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(!StringDecoder&&(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||require("./_stream_duplex"),!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var state=stream._readableState;if(null===chunk)state.reading=!1,onEofChunk(stream,state);else{var er;if(skipChunkCheck||(er=chunkInvalid(state,chunk)),er)errorOrDestroy(stream,er);else if(!(state.objectMode||chunk&&0<chunk.length))addToFront||(state.reading=!1,maybeReadMore(stream,state));else if("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=_uint8ArrayToBuffer(chunk)),addToFront)state.endEmitted?errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(stream,state,chunk,!0);else if(state.ended)errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF);else{if(state.destroyed)return!1;state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1)}}return!state.ended&&(state.length<state.highWaterMark||0===state.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(state.awaitDrain=0,stream.emit("data",chunk)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;return _isUint8Array(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk)),er}function computeNewHighWaterMark(n){return 1073741824<=n?n=1073741824:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,state){return 0>=n||0===state.length&&state.ended?0:state.objectMode?1:n===n?(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0)):state.flowing&&state.length?state.buffer.head.data.length:state.length}function onEofChunk(stream,state){if(debug("onEofChunk"),!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.sync?emitReadable(stream):(state.needReadable=!1,!state.emittedReadable&&(state.emittedReadable=!0,emitReadable_(stream)))}}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable),state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,process.nextTick(emitReadable_,stream))}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended),!state.destroyed&&(state.length||state.ended)&&(stream.emit("readable"),state.emittedReadable=!1),state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark,flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(;!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&0===state.length);){var len=state.length;if(debug("maybeReadMore read 0"),stream.read(0),len===state.length)break}state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}function updateReadableListening(self){var state=self._readableState;state.readableListening=0<self.listenerCount("readable"),state.resumeScheduled&&!state.paused?state.flowing=!0:0<self.listenerCount("data")&&self.resume()}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(resume_,stream,state))}function resume_(stream,state){debug("resume",state.reading),state.reading||stream.read(0),state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){if(0===state.length)return null;var ret;return state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.first():state.buffer.concat(state.length),state.buffer.clear()):ret=state.buffer.consume(n,state.decoder),ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted),state.endEmitted||(state.ended=!0,process.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){if(debug("endReadableNT",state.endEmitted,state.length),!state.endEmitted&&0===state.length&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"),state.autoDestroy)){var wState=stream._writableState;(!wState||wState.autoDestroy&&wState.finished)&&stream.destroy()}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter,EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=require("./internal/streams/stream"),Buffer=require("buffer").Buffer,OurUint8Array=global.Uint8Array||function(){},debugUtil=require("util"),debug;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var BufferList=require("./internal/streams/buffer_list"),destroyImpl=require("./internal/streams/destroy"),_require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark,_require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,StringDecoder,createReadableStreamAsyncIterator,from;require("inherits")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){cb(err)},Readable.prototype.push=function(chunk,encoding){var state=this._readableState,skipChunkCheck;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder);var decoder=new StringDecoder(enc);this._readableState.decoder=decoder,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,content="";null!==p;)content+=decoder.write(p.data),p=p.next;return this._readableState.buffer.clear(),""!==content&&this._readableState.buffer.push(content),this._readableState.length=content.length,this};Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&((0===state.highWaterMark?0<state.length:state.length>=state.highWaterMark)||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,state),0===n&&state.ended)return 0===state.length&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&(doRead=!0,debug("length less than watermark",doRead)),state.ended||state.reading?(doRead=!1,debug("reading or ended",doRead)):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,!state.reading&&(n=howMuchToRead(nOrig,state)));var ret;return ret=0<n?fromList(n,state):null,null===ret?(state.needReadable=state.length<=state.highWaterMark,n=0):(state.length-=n,state.awaitDrain=0),0===state.length&&(!state.ended&&(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,cleanup())}function onend(){debug("onend"),dest.end()}function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain)&&ondrain()}function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret),!1===ret&&((1===state.pipesCount&&state.pipes===dest||1<state.pipesCount&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",state.awaitDrain),state.awaitDrain++),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&errorOrDestroy(dest,er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr,endFn=doEnd?onend:unpipe;state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1;return src.on("data",ondata),prependListener(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes?this:(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo),this);if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:!1});return this}var index=indexOf(state.pipes,dest);return-1===index?this:(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn),state=this._readableState;return"data"===ev?(state.readableListening=0<this.listenerCount("readable"),!1!==state.flowing&&this.resume()):"readable"==ev&&!state.endEmitted&&!state.readableListening&&(state.readableListening=state.needReadable=!0,state.flowing=!1,state.emittedReadable=!1,debug("on readable",state.length,state.reading),state.length?emitReadable(this):!state.reading&&process.nextTick(nReadingNextTick,this)),res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);return"readable"===ev&&process.nextTick(updateReadableListening,this),res},Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);return("readable"===ev||void 0===ev)&&process.nextTick(updateReadableListening,this),res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!state.readableListening,resume(this,state)),state.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)}),stream.on("data",function(chunk){if((debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),!(state.objectMode&&(null===chunk||void 0===chunk)))&&(state.objectMode||chunk&&chunk.length)){var ret=_this.push(chunk);ret||(paused=!0,stream.pause())}}),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=require("./internal/streams/async_iterator")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(state){this._readableState&&(this._readableState.flowing=state)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(iterable,opts){return void 0===from&&(from=require("./internal/streams/from")),from(Readable,iterable,opts)})}).call(this)}).call(this,require("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":14,"./_stream_duplex":15,"./internal/streams/async_iterator":20,"./internal/streams/buffer_list":21,"./internal/streams/destroy":22,"./internal/streams/from":24,"./internal/streams/state":26,"./internal/streams/stream":27,_process:9,buffer:3,events:5,inherits:8,"string_decoder/":34,util:2}],18:[function(require,module){'use strict';function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(null===cb)return this.emit("error",new ERR_MULTIPLE_CALLBACK);ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){return this instanceof Transform?void(Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)):new Transform(options)}function prefinish(){var _this=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush(function(er,data){done(_this,er,data)})}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}module.exports=Transform;var _require$codes=require("../errors").codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require("./_stream_duplex");require("inherits")(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(){var ts=this._transformState;null===ts.writechunk||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))},Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2)})}},{"../errors":14,"./_stream_duplex":15,inherits:8}],19:[function(require,module){(function(process,global){(function(){'use strict';function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(_this,state)}}function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex"),options=options||{},"boolean"!=typeof isDuplex&&(isDuplex=stream instanceof Duplex),this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==options.emitClose,this.autoDestroy=!!options.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){Duplex=Duplex||require("./_stream_duplex");var isDuplex=this instanceof Duplex;return isDuplex||realHasInstance.call(Writable,this)?void(this._writableState=new WritableState(options,this,isDuplex),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)):new Writable(options)}function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er),process.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var er;return null===chunk?er=new ERR_STREAM_NULL_VALUES:"string"!=typeof chunk&&!state.objectMode&&(er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)),!er||(errorOrDestroy(stream,er),process.nextTick(cb,er),!1)}function decodeChunk(state,chunk,encoding){return state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding)),chunk}function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,state.destroyed?state.onwrite(new ERR_STREAM_DESTROYED("write")):writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(process.nextTick(cb,er),process.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er)):(cb(er),stream._writableState.errorEmitted=!0,errorOrDestroy(stream,er),finishMaybe(stream,state))}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if("function"!=typeof cb)throw new ERR_MULTIPLE_CALLBACK;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?process.nextTick(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--,err&&errorOrDestroy(stream,err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)})}function prefinish(stream,state){state.prefinished||state.finalCalled||("function"!=typeof stream._final||state.destroyed?(state.prefinished=!0,stream.emit("prefinish")):(state.pendingcb++,state.finalCalled=!0,process.nextTick(callFinal,stream,state)))}function finishMaybe(stream,state){var need=needFinish(state);if(need&&(prefinish(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"),state.autoDestroy))){var rState=stream._readableState;(!rState||rState.autoDestroy&&rState.endEmitted)&&stream.destroy()}return need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb)),state.ended=!0,stream.writable=!1}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;for(corkReq.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree.next=corkReq}module.exports=Writable;var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require("util-deprecate")},Stream=require("./internal/streams/stream"),Buffer=require("buffer").Buffer,OurUint8Array=global.Uint8Array||function(){},destroyImpl=require("./internal/streams/destroy"),_require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark,_require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;require("inherits")(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}();var realHasInstance;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||!(this!==Writable)&&object&&object._writableState instanceof WritableState}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&_isUint8Array(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=_uint8ArrayToBuffer(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":!encoding&&(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ending?writeAfterEnd(this,cb):(isBuf||validChunk(this,state,chunk,cb))&&(state.pendingcb++,ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())))throw new ERR_UNKNOWN_ENCODING(encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;return"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!==chunk&&void 0!==chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||endWritable(this,state,cb),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){cb(err)}}).call(this)}).call(this,require("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":14,"./_stream_duplex":15,"./internal/streams/destroy":22,"./internal/streams/state":26,"./internal/streams/stream":27,_process:9,buffer:3,inherits:8,"util-deprecate":37}],20:[function(require,module){(function(process){(function(){'use strict';function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function createIterResult(value,done){return{value:value,done:done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(null!==resolve){var data=iter[kStream].read();null!==data&&(iter[kLastPromise]=null,iter[kLastResolve]=null,iter[kLastReject]=null,resolve(createIterResult(data,!1)))}}function onReadable(iter){process.nextTick(readAndResolve,iter)}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){return iter[kEnded]?void resolve(createIterResult(void 0,!0)):void iter[kHandlePromise](resolve,reject)},reject)}}var finished=require("./end-of-stream"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream"),AsyncIteratorPrototype=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream]},next:function(){var _this=this,error=this[kError];if(null!==error)return Promise.reject(error);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise(function(resolve,reject){process.nextTick(function(){_this[kError]?reject(_this[kError]):resolve(createIterResult(void 0,!0))})});var lastPromise=this[kLastPromise],promise;if(lastPromise)promise=new Promise(wrapForNext(lastPromise,this));else{var data=this[kStream].read();if(null!==data)return Promise.resolve(createIterResult(data,!1));promise=new Promise(this[kHandlePromise])}return this[kLastPromise]=promise,promise}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this}),_defineProperty(_Object$setPrototypeO,"return",function(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){return err?void reject(err):void resolve(createIterResult(void 0,!0))})})}),_Object$setPrototypeO),AsyncIteratorPrototype),_Object$setPrototypeO;module.exports=function(stream){var iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:!0}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:!0}),_defineProperty(_Object$create,kLastReject,{value:null,writable:!0}),_defineProperty(_Object$create,kError,{value:null,writable:!0}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:!0}),_defineProperty(_Object$create,kHandlePromise,{value:function(resolve,reject){var data=iterator[kStream].read();data?(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(data,!1))):(iterator[kLastResolve]=resolve,iterator[kLastReject]=reject)},writable:!0}),_Object$create)),_Object$create;return iterator[kLastPromise]=null,finished(stream,function(err){if(err&&"ERR_STREAM_PREMATURE_CLOSE"!==err.code){var reject=iterator[kLastReject];return null!==reject&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,reject(err)),void(iterator[kError]=err)}var resolve=iterator[kLastResolve];null!==resolve&&(iterator[kLastPromise]=null,iterator[kLastResolve]=null,iterator[kLastReject]=null,resolve(createIterResult(void 0,!0))),iterator[kEnded]=!0}),stream.on("readable",onReadable.bind(null,iterator)),iterator}}).call(this)}).call(this,require("_process"))},{"./end-of-stream":23,_process:9}],21:[function(require,module){'use strict';function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function copyBuffer(src,target,offset){Buffer.prototype.copy.call(src,target,offset)}var _require=require("buffer"),Buffer=_require.Buffer,_require2=require("util"),inspect=_require2.inspect,custom=inspect&&inspect.custom||"inspect";module.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return _createClass(BufferList,[{key:"push",value:function(v){var entry={data:v,next:null};0<this.length?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length}},{key:"unshift",value:function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ret=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ret}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret}},{key:"concat",value:function(n){if(0===this.length)return Buffer.alloc(0);for(var ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)copyBuffer(p.data,ret,i),i+=p.data.length,p=p.next;return ret}},{key:"consume",value:function(n,hasStrings){var ret;return n<this.head.data.length?(ret=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):n===this.head.data.length?ret=this.shift():ret=hasStrings?this._getString(n):this._getBuffer(n),ret}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var p=this.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(ret+=nb===str.length?str:str.slice(0,n),n-=nb,0===n){nb===str.length?(++c,this.head=p.next?p.next:this.tail=null):(this.head=p,p.data=str.slice(nb));break}++c}return this.length-=c,ret}},{key:"_getBuffer",value:function(n){var ret=Buffer.allocUnsafe(n),p=this.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),n-=nb,0===n){nb===buf.length?(++c,this.head=p.next?p.next:this.tail=null):(this.head=p,p.data=buf.slice(nb));break}++c}return this.length-=c,ret}},{key:custom,value:function(_,options){return inspect(this,_objectSpread({},options,{depth:0,customInspect:!1}))}}]),BufferList}()},{buffer:3,util:2}],22:[function(require,module){(function(process){(function(){'use strict';function emitErrorAndCloseNT(self,err){emitErrorNT(self,err),emitCloseNT(self)}function emitCloseNT(self){self._writableState&&!self._writableState.emitClose||self._readableState&&!self._readableState.emitClose||self.emit("close")}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):err&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,err)):process.nextTick(emitErrorNT,this,err)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,function(err){!cb&&err?_this._writableState?_this._writableState.errorEmitted?process.nextTick(emitCloseNT,_this):(_this._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,_this,err)):process.nextTick(emitErrorAndCloseNT,_this,err):cb?(process.nextTick(emitCloseNT,_this),cb(err)):process.nextTick(emitCloseNT,_this)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(stream,err){var rState=stream._readableState,wState=stream._writableState;rState&&rState.autoDestroy||wState&&wState.autoDestroy?stream.destroy(err):stream.emit("error",err)}}}).call(this)}).call(this,require("_process"))},{_process:9}],23:[function(require,module){'use strict';function once(callback){var called=!1;return function(){if(!called){called=!0;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];callback.apply(this,args)}}}function noop(){}function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}function eos(stream,opts,callback){if("function"==typeof opts)return eos(stream,null,opts);opts||(opts={}),callback=once(callback||noop);var readable=opts.readable||!1!==opts.readable&&stream.readable,writable=opts.writable||!1!==opts.writable&&stream.writable,onlegacyfinish=function(){stream.writable||onfinish()},writableEnded=stream._writableState&&stream._writableState.finished,onfinish=function(){writable=!1,writableEnded=!0,readable||callback.call(stream)},readableEnded=stream._readableState&&stream._readableState.endEmitted,onend=function(){readable=!1,readableEnded=!0,writable||callback.call(stream)},onerror=function(err){callback.call(stream,err)},onclose=function(){var err;return readable&&!readableEnded?(stream._readableState&&stream._readableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):writable&&!writableEnded?(stream._writableState&&stream._writableState.ended||(err=new ERR_STREAM_PREMATURE_CLOSE),callback.call(stream,err)):void 0},onrequest=function(){stream.req.on("finish",onfinish)};return isRequest(stream)?(stream.on("complete",onfinish),stream.on("abort",onclose),stream.req?onrequest():stream.on("request",onrequest)):writable&&!stream._writableState&&(stream.on("end",onlegacyfinish),stream.on("close",onlegacyfinish)),stream.on("end",onend),stream.on("finish",onfinish),!1!==opts.error&&stream.on("error",onerror),stream.on("close",onclose),function(){stream.removeListener("complete",onfinish),stream.removeListener("abort",onclose),stream.removeListener("request",onrequest),stream.req&&stream.req.removeListener("finish",onfinish),stream.removeListener("end",onlegacyfinish),stream.removeListener("close",onlegacyfinish),stream.removeListener("finish",onfinish),stream.removeListener("end",onend),stream.removeListener("error",onerror),stream.removeListener("close",onclose)}}var ERR_STREAM_PREMATURE_CLOSE=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;module.exports=eos},{"../../../errors":14}],24:[function(require,module){module.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],25:[function(require,module){'use strict';function once(callback){var called=!1;return function(){called||(called=!0,callback.apply(void 0,arguments))}}function noop(err){if(err)throw err}function isRequest(stream){return stream.setHeader&&"function"==typeof stream.abort}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=!1;stream.on("close",function(){closed=!0}),eos===void 0&&(eos=require("./end-of-stream")),eos(stream,{readable:reading,writable:writing},function(err){return err?callback(err):void(closed=!0,callback())});var destroyed=!1;return function(err){if(!closed)return destroyed?void 0:(destroyed=!0,isRequest(stream)?stream.abort():"function"==typeof stream.destroy?stream.destroy():void callback(err||new ERR_STREAM_DESTROYED("pipe")))}}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}function popCallback(streams){return streams.length?"function"==typeof streams[streams.length-1]?streams.pop():noop:noop}var _require$codes=require("../../../errors").codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,eos;module.exports=function(){for(var _len=arguments.length,streams=Array(_len),_key=0;_key<_len;_key++)streams[_key]=arguments[_key];var callback=popCallback(streams);if(Array.isArray(streams[0])&&(streams=streams[0]),2>streams.length)throw new ERR_MISSING_ARGS("streams");var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;return destroyer(stream,reading,0<i,function(err){error||(error=err),err&&destroys.forEach(call),reading||(destroys.forEach(call),callback(error))})}),error;return streams.reduce(pipe)}},{"../../../errors":14,"./end-of-stream":23}],26:[function(require,module){'use strict';function highWaterMarkFrom(options,isDuplex,duplexKey){return null==options.highWaterMark?isDuplex?options[duplexKey]:null:options.highWaterMark}var ERR_INVALID_OPT_VALUE=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;module.exports={getHighWaterMark:function(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(null!=hwm){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||0>hwm){var name=isDuplex?duplexKey:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(name,hwm)}return Math.floor(hwm)}return state.objectMode?16:16384}}},{"../../../errors":14}],27:[function(require,module){module.exports=require("events").EventEmitter},{events:5}],28:[function(require,module,exports){exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":15,"./lib/_stream_passthrough.js":16,"./lib/_stream_readable.js":17,"./lib/_stream_transform.js":18,"./lib/_stream_writable.js":19,"./lib/internal/streams/end-of-stream.js":23,"./lib/internal/streams/pipeline.js":25}],29:[function(require,module,exports){function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var buffer=require("buffer"),Buffer=buffer.Buffer;Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(Buffer.prototype),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0===fill?buf.fill(0):"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},{buffer:3}],30:[function(require,module,exports){(function(global){(function(){var ClientRequest=require("./lib/request"),response=require("./lib/response"),extend=require("xtend"),statusCodes=require("builtin-status-codes"),url=require("url"),http=exports;http.request=function(opts,cb){opts="string"==typeof opts?url.parse(opts):extend(opts);var defaultProtocol=-1===global.location.protocol.search(/^https?:$/)?"http:":"",protocol=opts.protocol||defaultProtocol,host=opts.hostname||opts.host,port=opts.port,path=opts.path||"/";host&&-1!==host.indexOf(":")&&(host="["+host+"]"),opts.url=(host?protocol+"//"+host:"")+(port?":"+port:"")+path,opts.method=(opts.method||"GET").toUpperCase(),opts.headers=opts.headers||{};var req=new ClientRequest(opts);return cb&&req.on("response",cb),req},http.get=function(opts,cb){var req=http.request(opts,cb);return req.end(),req},http.ClientRequest=ClientRequest,http.IncomingMessage=response.IncomingMessage,http.Agent=function(){},http.Agent.defaultMaxSockets=4,http.globalAgent=new http.Agent,http.STATUS_CODES=statusCodes,http.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./lib/request":32,"./lib/response":33,"builtin-status-codes":4,url:35,xtend:38}],31:[function(require,module,exports){(function(global){(function(){function getXHR(){if(xhr!==void 0)return xhr;if(global.XMLHttpRequest){xhr=new global.XMLHttpRequest;try{xhr.open("GET",global.XDomainRequest?"/":"https://example.com")}catch(e){xhr=null}}else xhr=null;return xhr}function checkTypeSupport(type){var xhr=getXHR();if(!xhr)return!1;try{return xhr.responseType=type,xhr.responseType===type}catch(e){}return!1}function isFunction(value){return"function"==typeof value}exports.fetch=isFunction(global.fetch)&&isFunction(global.ReadableStream),exports.writableStream=isFunction(global.WritableStream),exports.abortController=isFunction(global.AbortController);var xhr;exports.arraybuffer=exports.fetch||checkTypeSupport("arraybuffer"),exports.msstream=!exports.fetch&&checkTypeSupport("ms-stream"),exports.mozchunkedarraybuffer=!exports.fetch&&checkTypeSupport("moz-chunked-arraybuffer"),exports.overrideMimeType=exports.fetch||!!getXHR()&&isFunction(getXHR().overrideMimeType),xhr=null}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],32:[function(require,module){(function(process,global,Buffer){(function(){function decideMode(preferBinary,useFetch){return capability.fetch&&useFetch?"fetch":capability.mozchunkedarraybuffer?"moz-chunked-arraybuffer":capability.msstream?"ms-stream":capability.arraybuffer&&preferBinary?"arraybuffer":"text"}function statusValid(xhr){try{var status=xhr.status;return null!==status&&0!==status}catch(e){return!1}}var capability=require("./capability"),inherits=require("inherits"),response=require("./response"),stream=require("readable-stream"),IncomingMessage=response.IncomingMessage,rStates=response.readyStates,ClientRequest=module.exports=function(opts){var self=this;stream.Writable.call(self),self._opts=opts,self._body=[],self._headers={},opts.auth&&self.setHeader("Authorization","Basic "+Buffer.from(opts.auth).toString("base64")),Object.keys(opts.headers).forEach(function(name){self.setHeader(name,opts.headers[name])});var useFetch=!0,preferBinary;if("disable-fetch"===opts.mode||"requestTimeout"in opts&&!capability.abortController)useFetch=!1,preferBinary=!0;else if("prefer-streaming"===opts.mode)preferBinary=!1;else if("allow-wrong-content-type"===opts.mode)preferBinary=!capability.overrideMimeType;else if(!opts.mode||"default"===opts.mode||"prefer-fast"===opts.mode)preferBinary=!0;else throw new Error("Invalid value for opts.mode");self._mode=decideMode(preferBinary,useFetch),self._fetchTimer=null,self._socketTimeout=null,self._socketTimer=null,self.on("finish",function(){self._onFinish()})};inherits(ClientRequest,stream.Writable),ClientRequest.prototype.setHeader=function(name,value){var self=this,lowerName=name.toLowerCase();-1!==unsafeHeaders.indexOf(lowerName)||(self._headers[lowerName]={name:name,value:value})},ClientRequest.prototype.getHeader=function(name){var header=this._headers[name.toLowerCase()];return header?header.value:null},ClientRequest.prototype.removeHeader=function(name){var self=this;delete self._headers[name.toLowerCase()]},ClientRequest.prototype._onFinish=function(){var self=this;if(!self._destroyed){var opts=self._opts;"timeout"in opts&&0!==opts.timeout&&self.setTimeout(opts.timeout);var headersObj=self._headers,body=null;"GET"!==opts.method&&"HEAD"!==opts.method&&(body=new Blob(self._body,{type:(headersObj["content-type"]||{}).value||""}));var headersList=[];if(Object.keys(headersObj).forEach(function(keyName){var name=headersObj[keyName].name,value=headersObj[keyName].value;Array.isArray(value)?value.forEach(function(v){headersList.push([name,v])}):headersList.push([name,value])}),"fetch"===self._mode){var signal=null;if(capability.abortController){var controller=new AbortController;signal=controller.signal,self._fetchAbortController=controller,"requestTimeout"in opts&&0!==opts.requestTimeout&&(self._fetchTimer=global.setTimeout(function(){self.emit("requestTimeout"),self._fetchAbortController&&self._fetchAbortController.abort()},opts.requestTimeout))}global.fetch(self._opts.url,{method:self._opts.method,headers:headersList,body:body||void 0,mode:"cors",credentials:opts.withCredentials?"include":"same-origin",signal:signal}).then(function(response){self._fetchResponse=response,self._resetTimers(!1),self._connect()},function(reason){self._resetTimers(!0),self._destroyed||self.emit("error",reason)})}else{var xhr=self._xhr=new global.XMLHttpRequest;try{xhr.open(self._opts.method,self._opts.url,!0)}catch(err){return void process.nextTick(function(){self.emit("error",err)})}"responseType"in xhr&&(xhr.responseType=self._mode),"withCredentials"in xhr&&(xhr.withCredentials=!!opts.withCredentials),"text"===self._mode&&"overrideMimeType"in xhr&&xhr.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in opts&&(xhr.timeout=opts.requestTimeout,xhr.ontimeout=function(){self.emit("requestTimeout")}),headersList.forEach(function(header){xhr.setRequestHeader(header[0],header[1])}),self._response=null,xhr.onreadystatechange=function(){switch(xhr.readyState){case rStates.LOADING:case rStates.DONE:self._onXHRProgress();}},"moz-chunked-arraybuffer"===self._mode&&(xhr.onprogress=function(){self._onXHRProgress()}),xhr.onerror=function(){self._destroyed||(self._resetTimers(!0),self.emit("error",new Error("XHR error")))};try{xhr.send(body)}catch(err){return void process.nextTick(function(){self.emit("error",err)})}}}},ClientRequest.prototype._onXHRProgress=function(){var self=this;self._resetTimers(!1);!statusValid(self._xhr)||self._destroyed||(!self._response&&self._connect(),self._response._onXHRProgress(self._resetTimers.bind(self)))},ClientRequest.prototype._connect=function(){var self=this;self._destroyed||(self._response=new IncomingMessage(self._xhr,self._fetchResponse,self._mode,self._resetTimers.bind(self)),self._response.on("error",function(err){self.emit("error",err)}),self.emit("response",self._response))},ClientRequest.prototype._write=function(chunk,encoding,cb){var self=this;self._body.push(chunk),cb()},ClientRequest.prototype._resetTimers=function(done){var self=this;global.clearTimeout(self._socketTimer),self._socketTimer=null,done?(global.clearTimeout(self._fetchTimer),self._fetchTimer=null):self._socketTimeout&&(self._socketTimer=global.setTimeout(function(){self.emit("timeout")},self._socketTimeout))},ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(err){var self=this;self._destroyed=!0,self._resetTimers(!0),self._response&&(self._response._destroyed=!0),self._xhr?self._xhr.abort():self._fetchAbortController&&self._fetchAbortController.abort(),err&&self.emit("error",err)},ClientRequest.prototype.end=function(data,encoding,cb){var self=this;"function"==typeof data&&(cb=data,data=void 0),stream.Writable.prototype.end.call(self,data,encoding,cb)},ClientRequest.prototype.setTimeout=function(timeout,cb){var self=this;cb&&self.once("timeout",cb),self._socketTimeout=timeout,self._resetTimers(!1)},ClientRequest.prototype.flushHeaders=function(){},ClientRequest.prototype.setNoDelay=function(){},ClientRequest.prototype.setSocketKeepAlive=function(){};var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,require("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,require("buffer").Buffer)},{"./capability":31,"./response":33,_process:9,buffer:3,inherits:8,"readable-stream":28}],33:[function(require,module,exports){(function(process,global,Buffer){(function(){var capability=require("./capability"),inherits=require("inherits"),stream=require("readable-stream"),rStates=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},IncomingMessage=exports.IncomingMessage=function(xhr,response,mode,resetTimers){var self=this;if(stream.Readable.call(self),self._mode=mode,self.headers={},self.rawHeaders=[],self.trailers={},self.rawTrailers=[],self.on("end",function(){process.nextTick(function(){self.emit("close")})}),"fetch"===mode){function read(){reader.read().then(function(result){if(!self._destroyed)return resetTimers(result.done),result.done?void self.push(null):void(self.push(Buffer.from(result.value)),read())}).catch(function(err){resetTimers(!0),self._destroyed||self.emit("error",err)})}if(self._fetchResponse=response,self.url=response.url,self.statusCode=response.status,self.statusMessage=response.statusText,response.headers.forEach(function(header,key){self.headers[key.toLowerCase()]=header,self.rawHeaders.push(key,header)}),capability.writableStream){var writable=new WritableStream({write:function(chunk){return resetTimers(!1),new Promise(function(resolve,reject){self._destroyed?reject():self.push(Buffer.from(chunk))?resolve():self._resumeFetch=resolve})},close:function(){resetTimers(!0),self._destroyed||self.push(null)},abort:function(err){resetTimers(!0),self._destroyed||self.emit("error",err)}});try{return void response.body.pipeTo(writable).catch(function(err){resetTimers(!0),self._destroyed||self.emit("error",err)})}catch(e){}}var reader=response.body.getReader();read()}else{self._xhr=xhr,self._pos=0,self.url=xhr.responseURL,self.statusCode=xhr.status,self.statusMessage=xhr.statusText;var headers=xhr.getAllResponseHeaders().split(/\r?\n/);if(headers.forEach(function(header){var matches=header.match(/^([^:]+):\s*(.*)/);if(matches){var key=matches[1].toLowerCase();"set-cookie"===key?(void 0===self.headers[key]&&(self.headers[key]=[]),self.headers[key].push(matches[2])):void 0===self.headers[key]?self.headers[key]=matches[2]:self.headers[key]+=", "+matches[2],self.rawHeaders.push(matches[1],matches[2])}}),self._charset="x-user-defined",!capability.overrideMimeType){var mimeType=self.rawHeaders["mime-type"];if(mimeType){var charsetMatch=mimeType.match(/;\s*charset=([^;])(;|$)/);charsetMatch&&(self._charset=charsetMatch[1].toLowerCase())}self._charset||(self._charset="utf-8")}}};inherits(IncomingMessage,stream.Readable),IncomingMessage.prototype._read=function(){var self=this,resolve=self._resumeFetch;resolve&&(self._resumeFetch=null,resolve())},IncomingMessage.prototype._onXHRProgress=function(resetTimers){var self=this,xhr=self._xhr,response=null;switch(self._mode){case"text":if(response=xhr.responseText,response.length>self._pos){var newData=response.substr(self._pos);if("x-user-defined"===self._charset){for(var buffer=Buffer.alloc(newData.length),i=0;i<newData.length;i++)buffer[i]=255&newData.charCodeAt(i);self.push(buffer)}else self.push(newData,self._charset);self._pos=response.length}break;case"arraybuffer":if(xhr.readyState!==rStates.DONE||!xhr.response)break;response=xhr.response,self.push(Buffer.from(new Uint8Array(response)));break;case"moz-chunked-arraybuffer":if(response=xhr.response,xhr.readyState!==rStates.LOADING||!response)break;self.push(Buffer.from(new Uint8Array(response)));break;case"ms-stream":if(response=xhr.response,xhr.readyState!==rStates.LOADING)break;var reader=new global.MSStreamReader;reader.onprogress=function(){reader.result.byteLength>self._pos&&(self.push(Buffer.from(new Uint8Array(reader.result.slice(self._pos)))),self._pos=reader.result.byteLength)},reader.onload=function(){resetTimers(!0),self.push(null)},reader.readAsArrayBuffer(response);}self._xhr.readyState===rStates.DONE&&"ms-stream"!==self._mode&&(resetTimers(!0),self.push(null))}}).call(this)}).call(this,require("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,require("buffer").Buffer)},{"./capability":31,_process:9,buffer:3,inherits:8,"readable-stream":28}],34:[function(require,module,exports){'use strict';function _normalizeEncoding(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0;}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd);}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){if(127>=byte)return 0;return 6==byte>>5?2:14==byte>>4?3:30==byte>>3?4:2==byte>>6?-1:-2}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);return 0<=nb?(0<nb&&(self.lastNeed=nb-1),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]),0<=nb)?(0<nb&&(self.lastNeed=nb-2),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]),0<=nb?(0<nb&&(2===nb?nb=0:self.lastNeed=nb-3),nb):0)}function utf8CheckExtraBytes(self,buf){if(128!=(192&buf[0]))return self.lastNeed=0,"\uFFFD";if(1<self.lastNeed&&1<buf.length){if(128!=(192&buf[1]))return self.lastNeed=1,"\uFFFD";if(2<self.lastNeed&&2<buf.length&&128!=(192&buf[2]))return self.lastNeed=2,"\uFFFD"}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,buf,p);return void 0===r?this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(buf.copy(this.lastChar,p,0,buf.length),this.lastNeed-=buf.length):r}function utf16Text(buf,i){if(0==(buf.length-i)%2){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0==n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch(encoding=""+encoding,encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(r=this.fillLast(buf),void 0===r)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"\uFFFD":r},StringDecoder.prototype.text=function(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){return this.lastNeed<=buf.length?(buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length)}},{"safe-buffer":29}],35:[function(require,module,exports){'use strict';function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}var punycode=require("punycode"),util=require("./util");exports.parse=urlParse,exports.resolve=function(source,relative){return urlParse(source,!1,!0).resolve(relative)},exports.resolveObject=function(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative},exports.format=function(obj){return util.isString(obj)&&(obj=urlParse(obj)),obj instanceof Url?obj.format():Url.prototype.format.call(obj)},exports.Url=Url;var unwise=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),splitter=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter);uSplit[0]=uSplit[0].replace(/\\/g,"/"),url=uSplit.join(splitter);var rest=url;if(rest=rest.trim(),!slashesDenoteHost&&1===url.split("#").length){var simplePath=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var proto=/^([a-z0-9.+-]+:)/i.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);slashes&&!(proto&&hostlessProtocol[proto])&&(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var hostEnd=-1,i=0,hec;i<hostEndingChars.length;i++)hec=rest.indexOf(hostEndingChars[i]),-1!==hec&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec);var auth,atSign;atSign=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd),-1!==atSign&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(var i=0,hec;i<nonHostChars.length;i++)hec=rest.indexOf(nonHostChars[i]),-1!==hec&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec);-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),i=0,l=hostparts.length,part;i<l;i++)if(part=hostparts[i],part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)newpart+=127<part.charCodeAt(j)?"x":part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),ipv6Hostname||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(var i=0,l=autoEscape.length,ae;i<l;i++)if(ae=autoEscape[i],-1!==rest.indexOf(ae)){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}var hash=rest.indexOf("#");-1!==hash&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(-1===qm?parseQueryString&&(this.search="",this.query={}):(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var p=this.pathname||"",s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=encodeURIComponent(auth),auth=auth.replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&!1!==host?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):!host&&(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}),search=search.replace("#","%23"),protocol+host+pathname+search+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}for(var result=new Url,tkeys=Object.keys(this),tk=0,tkey;tk<tkeys.length;tk++)tkey=tkeys[tk],result[tkey]=this[tkey];if(result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0,rkey;rk<rkeys.length;rk++)rkey=rkeys[rk],"protocol"!==rkey&&(result[rkey]=relative[rkey]);return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){for(var keys=Object.keys(relative),v=0,k;v<keys.length;v++)k=keys[v],result[k]=relative[k];return result.href=result.format(),result}if(result.protocol=relative.protocol,!relative.host&&!hostlessProtocol[relative.protocol]){for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),2>relPath.length&&relPath.unshift(""),result.pathname=relPath.join("/")}else result.pathname=relative.pathname;if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=!!(result.host&&0<result.host.indexOf("@"))&&result.host.split("@");authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.path=result.search?"/"+result.search:null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host||1<srcPath.length)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;0<=i;i--)last=srcPath[i],"."===last?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");mustEndAbs&&""!==srcPath[0]&&(!srcPath[0]||"/"!==srcPath[0].charAt(0))&&srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=!!(result.host&&0<result.host.indexOf("@"))&&result.host.split("@");authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return mustEndAbs=mustEndAbs||result.host&&srcPath.length,mustEndAbs&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=/:[0-9]*$/.exec(host);port&&(port=port[0],":"!==port&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},{"./util":36,punycode:10,querystring:13}],36:[function(require,module){'use strict';module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},{}],37:[function(require,module){(function(global){(function(){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===(val+"").toLowerCase()}module.exports=function(fn,msg){function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);else config("traceDeprecation")?console.trace(msg):console.warn(msg);warned=!0}return fn.apply(this,arguments)}if(config("noDeprecation"))return fn;var warned=!1;return deprecated}}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],38:[function(require,module){module.exports=function(){for(var target={},i=0,source;i<arguments.length;i++)for(var key in source=arguments[i],source)hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target};var hasOwnProperty=Object.prototype.hasOwnProperty},{}],39:[function(require,module){module.exports=require("./lib/axios")},{"./lib/axios":41}],40:[function(require,module){'use strict';var utils=require("./../utils"),settle=require("./../core/settle"),cookies=require("./../helpers/cookies"),buildURL=require("./../helpers/buildURL"),buildFullPath=require("../core/buildFullPath"),parseHeaders=require("./../helpers/parseHeaders"),isURLSameOrigin=require("./../helpers/isURLSameOrigin"),createError=require("../core/createError");module.exports=function(config){return new Promise(function(resolve,reject){function onloadend(){if(request){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,responseData=responseType&&"text"!==responseType&&"json"!==responseType?request.response:request.responseText,response={data:responseData,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}}var requestData=config.data,requestHeaders=config.headers,responseType=config.responseType;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,"onloadend"in request?request.onloadend=onloadend:request.onreadystatechange=function(){request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))&&setTimeout(onloadend)},request.onabort=function(){request&&(reject(createError("Request aborted",config,"ECONNABORTED",request)),request=null)},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(createError(timeoutErrorMessage,config,config.transitional&&config.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}"setRequestHeader"in request&&utils.forEach(requestHeaders,function(val,key){"undefined"==typeof requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)}),utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),responseType&&"json"!==responseType&&(request.responseType=config.responseType),"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then(function(cancel){request&&(request.abort(),reject(cancel),request=null)}),requestData||(requestData=null),request.send(requestData)})}},{"../core/buildFullPath":47,"../core/createError":48,"./../core/settle":52,"./../helpers/buildURL":56,"./../helpers/cookies":58,"./../helpers/isURLSameOrigin":61,"./../helpers/parseHeaders":63,"./../utils":66}],41:[function(require,module){'use strict';function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var utils=require("./utils"),bind=require("./helpers/bind"),Axios=require("./core/Axios"),mergeConfig=require("./core/mergeConfig"),defaults=require("./defaults"),axios=createInstance(defaults);axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))},axios.Cancel=require("./cancel/Cancel"),axios.CancelToken=require("./cancel/CancelToken"),axios.isCancel=require("./cancel/isCancel"),axios.all=function(promises){return Promise.all(promises)},axios.spread=require("./helpers/spread"),axios.isAxiosError=require("./helpers/isAxiosError"),module.exports=axios,module.exports.default=axios},{"./cancel/Cancel":42,"./cancel/CancelToken":43,"./cancel/isCancel":44,"./core/Axios":45,"./core/mergeConfig":51,"./defaults":54,"./helpers/bind":55,"./helpers/isAxiosError":60,"./helpers/spread":64,"./utils":66}],42:[function(require,module){'use strict';function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},{}],43:[function(require,module){'use strict';function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise(function(resolve){resolvePromise=resolve});var token=this;executor(function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))})}var Cancel=require("./Cancel");CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var token=new CancelToken(function(c){cancel=c}),cancel;return{token:token,cancel:cancel}},module.exports=CancelToken},{"./Cancel":42}],44:[function(require,module){'use strict';module.exports=function(value){return!!(value&&value.__CANCEL__)}},{}],45:[function(require,module){'use strict';function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}var utils=require("./../utils"),buildURL=require("../helpers/buildURL"),InterceptorManager=require("./InterceptorManager"),dispatchRequest=require("./dispatchRequest"),mergeConfig=require("./mergeConfig"),validator=require("../helpers/validator"),validators=validator.validators;Axios.prototype.request=function(config){"string"==typeof config?(config=arguments[1]||{},config.url=arguments[0]):config=config||{},config=mergeConfig(this.defaults,config),config.method=config.method?config.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var transitional=config.transitional;transitional!==void 0&&validator.assertOptions(transitional,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var requestInterceptorChain=[],synchronousRequestInterceptors=!0;this.interceptors.request.forEach(function(interceptor){"function"==typeof interceptor.runWhen&&!1===interceptor.runWhen(config)||(synchronousRequestInterceptors=synchronousRequestInterceptors&&interceptor.synchronous,requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected))});var responseInterceptorChain=[];this.interceptors.response.forEach(function(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)});var promise;if(!synchronousRequestInterceptors){var chain=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(chain,requestInterceptorChain),chain=chain.concat(responseInterceptorChain),promise=Promise.resolve(config);chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise}for(var newConfig=config;requestInterceptorChain.length;){var onFulfilled=requestInterceptorChain.shift(),onRejected=requestInterceptorChain.shift();try{newConfig=onFulfilled(newConfig)}catch(error){onRejected(error);break}}try{promise=dispatchRequest(newConfig)}catch(error){return Promise.reject(error)}for(;responseInterceptorChain.length;)promise=promise.then(responseInterceptorChain.shift(),responseInterceptorChain.shift());return promise},Axios.prototype.getUri=function(config){return config=mergeConfig(this.defaults,config),buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],function(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:(config||{}).data}))}}),utils.forEach(["post","put","patch"],function(method){Axios.prototype[method]=function(url,data,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:data}))}}),module.exports=Axios},{"../helpers/buildURL":56,"../helpers/validator":65,"./../utils":66,"./InterceptorManager":46,"./dispatchRequest":49,"./mergeConfig":51}],46:[function(require,module){'use strict';function InterceptorManager(){this.handlers=[]}var utils=require("./../utils");InterceptorManager.prototype.use=function(fulfilled,rejected,options){return this.handlers.push({fulfilled:fulfilled,rejected:rejected,synchronous:!!options&&options.synchronous,runWhen:options?options.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,function(h){null!==h&&fn(h)})},module.exports=InterceptorManager},{"./../utils":66}],47:[function(require,module){'use strict';var isAbsoluteURL=require("../helpers/isAbsoluteURL"),combineURLs=require("../helpers/combineURLs");module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},{"../helpers/combineURLs":57,"../helpers/isAbsoluteURL":59}],48:[function(require,module){'use strict';var enhanceError=require("./enhanceError");module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},{"./enhanceError":50}],49:[function(require,module){'use strict';function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}var utils=require("./../utils"),transformData=require("./transformData"),isCancel=require("../cancel/isCancel"),defaults=require("../defaults");module.exports=function(config){throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData.call(config,config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers),utils.forEach(["delete","get","head","post","put","patch","common"],function(method){delete config.headers[method]});var adapter=config.adapter||defaults.adapter;return adapter(config).then(function(response){return throwIfCancellationRequested(config),response.data=transformData.call(config,response.data,response.headers,config.transformResponse),response},function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData.call(config,reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)})}},{"../cancel/isCancel":44,"../defaults":54,"./../utils":66,"./transformData":53}],50:[function(require,module){'use strict';module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error.isAxiosError=!0,error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},error}},{}],51:[function(require,module){'use strict';var utils=require("../utils");module.exports=function(config1,config2){function getMergedValue(target,source){return utils.isPlainObject(target)&&utils.isPlainObject(source)?utils.merge(target,source):utils.isPlainObject(source)?utils.merge({},source):utils.isArray(source)?source.slice():source}function mergeDeepProperties(prop){utils.isUndefined(config2[prop])?!utils.isUndefined(config1[prop])&&(config[prop]=getMergedValue(void 0,config1[prop])):config[prop]=getMergedValue(config1[prop],config2[prop])}config2=config2||{};var config={},valueFromConfig2Keys=["url","method","data"],mergeDeepPropertiesKeys=["headers","auth","proxy","params"],defaultToConfig2Keys=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],directMergeKeys=["validateStatus"];utils.forEach(valueFromConfig2Keys,function(prop){utils.isUndefined(config2[prop])||(config[prop]=getMergedValue(void 0,config2[prop]))}),utils.forEach(mergeDeepPropertiesKeys,mergeDeepProperties),utils.forEach(defaultToConfig2Keys,function(prop){utils.isUndefined(config2[prop])?!utils.isUndefined(config1[prop])&&(config[prop]=getMergedValue(void 0,config1[prop])):config[prop]=getMergedValue(void 0,config2[prop])}),utils.forEach(directMergeKeys,function(prop){prop in config2?config[prop]=getMergedValue(config1[prop],config2[prop]):prop in config1&&(config[prop]=getMergedValue(void 0,config1[prop]))});var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys).concat(directMergeKeys),otherKeys=Object.keys(config1).concat(Object.keys(config2)).filter(function(key){return-1===axiosKeys.indexOf(key)});return utils.forEach(otherKeys,mergeDeepProperties),config}},{"../utils":66}],52:[function(require,module){'use strict';var createError=require("./createError");module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response)):resolve(response)}},{"./createError":48}],53:[function(require,module){'use strict';var utils=require("./../utils"),defaults=require("./../defaults");module.exports=function(data,headers,fns){var context=this||defaults;return utils.forEach(fns,function(fn){data=fn.call(context,data,headers)}),data}},{"./../defaults":54,"./../utils":66}],54:[function(require,module){(function(process){(function(){'use strict';function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}function stringifySafely(rawValue,parser,encoder){if(utils.isString(rawValue))try{return(parser||JSON.parse)(rawValue),utils.trim(rawValue)}catch(e){if("SyntaxError"!==e.name)throw e}return(encoder||JSON.stringify)(rawValue)}var utils=require("./utils"),normalizeHeaderName=require("./helpers/normalizeHeaderName"),enhanceError=require("./core/enhanceError"),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"},defaults={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var adapter;return"undefined"==typeof XMLHttpRequest?"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(adapter=require("./adapters/http")):adapter=require("./adapters/xhr"),adapter}(),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Accept"),normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)||headers&&"application/json"===headers["Content-Type"]?(setContentTypeIfUnset(headers,"application/json"),stringifySafely(data)):data}],transformResponse:[function(data){var transitional=this.transitional,silentJSONParsing=transitional&&transitional.silentJSONParsing,forcedJSONParsing=transitional&&transitional.forcedJSONParsing,strictJSONParsing=!silentJSONParsing&&"json"===this.responseType;if(strictJSONParsing||forcedJSONParsing&&utils.isString(data)&&data.length)try{return JSON.parse(data)}catch(e){if(strictJSONParsing){if("SyntaxError"===e.name)throw enhanceError(e,this,"E_JSON_PARSE");throw e}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(status){return 200<=status&&300>status}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],function(method){defaults.headers[method]={}}),utils.forEach(["post","put","patch"],function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults}).call(this)}).call(this,require("_process"))},{"./adapters/http":40,"./adapters/xhr":40,"./core/enhanceError":50,"./helpers/normalizeHeaderName":62,"./utils":66,_process:9}],55:[function(require,module){'use strict';module.exports=function(fn,thisArg){return function(){for(var args=Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},{}],56:[function(require,module){'use strict';function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var utils=require("./../utils");module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,function(val,key){null===val||"undefined"==typeof val||(utils.isArray(val)?key+="[]":val=[val],utils.forEach(val,function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))}))}),serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},{"./../utils":66}],57:[function(require,module){'use strict';module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},{}],58:[function(require,module){'use strict';var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function(){return{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":66}],59:[function(require,module){'use strict';module.exports=function(url){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},{}],60:[function(require,module){'use strict';module.exports=function(payload){return"object"==typeof payload&&!0===payload.isAxiosError}},{}],61:[function(require,module){'use strict';var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function(){function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}var msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a"),originURL;return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return function(){return!0}}()},{"./../utils":66}],62:[function(require,module){'use strict';var utils=require("../utils");module.exports=function(headers,normalizedName){utils.forEach(headers,function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])})}},{"../utils":66}],63:[function(require,module){'use strict';var utils=require("./../utils"),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var parsed={},key,val,i;return headers?(utils.forEach(headers.split("\n"),function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&0<=ignoreDuplicateOf.indexOf(key))return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}}),parsed):parsed}},{"./../utils":66}],64:[function(require,module){'use strict';module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},{}],65:[function(require,module){'use strict';function isOlderVersion(version,thanVersion){for(var pkgVersionArr=thanVersion?thanVersion.split("."):currentVerArr,destVer=version.split("."),i=0;3>i;i++){if(pkgVersionArr[i]>destVer[i])return!0;if(pkgVersionArr[i]<destVer[i])return!1}return!1}var pkg=require("./../../package.json"),validators={};["object","boolean","number","function","string","symbol"].forEach(function(type,i){validators[type]=function(thing){return typeof thing===type||"a"+(1>i?"n ":" ")+type}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");validators.transitional=function(validator,version,message){function formatMessage(opt,desc){return"[Axios v"+pkg.version+"] Transitional option '"+opt+"'"+desc+(message?". "+message:"")}var isDeprecated=version&&isOlderVersion(version);return function(value,opt,opts){if(!1===validator)throw new Error(formatMessage(opt," has been removed in "+version));return isDeprecated&&!deprecatedWarnings[opt]&&(deprecatedWarnings[opt]=!0,console.warn(formatMessage(opt," has been deprecated since v"+version+" and will be removed in the near future"))),!validator||validator(value,opt,opts)}},module.exports={isOlderVersion:isOlderVersion,assertOptions:function(options,schema,allowUnknown){if("object"!=typeof options)throw new TypeError("options must be an object");for(var keys=Object.keys(options),i=keys.length;0<i--;){var opt=keys[i],validator=schema[opt];if(validator){var value=options[opt],result=value===void 0||validator(value,opt,options);if(!0!==result)throw new TypeError("option "+opt+" must be "+result);continue}if(!0!==allowUnknown)throw Error("Unknown option "+opt)}},validators:validators}},{"./../../package.json":67}],66:[function(require,module){'use strict';function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return"undefined"==typeof val}function isObject(val){return null!==val&&"object"==typeof val}function isPlainObject(val){if("[object Object]"!==toString.call(val))return!1;var prototype=Object.getPrototypeOf(val);return null===prototype||prototype===Object.prototype}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!==obj&&"undefined"!=typeof obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}function merge(){function assignValue(val,key){result[key]=isPlainObject(result[key])&&isPlainObject(val)?merge(result[key],val):isPlainObject(val)?merge({},val):isArray(val)?val.slice():val}for(var result={},i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result}var bind=require("./helpers/bind"),toString=Object.prototype.toString;module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){var result;return result="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer,result},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:forEach,merge:merge,extend:function(a,b,thisArg){return forEach(b,function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val}),a},trim:function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")},stripBOM:function(content){return 65279===content.charCodeAt(0)&&(content=content.slice(1)),content}}},{"./helpers/bind":55}],67:[function(require,module){module.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},{}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Deferred{constructor(){this._settled=!1,this._promise=new Promise((resolve,reject)=>{this._resolve=resolve,this._reject=reject})}getPromise(){return this._promise}resolve(value){this._settled=!0,this._resolve(value)}reject(reason){this._settled=!0,this._reject(reason)}catch(){return Promise.prototype.catch.apply(this._promise,arguments)}then(){return Promise.prototype.then.apply(this._promise,arguments)}finally(){return Promise.prototype.finally.apply(this._promise,arguments)}get[Symbol.toStringTag](){return this.promise.toString()}done(){const promise=arguments.length?this._promise.then.apply(this._promise,arguments):this._promise;promise.then(void 0,function(err){setTimeout(function(){throw err},0)})}isSettled(){return this._settled}promise(){return this.getPromise()}static new(){return new Deferred}}exports.default=Deferred},{}],69:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const Deferred_1=require("./Deferred"),isAsync_1=require("./isAsync");exports.default=function(func){if(isAsync_1.default(func))return func;let promise=Deferred_1.default.new();return function(){return __awaiter(this,arguments,void 0,function*(){let args=arguments;try{let result=func.apply(func,args);return promise.resolve(result),result}catch(ex){return promise.reject(ex),null}})}}},{"./Deferred":68,"./isAsync":74}],70:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.chainTasks=void 0,exports.chainTasks=(tasks,eachCb)=>__awaiter(void 0,void 0,void 0,function*(){for(var counter=0,i=0,t;i<tasks.length;i++)t=tasks[i],yield t().then(()=>{eachCb&&eachCb(counter++)})})},{}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=(func,wait,immediate=!1,allowTaillingCall=!0)=>{var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,allowTaillingCall&&func.apply(context,args)},wait),callNow&&func.apply(context,args)}}},{}],72:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const Deferred_1=require("./Deferred");exports.default=milliseconds=>__awaiter(void 0,void 0,void 0,function*(){let p=Deferred_1.default.new();return setTimeout(()=>p.resolve(),milliseconds),p})},{"./Deferred":68}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.async=exports.sleep=exports.chain=exports.measurements=exports.waitUntil=exports.isAsync=exports.delay=exports.throttle=exports.debounce=exports.Deferred=void 0;const Deferred_1=require("./Deferred");exports.Deferred=Deferred_1.default;const debounce_1=require("./debounce");exports.debounce=debounce_1.default;const throttle_1=require("./throttle");exports.throttle=throttle_1.default;const delay_1=require("./delay");exports.delay=delay_1.default;const isAsync_1=require("./isAsync");exports.isAsync=isAsync_1.default;const waitUntil_1=require("./waitUntil");exports.waitUntil=waitUntil_1.default;const measurements=require("./measurements");exports.measurements=measurements;const chain=require("./chain");exports.chain=chain;const sleep_1=require("./sleep");exports.sleep=sleep_1.default;const async_1=require("./async");exports.async=async_1.default},{"./Deferred":68,"./async":69,"./chain":70,"./debounce":71,"./delay":72,"./isAsync":74,"./measurements":75,"./sleep":76,"./throttle":77,"./waitUntil":78}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(func){const string=func.toString().trim();return!!(string.match(/^async /)||string.match(/return _ref[^\.]*\.apply/)||string.match(/__awaiter/))}},{}],75:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeasureAndReset=exports.peekMeasure=exports.startMeasure=exports.measure=void 0;let _measures={};exports.measure=function(fn){return __awaiter(this,void 0,void 0,function*(){const start=new Date().getTime();yield fn();const duration=new Date().getTime()-start;return duration})},exports.startMeasure=function(measureName="_"){return null==_measures[measureName]?(_measures[measureName]=new Date().getTime(),0):exports.peekMeasure(measureName)},exports.peekMeasure=function(measureName="_"){return null==_measures[measureName]?0:new Date().getTime()-_measures[measureName]},exports.getMeasureAndReset=function(measureName="_"){let ret=exports.peekMeasure(measureName);return _measures[measureName]=null,ret}},{}],76:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});exports.default=millis=>__awaiter(void 0,void 0,void 0,function*(){return new Promise(resolve=>setTimeout(resolve,millis))})},{}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=(func,wait,immediate=!0)=>{var timeout;return function(){var context=this,args=arguments;null!=timeout||(timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),immediate&&func.apply(context,args))}}},{}],78:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const Deferred_1=require("./Deferred"),async_1=require("./async");exports.default=(conditionFn,callback=null,interval=10,timeout=5e3)=>__awaiter(void 0,void 0,void 0,function*(){var expiry=new Date;expiry.setMilliseconds(expiry.getMilliseconds()+timeout);var wrapper=async_1.default(conditionFn);let p=Deferred_1.default.new();if(yield wrapper()){let ret=callback?callback():null;return p.resolve(ret)}var i=setInterval(()=>__awaiter(void 0,void 0,void 0,function*(){if(new Date>expiry)return clearInterval(i),p.reject();if(yield wrapper()){clearInterval(i);let ret=callback?callback():null;return p.resolve(ret)}}),interval);return p})},{"./Deferred":68,"./async":69}],79:[function(require,module){'use strict';function CronDate(timestamp,tz){var dateOpts={zone:tz};if(timestamp?timestamp instanceof CronDate?this._date=timestamp._date:timestamp instanceof Date?this._date=luxon.DateTime.fromJSDate(timestamp,dateOpts):"number"==typeof timestamp?this._date=luxon.DateTime.fromMillis(timestamp,dateOpts):"string"==typeof timestamp&&(this._date=luxon.DateTime.fromISO(timestamp,dateOpts),this._date.isValid||(this._date=luxon.DateTime.fromRFC2822(timestamp,dateOpts)),this._date.isValid||(this._date=luxon.DateTime.fromSQL(timestamp,dateOpts)),this._date.isValid||(this._date=luxon.DateTime.fromFormat(timestamp,"EEE, d MMM yyyy HH:mm:ss",dateOpts))):this._date=luxon.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(timestamp));tz&&tz!==this._date.zoneName&&(this._date=this._date.setZone(tz))}var luxon=require("luxon");CronDate.prototype.addYear=function(){this._date=this._date.plus({years:1})},CronDate.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")},CronDate.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")},CronDate.prototype.addHour=function(){var prev=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=prev&&(this._date=this._date.plus({hours:1}))},CronDate.prototype.addMinute=function(){var prev=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<prev&&(this._date=this._date.plus({hours:1}))},CronDate.prototype.addSecond=function(){var prev=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<prev&&(this._date=this._date.plus({hours:1}))},CronDate.prototype.subtractYear=function(){this._date=this._date.minus({years:1})},CronDate.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")},CronDate.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")},CronDate.prototype.subtractHour=function(){var prev=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=prev&&(this._date=this._date.minus({hours:1}))},CronDate.prototype.subtractMinute=function(){var prev=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>prev&&(this._date=this._date.minus({hours:1}))},CronDate.prototype.subtractSecond=function(){var prev=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>prev&&(this._date=this._date.minus({hours:1}))},CronDate.prototype.getDate=function(){return this._date.day},CronDate.prototype.getFullYear=function(){return this._date.year},CronDate.prototype.getDay=function(){var weekday=this._date.weekday;return 7==weekday?0:weekday},CronDate.prototype.getMonth=function(){return this._date.month-1},CronDate.prototype.getHours=function(){return this._date.hour},CronDate.prototype.getMinutes=function(){return this._date.minute},CronDate.prototype.getSeconds=function(){return this._date.second},CronDate.prototype.getMilliseconds=function(){return this._date.millisecond},CronDate.prototype.getTime=function(){return this._date.valueOf()},CronDate.prototype.getUTCDate=function(){return this._getUTC().day},CronDate.prototype.getUTCFullYear=function(){return this._getUTC().year},CronDate.prototype.getUTCDay=function(){var weekday=this._getUTC().weekday;return 7==weekday?0:weekday},CronDate.prototype.getUTCMonth=function(){return this._getUTC().month-1},CronDate.prototype.getUTCHours=function(){return this._getUTC().hour},CronDate.prototype.getUTCMinutes=function(){return this._getUTC().minute},CronDate.prototype.getUTCSeconds=function(){return this._getUTC().second},CronDate.prototype.toISOString=function(){return this._date.toUTC().toISO()},CronDate.prototype.toJSON=function(){return this._date.toJSON()},CronDate.prototype.setDate=function(d){this._date=this._date.set({day:d})},CronDate.prototype.setFullYear=function(y){this._date=this._date.set({year:y})},CronDate.prototype.setDay=function(d){this._date=this._date.set({weekday:d})},CronDate.prototype.setMonth=function(m){this._date=this._date.set({month:m+1})},CronDate.prototype.setHours=function(h){this._date=this._date.set({hour:h})},CronDate.prototype.setMinutes=function(m){this._date=this._date.set({minute:m})},CronDate.prototype.setSeconds=function(s){this._date=this._date.set({second:s})},CronDate.prototype.setMilliseconds=function(s){this._date=this._date.set({millisecond:s})},CronDate.prototype._getUTC=function(){return this._date.toUTC()},CronDate.prototype.toString=function(){return this.toDate().toString()},CronDate.prototype.toDate=function(){return this._date.toJSDate()},CronDate.prototype.isLastDayOfMonth=function(){var newDate=this._date.plus({days:1}).startOf("day");return this._date.month!==newDate.month},CronDate.prototype.isLastWeekdayOfMonth=function(){var newDate=this._date.plus({days:7}).startOf("day");return this._date.month!==newDate.month},module.exports=CronDate},{luxon:289}],80:[function(require,module){'use strict';function CronExpression(fields,options){this._options=options,this._utc=options.utc||!1,this._tz=this._utc?"UTC":options.tz,this._currentDate=new CronDate(options.currentDate,this._tz),this._startDate=options.startDate?new CronDate(options.startDate,this._tz):null,this._endDate=options.endDate?new CronDate(options.endDate,this._tz):null,this._isIterator=options.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=options.nthDayOfWeek||0,this.fields=CronExpression._freezeFields(fields)}var CronDate=require("./date"),stringifyField=require("./field_stringify"),LOOP_LIMIT=1e4;CronExpression.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],CronExpression.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},CronExpression.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}],CronExpression.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31],CronExpression.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},CronExpression.parseDefaults=["0","*","*","*","*","*"],CronExpression.standardValidCharacters=/^[\d|/|*|\-|,]+$/,CronExpression.dayOfWeekValidCharacters=/^[\d|\dL|/|*|\-|,|\?]+$/,CronExpression.dayOfMonthValidCharacters=/^[\d|L|/|*|\-|,|\?]+$/,CronExpression.validCharacters={second:CronExpression.standardValidCharacters,minute:CronExpression.standardValidCharacters,hour:CronExpression.standardValidCharacters,dayOfMonth:CronExpression.dayOfMonthValidCharacters,month:CronExpression.standardValidCharacters,dayOfWeek:CronExpression.dayOfWeekValidCharacters},CronExpression._isValidConstraintChar=function(constraints,value){return!("string"!=typeof value)&&constraints.chars.some(function(char){return-1<value.indexOf(char)})},CronExpression._parseField=function(field,value,constraints){function parseRepeat(val){var atoms=val.split("/");return 1<atoms.length?(atoms[0]==+atoms[0]&&(atoms=[atoms[0]+"-"+constraints.max,atoms[1]]),parseRange(atoms[0],atoms[atoms.length-1])):parseRange(val,1)}function parseRange(val,repeatInterval){var stack=[],atoms=val.split("-");if(1<atoms.length){if(2>atoms.length)return+val;if(!atoms[0].length){if(!atoms[1].length)throw new Error("Invalid range: "+val);return+val}var min=+atoms[0],max=+atoms[1];if(Number.isNaN(min)||Number.isNaN(max)||min<constraints.min||max>constraints.max)throw new Error("Constraint error, got range "+min+"-"+max+" expected range "+constraints.min+"-"+constraints.max);else if(min>=max)throw new Error("Invalid range: "+val);var repeatIndex=+repeatInterval;if(Number.isNaN(repeatIndex)||0>=repeatIndex)throw new Error("Constraint error, cannot repeat at every "+repeatIndex+" time.");for(var index=min;index<=max;index++)0<repeatIndex&&0==repeatIndex%repeatInterval?(repeatIndex=1,stack.push(index)):repeatIndex++;return stack}return Number.isNaN(+val)?val:+val}switch(field){case"month":case"dayOfWeek":var aliases=CronExpression.aliases[field];value=value.replace(/[a-z]{3}/gi,function(match){if(match=match.toLowerCase(),"undefined"!=typeof aliases[match])return aliases[match];throw new Error("Validation error, cannot resolve alias \""+match+"\"")});}if(!CronExpression.validCharacters[field].test(value))throw new Error("Invalid characters, got value: "+value);return-1===value.indexOf("*")?-1!==value.indexOf("?")&&(value=value.replace(/\?/g,constraints.min+"-"+constraints.max)):value=value.replace(/\*/g,constraints.min+"-"+constraints.max),function(val){function handleResult(result){if(result instanceof Array)for(var i=0,c=result.length,value;i<c;i++){if(value=result[i],CronExpression._isValidConstraintChar(constraints,value)){stack.push(value);continue}if("number"!=typeof value||Number.isNaN(value)||value<constraints.min||value>constraints.max)throw new Error("Constraint error, got value "+value+" expected range "+constraints.min+"-"+constraints.max);stack.push(value)}else{if(CronExpression._isValidConstraintChar(constraints,result))return void stack.push(result);var numResult=+result;if(Number.isNaN(numResult)||numResult<constraints.min||numResult>constraints.max)throw new Error("Constraint error, got value "+result+" expected range "+constraints.min+"-"+constraints.max);"dayOfWeek"===field&&(numResult%=7),stack.push(numResult)}}var stack=[],atoms=val.split(",");if(!atoms.every(function(atom){return 0<atom.length}))throw new Error("Invalid list value format");if(1<atoms.length)for(var i=0,c=atoms.length;i<c;i++)handleResult(parseRepeat(atoms[i]));else handleResult(parseRepeat(val));return stack.sort(CronExpression._sortCompareFn),stack}(value)},CronExpression._sortCompareFn=function(a,b){var aIsNumber="number"==typeof a,bIsNumber="number"==typeof b;return aIsNumber&&bIsNumber?a-b:!aIsNumber&&bIsNumber?1:aIsNumber&&!bIsNumber?-1:a.localeCompare(b)},CronExpression._handleMaxDaysInMonth=function(mappedFields){if(1===mappedFields.month.length){var daysInMonth=CronExpression.daysInMonth[mappedFields.month[0]-1];if(mappedFields.dayOfMonth[0]>daysInMonth)throw new Error("Invalid explicit day of month definition");return mappedFields.dayOfMonth.filter(function(dayOfMonth){return!("L"!==dayOfMonth)||dayOfMonth<=daysInMonth}).sort(CronExpression._sortCompareFn)}},CronExpression._freezeFields=function(fields){for(var i=0,c=CronExpression.map.length;i<c;++i){var field=CronExpression.map[i],value=fields[field];fields[field]=Object.freeze(value)}return Object.freeze(fields)},CronExpression.prototype._applyTimezoneShift=function(currentDate,dateMathVerb,method){if("Month"===method||"Day"===method){var prevTime=currentDate.getTime();currentDate[dateMathVerb+method]();var currTime=currentDate.getTime();prevTime===currTime&&(0===currentDate.getMinutes()&&0===currentDate.getSeconds()?currentDate.addHour():59===currentDate.getMinutes()&&59===currentDate.getSeconds()&&currentDate.subtractHour())}else{var previousHour=currentDate.getHours();currentDate[dateMathVerb+method]();var currentHour=currentDate.getHours(),diff=currentHour-previousHour;2===diff?24!==this.fields.hour.length&&(this._dstStart=currentHour):0===diff&&0===currentDate.getMinutes()&&0===currentDate.getSeconds()&&24!==this.fields.hour.length&&(this._dstEnd=currentHour)}},CronExpression.prototype._findSchedule=function(reverse){function matchSchedule(value,sequence){for(var i=0,c=sequence.length;i<c;i++)if(sequence[i]>=value)return sequence[i]===value;return sequence[0]===value}function isNthDayMatch(date,nthDayOfWeek){if(6>nthDayOfWeek){if(8>date.getDate()&&1===nthDayOfWeek)return!0;var offset=date.getDate()%7?1:0,adjustedDate=date.getDate()-date.getDate()%7,occurrence=Math.floor(adjustedDate/7)+offset;return occurrence===nthDayOfWeek}return!1}function isLInExpressions(expressions){return 0<expressions.length&&expressions.some(function(expression){return"string"==typeof expression&&0<=expression.indexOf("L")})}function isLastWeekdayOfMonthMatch(expressions){return expressions.some(function(expression){if(!isLInExpressions([expression]))return!1;var weekday=Number.parseInt(expression[0]);if(Number.isNaN(weekday))throw new Error("Invalid last weekday of the month expression: "+expression);return currentDate.getDay()===weekday&&currentDate.isLastWeekdayOfMonth()})}reverse=reverse||!1;for(var dateMathVerb=reverse?"subtract":"add",currentDate=new CronDate(this._currentDate,this._tz),startDate=this._startDate,endDate=this._endDate,startTimestamp=currentDate.getTime(),stepCount=0;stepCount<LOOP_LIMIT;){if(stepCount++,reverse){if(startDate&&0>currentDate.getTime()-startDate.getTime())throw new Error("Out of the timespan range");}else if(endDate&&0>endDate.getTime()-currentDate.getTime())throw new Error("Out of the timespan range");var dayOfMonthMatch=matchSchedule(currentDate.getDate(),this.fields.dayOfMonth);isLInExpressions(this.fields.dayOfMonth)&&(dayOfMonthMatch=dayOfMonthMatch||currentDate.isLastDayOfMonth());var dayOfWeekMatch=matchSchedule(currentDate.getDay(),this.fields.dayOfWeek);isLInExpressions(this.fields.dayOfWeek)&&(dayOfWeekMatch=dayOfWeekMatch||isLastWeekdayOfMonthMatch(this.fields.dayOfWeek));var isDayOfMonthWildcardMatch=this.fields.dayOfMonth.length>=CronExpression.daysInMonth[currentDate.getMonth()],isDayOfWeekWildcardMatch=this.fields.dayOfWeek.length===CronExpression.constraints[5].max-CronExpression.constraints[5].min+1,currentHour=currentDate.getHours();if(!dayOfMonthMatch&&!dayOfWeekMatch){this._applyTimezoneShift(currentDate,dateMathVerb,"Day");continue}if(!isDayOfMonthWildcardMatch&&isDayOfWeekWildcardMatch&&!dayOfMonthMatch){this._applyTimezoneShift(currentDate,dateMathVerb,"Day");continue}if(isDayOfMonthWildcardMatch&&!isDayOfWeekWildcardMatch&&!dayOfWeekMatch){this._applyTimezoneShift(currentDate,dateMathVerb,"Day");continue}if(0<this._nthDayOfWeek&&!isNthDayMatch(currentDate,this._nthDayOfWeek)){this._applyTimezoneShift(currentDate,dateMathVerb,"Day");continue}if(!matchSchedule(currentDate.getMonth()+1,this.fields.month)){this._applyTimezoneShift(currentDate,dateMathVerb,"Month");continue}if(!matchSchedule(currentHour,this.fields.hour)){if(this._dstStart!==currentHour){this._dstStart=null,this._applyTimezoneShift(currentDate,dateMathVerb,"Hour");continue}else if(!matchSchedule(currentHour-1,this.fields.hour)){currentDate[dateMathVerb+"Hour"]();continue}}else if(this._dstEnd===currentHour&&!reverse){this._dstEnd=null,this._applyTimezoneShift(currentDate,"add","Hour");continue}if(!matchSchedule(currentDate.getMinutes(),this.fields.minute)){this._applyTimezoneShift(currentDate,dateMathVerb,"Minute");continue}if(!matchSchedule(currentDate.getSeconds(),this.fields.second)){this._applyTimezoneShift(currentDate,dateMathVerb,"Second");continue}if(startTimestamp===currentDate.getTime()){"add"===dateMathVerb||0===currentDate.getMilliseconds()?this._applyTimezoneShift(currentDate,dateMathVerb,"Second"):currentDate.setMilliseconds(0);continue}break}if(stepCount>=LOOP_LIMIT)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new CronDate(currentDate,this._tz),this._hasIterated=!0,currentDate},CronExpression.prototype.next=function(){var schedule=this._findSchedule();return this._isIterator?{value:schedule,done:!this.hasNext()}:schedule},CronExpression.prototype.prev=function(){var schedule=this._findSchedule(!0);return this._isIterator?{value:schedule,done:!this.hasPrev()}:schedule},CronExpression.prototype.hasNext=function(){var current=this._currentDate,hasIterated=this._hasIterated;try{return this._findSchedule(),!0}catch(err){return!1}finally{this._currentDate=current,this._hasIterated=hasIterated}},CronExpression.prototype.hasPrev=function(){var current=this._currentDate,hasIterated=this._hasIterated;try{return this._findSchedule(!0),!0}catch(err){return!1}finally{this._currentDate=current,this._hasIterated=hasIterated}},CronExpression.prototype.iterate=function(steps,callback){var dates=[];if(0<=steps)for(var i=0,c=steps;i<c;i++)try{var item=this.next();dates.push(item),callback&&callback(item,i)}catch(err){break}else for(var i=0,c=steps;i>c;i--)try{var item=this.prev();dates.push(item),callback&&callback(item,i)}catch(err){break}return dates},CronExpression.prototype.reset=function(newDate){this._currentDate=new CronDate(newDate||this._options.currentDate)},CronExpression.prototype.stringify=function(includeSeconds){for(var resultArr=[],i=includeSeconds?0:1,c=CronExpression.map.length;i<c;++i){var field=CronExpression.map[i],value=this.fields[field],constraint=CronExpression.constraints[i];resultArr.push(stringifyField(value,constraint.min,constraint.max))}return resultArr.join(" ")},CronExpression.parse=function parse(expression,options){function parse(expression,options){function parseNthDay(val){var atoms=val.split("#");if(1<atoms.length){var nthValue=+atoms[atoms.length-1];if(/,/.test(val))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(val))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(val))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(2<atoms.length||Number.isNaN(nthValue)||1>nthValue||5<nthValue)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return options.nthDayOfWeek=nthValue,atoms[0]}return val}options||(options={}),"undefined"==typeof options.currentDate&&(options.currentDate=new CronDate(void 0,self._tz)),CronExpression.predefined[expression]&&(expression=CronExpression.predefined[expression]);var fields=[],atoms=(expression+"").trim().split(/\s+/);if(6<atoms.length)throw new Error("Invalid cron expression");for(var start=CronExpression.map.length-atoms.length,i=0,c=CronExpression.map.length;i<c;++i){var field=CronExpression.map[i],value=atoms[atoms.length>c?i:i-start];if(i<start||!value)fields.push(CronExpression._parseField(field,CronExpression.parseDefaults[i],CronExpression.constraints[i]));else{var val="dayOfWeek"===field?parseNthDay(value):value;fields.push(CronExpression._parseField(field,val,CronExpression.constraints[i]))}}for(var mappedFields={},i=0,c=CronExpression.map.length,key;i<c;i++)key=CronExpression.map[i],mappedFields[key]=fields[i];var dayOfMonth=CronExpression._handleMaxDaysInMonth(mappedFields);return mappedFields.dayOfMonth=dayOfMonth||mappedFields.dayOfMonth,new CronExpression(mappedFields,options)}var self=this;return"function"==typeof options&&(options={}),parse(expression,options)},CronExpression.fieldsToExpression=function(fields,options){function validateConstraints(field,values,constraints){if(!values)throw new Error("Validation error, Field "+field+" is missing");if(0===values.length)throw new Error("Validation error, Field "+field+" contains no values");for(var i=0,c=values.length,value;i<c;i++)if((value=values[i],!CronExpression._isValidConstraintChar(constraints,value))&&("number"!=typeof value||Number.isNaN(value)||value<constraints.min||value>constraints.max))throw new Error("Constraint error, got value "+value+" expected range "+constraints.min+"-"+constraints.max)}for(var mappedFields={},i=0,c=CronExpression.map.length;i<c;++i){var field=CronExpression.map[i],values=fields[field];validateConstraints(field,values,CronExpression.constraints[i]);for(var copy=[],j=-1;++j<values.length;)copy[j]=values[j];if(values=copy.sort(CronExpression._sortCompareFn).filter(function(item,pos,ary){return!pos||item!==ary[pos-1]}),values.length!==copy.length)throw new Error("Validation error, Field "+field+" contains duplicate values");mappedFields[field]=values}var dayOfMonth=CronExpression._handleMaxDaysInMonth(mappedFields);return mappedFields.dayOfMonth=dayOfMonth||mappedFields.dayOfMonth,new CronExpression(mappedFields,options||{})},module.exports=CronExpression},{"./date":79,"./field_stringify":82}],81:[function(require,module){'use strict';function buildRange(item){return{start:item,count:1}}function completeRangeWithItem(range,item){range.end=item,range.step=item-range.start,range.count=2}function finalizeCurrentRange(results,currentRange,currentItemRange){currentRange&&(2===currentRange.count?(results.push(buildRange(currentRange.start)),results.push(buildRange(currentRange.end))):results.push(currentRange)),currentItemRange&&results.push(currentItemRange)}module.exports=function(arr){for(var results=[],currentRange=void 0,i=0,currentItem;i<arr.length;i++)currentItem=arr[i],"number"==typeof currentItem?currentRange?1===currentRange.count?completeRangeWithItem(currentRange,currentItem):currentRange.step===currentItem-currentRange.end?(currentRange.count++,currentRange.end=currentItem):2===currentRange.count?(results.push(buildRange(currentRange.start)),currentRange=buildRange(currentRange.end),completeRangeWithItem(currentRange,currentItem)):(finalizeCurrentRange(results,currentRange),currentRange=buildRange(currentItem)):currentRange=buildRange(currentItem):(finalizeCurrentRange(results,currentRange,buildRange(currentItem)),currentRange=void 0);return finalizeCurrentRange(results,currentRange),results}},{}],82:[function(require,module){'use strict';var compactField=require("./field_compactor");module.exports=function(arr,min,max){var ranges=compactField(arr);if(1===ranges.length){var singleRange=ranges[0],step=singleRange.step;if(1===step&&singleRange.start===min&&singleRange.end===max)return"*";if(1!==step&&singleRange.start===min&&singleRange.end===max-step+1)return"*/"+step}for(var resultArr=[],i=0,l=ranges.length,range;i<l;++i)if(range=ranges[i],1===range.count)resultArr.push(range.start);else{var step=range.step;1===step?resultArr.push(range.start+"-"+range.end):range.end===max-step+1?resultArr.push(range.start+"/"+step):resultArr.push(range.start+"-"+range.end+"/"+step)}return resultArr.join(",")}},{"./field_compactor":81}],83:[function(require,module){'use strict';function CronParser(){}var CronExpression=require("./expression");CronParser._parseEntry=function(entry){var atoms=entry.split(" ");if(6===atoms.length)return{interval:CronExpression.parse(entry)};if(6<atoms.length)return{interval:CronExpression.parse(atoms.slice(0,6).join(" ")),command:atoms.slice(6,atoms.length)};throw new Error("Invalid entry: "+entry)},CronParser.parseExpression=function(expression,options){return CronExpression.parse(expression,options)},CronParser.fieldsToExpression=function(fields,options){return CronExpression.fieldsToExpression(fields,options)},CronParser.parseString=function(data){for(var blocks=data.split("\n"),response={variables:{},expressions:[],errors:{}},i=0,c=blocks.length;i<c;i++){var block=blocks[i],matches=null,entry=block.trim();if(0<entry.length)if(entry.match(/^#/))continue;else if(matches=entry.match(/^(.*)=(.*)$/))response.variables[matches[1]]=matches[2];else{var result=null;try{result=CronParser._parseEntry("0 "+entry),response.expressions.push(result.interval)}catch(err){response.errors[entry]=err}}}return response},CronParser.parseFile=function(filePath,callback){require("fs").readFile(filePath,function(err,data){return err?void callback(err):callback(null,CronParser.parseString(data.toString()))})},module.exports=CronParser},{"./expression":80,fs:2}],84:[function(require,module,exports){(function(root){Array.prototype.map||(Array.prototype.map=function(callback,thisArg){var T,A,k;if(null==this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("function"!=typeof callback)throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),A=Array(len),k=0;k<len;){var kValue,mappedValue;k in O&&(kValue=O[k],mappedValue=callback.call(T,kValue,k,O),A[k]=mappedValue),k++}return A});var detect=root.detect=function(){var _this=function(){};_this.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"],_this.types=["browser","os","device"],_this.regexes={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(OPR)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.4|Windows NT 10\\.0)",os_replacement:"Windows 10"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:["Firefox Mobile","Opera Mobile","Opera Mini","Mobile Safari","webOS","IE Mobile","Playstation Portable","Nokia","Blackberry","Palm","Silk","Android","Maemo","Obigo","Netfront","AvantGo","Teleca","SEMC-Browser","Bolt","Iris","UP.Browser","Symphony","Minimo","Bunjaloo","Jasmine","Dolfin","Polaris","BREW","Chrome Mobile","Chrome Mobile iOS","UC Browser","Tizen Browser"]}||function(){var results={};return _this.parsers.map(function(parser){results[parser]=[]}),results}(),_this.families=function(){var results={};return _this.types.map(function(type){results[type]=[]}),results}();var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,find=function(ua,obj){for(var ret={},i=0;i<obj.length&&(ret=obj[i](ua),!ret);i++);return ret},remove=function(arr,props){each(arr,function(obj){each(props,function(prop){delete obj[prop]})})},each=forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length)for(var i=0,l=obj.length;i<l;i++)iterator.call(context,obj[i],i,obj);else for(var key in obj)_.has(obj,key)&&iterator.call(context,obj[key],key,obj)},check=function(str){return!!(str&&"undefined"!=typeof str&&null!=str)},toVersionString=function(obj){var output="";return obj=obj||{},check(obj)&&check(obj.major)&&(output+=obj.major,check(obj.minor)&&(output+="."+obj.minor,check(obj.patch)&&(output+="."+obj.patch))),output},toString=function(obj){obj=obj||{};var suffix=toVersionString(obj);return suffix&&(suffix=" "+suffix),obj&&check(obj.family)?obj.family+suffix:""};return _this.parse=function(ua){var parsers=function(type){return _this.regexes[type+"_parsers"].map(function(obj){var regexp=new RegExp(obj.regex),rep=obj[("browser"===type?"family":type)+"_replacement"],major_rep=obj.major_version_replacement;return function(ua){var m=ua.match(regexp);if(!m)return null;var ret={family:(rep?rep.replace("$1",m[1]):m[1])||"other",major:parseInt(major_rep?major_rep:m[2])||null,minor:m[3]?parseInt(m[3]):null,patch:m[4]?parseInt(m[4]):null,tablet:obj.tablet,man:obj.manufacturer||null};return ret}})},browser_parsers=parsers("browser"),os_parsers=parsers("os"),device_parsers=parsers("device"),a=new function(){};a.source=ua,a.browser=find(ua,browser_parsers),check(a.browser)?(a.browser.name=toString(a.browser),a.browser.version=toVersionString(a.browser)):a.browser={},a.os=find(ua,os_parsers),check(a.os)?(a.os.name=toString(a.os),a.os.version=toVersionString(a.os)):a.os={},a.device=find(ua,device_parsers),check(a.device)?(a.device.name=toString(a.device),a.device.version=toVersionString(a.device)):a.device={tablet:!1,family:"Other"};var mobile_agents={},mobile_browser_families=_this.regexes.mobile_browser_families.map(function(str){mobile_agents[str]=!0}),mobile_os_families=_this.regexes.mobile_os_families.map(function(str){mobile_agents[str]=!0});return a.device.type="Spider"===a.browser.family?"Spider":a.browser.tablet||a.os.tablet||a.device.tablet?"Tablet":mobile_agents.hasOwnProperty(a.browser.family)?"Mobile":"Desktop",a.device.manufacturer=a.browser.man||a.os.man||a.device.man||null,remove([a.browser,a.os,a.device],["tablet","man"]),a},_this}();"undefined"==typeof exports?root.detect=detect:("undefined"!=typeof module&&module.exports&&(exports=module.exports=detect),exports.detect=detect),"function"==typeof define&&define.amd&&define(function(){return detect})})(window)},{}],85:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleOptions=exports.DependencyInjector=void 0;const concurrency_libx_js_1=require("concurrency.libx.js"),Helpers_1=require("./Helpers");class DependencyInjector{constructor(parent,options){this.modules=null,this.parent=null,this._options=new ModuleOptions,this._pendingRequireRequests=[],this._options=Object.assign(Object.assign({},this._options),options),this.modules={},this.parent=parent}register(moduleIdentifier,instance){if(null==moduleIdentifier)throw`DependencyInjector: identifier cannot be null`;if(null!=this.modules[moduleIdentifier])throw`DependencyInjector: Module already exists!, identifier: ${moduleIdentifier.toString()}`;return this.modules[moduleIdentifier]=instance,this._recheckPendingRequireRequestsAndTrigger(moduleIdentifier,instance),instance}get(moduleIdentifier){return this.modules[moduleIdentifier]}require(moduleIdentifier){return __awaiter(this,void 0,void 0,function*(){return yield this.requireSingle(moduleIdentifier)})}requireMany(moduleIdentifiers){return __awaiter(this,void 0,void 0,function*(){const promises=[];for(let identifier of moduleIdentifiers){const p=this.requireSingle(identifier);promises.push(p)}return yield Promise.all(promises)})}inject(injectFunc,moduleIdentifiers){return __awaiter(this,void 0,void 0,function*(){null==moduleIdentifiers&&(moduleIdentifiers=Helpers_1.default.getParamNames(injectFunc));const modules=yield this.requireMany(moduleIdentifiers);return injectFunc.apply(injectFunc,modules)})}initiate(classPrototype,constructorDependenciesIdentifiers){return __awaiter(this,void 0,void 0,function*(){const modulesNames=constructorDependenciesIdentifiers||Helpers_1.default.getParamNames(classPrototype),deps=yield this.requireMany(modulesNames);return Reflect.construct(classPrototype,deps)})}injectAndRegister(moduleIdentifier,injectFunc){return __awaiter(this,void 0,void 0,function*(){const instance=yield this.inject(injectFunc);return this.register(moduleIdentifier,instance)})}hasPendingRequireRequests(){return 0<this._pendingRequireRequests.length}unregister(moduleIdentifier){delete this.modules[moduleIdentifier]}requireSingle(moduleIdentifier){return __awaiter(this,void 0,void 0,function*(){let existingModule=this.modules[moduleIdentifier];if(null==existingModule&&null!=this.parent&&(existingModule=this.parent.modules[moduleIdentifier]),null!=existingModule)return existingModule;const pendingRequire=new PendingRequireRequest(moduleIdentifier);return this._pendingRequireRequests.push(pendingRequire),pendingRequire.promise})}_recheckPendingRequireRequestsAndTrigger(newRegisteredModuleIdentifier,newInstance){for(let pendingRequire of[...this._pendingRequireRequests])pendingRequire.moduleIdentifier==newRegisteredModuleIdentifier&&(pendingRequire.promise.resolve(newInstance),Helpers_1.default.removeItemFromArr(this._pendingRequireRequests,pendingRequire))}}exports.DependencyInjector=DependencyInjector;class PendingRequireRequest{constructor(moduleIdentifier){this.moduleIdentifier=moduleIdentifier,this.promise=new concurrency_libx_js_1.Deferred}onResolve(instance){return this.promise.resolve(instance)}}class ModuleOptions{}exports.ModuleOptions=ModuleOptions,exports.default=new DependencyInjector},{"./Helpers":86,"concurrency.libx.js":92}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Helpers{}exports.default=Helpers,Helpers.STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Helpers.ARGUMENT_NAMES=/([^\s,]+)/g,Helpers.getParamNames=function(func){const fnStr=func.toString().replace(Helpers.STRIP_COMMENTS,"");let m=null;if(m=null==fnStr.match(/^\s*class\s+/)?fnStr.match(/^\(?(?:async\s?)?(?:function\*?\s[\w\d]+\s?)?\(?([\w\d\,\s\$\_]+)\)?/):fnStr.match(/(?:constructor\s?)\(?([\w\d\,\s\$\_]+)\)?/),null==m||1>m.length)return null;const params=m[1].replace(/\s/g,"");let result=params.split(",");return null===result&&(result=[]),result},Helpers.getKeys=obj=>Object.keys(obj),Helpers.isEmpty=obj=>{if(null==obj)return!0;for(const prop in obj)if(obj.hasOwnProperty(prop))return!1;return JSON.stringify(obj)===JSON.stringify({})},Helpers.removeItemFromArr=(arr,item)=>{const index=arr.indexOf(item);return-1<index&&arr.splice(index,1),arr},Helpers.tryGetInstanceTypeName=function(instance){var _a,_b,_c;if(null==instance)return null;if("function"==typeof instance){if(""==instance.name)throw new Error("Helpers:tryGetInstanceName: Cannot imply instance name from anonymous functions");return instance.name}return(null===(_a=instance.constructor)||void 0===_a?void 0:_a.name)&&"Function"!=(null===(_b=instance.constructor)||void 0===_b?void 0:_b.name)?null===(_c=instance.constructor)||void 0===_c?void 0:_c.name:typeof instance}},{}],87:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{dup:68}],88:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"./Deferred":87,"./isAsync":93,dup:69}],89:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{dup:70}],90:[function(require,module,exports){arguments[4][71][0].apply(exports,arguments)},{dup:71}],91:[function(require,module,exports){arguments[4][72][0].apply(exports,arguments)},{"./Deferred":87,dup:72}],92:[function(require,module,exports){arguments[4][73][0].apply(exports,arguments)},{"./Deferred":87,"./async":88,"./chain":89,"./debounce":90,"./delay":91,"./isAsync":93,"./measurements":94,"./sleep":95,"./throttle":96,"./waitUntil":97,dup:73}],93:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{dup:74}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeasureAndReset=exports.getMeasure=exports.measure=void 0;let _measures={};exports.measure=function(measureName="_"){return null==_measures[measureName]?(_measures[measureName]=new Date().getTime(),0):exports.getMeasure(measureName)},exports.getMeasure=function(measureName="_"){return null==_measures[measureName]?0:new Date().getTime()-_measures[measureName]},exports.getMeasureAndReset=function(measureName="_"){let ret=exports.getMeasure(measureName);return _measures[measureName]=null,ret}},{}],95:[function(require,module,exports){arguments[4][76][0].apply(exports,arguments)},{dup:76}],96:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{dup:77}],97:[function(require,module,exports){arguments[4][78][0].apply(exports,arguments)},{"./Deferred":87,"./async":88,dup:78}],98:[function(require,module){module.exports="object"==typeof self?self.FormData:window.FormData},{}],99:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.browserHelpers=exports.BrowserHelpers=void 0;const helpers_1=require("../helpers"),ObjectHelpers_1=require("../helpers/ObjectHelpers"),log_1=require("../modules/log"),Network_1=require("../modules/Network");class BrowserHelpers{constructor(){if(this.isiOS=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.urlize=function(obj){var str="";for(var key in obj)null!=obj[key]&&(""!=str&&(str+="&"),str+=key+"="+encodeURIComponent(obj[key]));return str},this.cleanUrl=function(url){return null==url?null:url.replace(/([^:]\/)\/+/g,"$1")},this.querialize=function(obj,avoidPrefix){if(null==obj||1>obj.length)return null;var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return(avoidPrefix?"":"?")+str.join("&")},this.injectScript=function(src,onReady,doc=document){var head=doc.getElementsByTagName("head")[0],script=doc.createElement("script");script.type="text/javascript",script.onreadystatechange=function(){"complete"==this.readyState&&onReady(src)},script.onload=onReady,script.src=src,head.appendChild(script)},this.injectCss=function(filename,doc=document){var fileref=doc.createElement("link");fileref.setAttribute("rel","stylesheet"),fileref.setAttribute("type","text/css"),fileref.setAttribute("href",filename),"undefined"!=typeof fileref&&doc.getElementsByTagName("head")[0].appendChild(fileref)},this.reload=()=>{window.location.reload()},this.events={subscribe:(eventName,callback)=>{document.addEventListener(eventName,callback)},broadcast:eventName=>{var event=document.createEvent("Event");event.initEvent(eventName),document.dispatchEvent(event)}},this.messages={subscribe:(channelName,callback)=>{document.addEventListener(channelName,function(e){callback(e.detail.message)})},broadcast:(channelName,message)=>{var newEvent=new CustomEvent(channelName,{detail:{message:message}});document.dispatchEvent(newEvent)}},this.uploadFile=function(folderName,filesInput,callback){var fd=new FormData;fd.append("file",filesInput[0]),fd.append("destFolder","cvs"),Network_1.network.httpPost("api/uploadFile",fd,{withCredentials:!0,headers:{"Content-Type":void 0,destFolder:folderName}}).then(function(data){log_1.log.verbose("uploadFile:success",data),callback(filesInput[0],data)}).catch(function(err){log_1.log.error("File upload failed!",err)})},this.isIframe=function(){try{return window.self!==window.top}catch(e){return!0}},this.copyToClipboard=text=>{function isOS(){return navigator.userAgent.match(/ipad|iphone/i)}function createTextArea(text){textArea=document.createElement("textArea"),textArea.value=text,document.body.appendChild(textArea)}function selectText(){var range,selection;isOS()?(range=document.createRange(),range.selectNodeContents(textArea),selection=window.getSelection(),selection.removeAllRanges(),selection.addRange(range),textArea.setSelectionRange(0,999999)):textArea.select()}function copyToClipboard(){document.execCommand("copy"),document.body.removeChild(textArea)}let p=helpers_1.helpers.newPromise(),textArea,copy;return copy=function(text){createTextArea(text),selectText(),copyToClipboard(),p.resolve(text)},copy(text),p},this.getHost=function(absUrl){var url=absUrl||location.href,hostname;return hostname=-1<url.indexOf("://")?url.split("/")[2]:url.split("/")[0],hostname=hostname.split("?")[0],url.substr(0,url.indexOf("://")+3)+hostname+"/"},this.getParameters=function(){var search=location.search;return search=search.replace(/(?![?&])([^=&?]+)(\=)?([^&]+)?/g,"$1=$3"),search=search.substring(1),null==search||""==search?{}:JSON.parse("{\""+decodeURI(search).replace(/\"/g,"\\\"").replace(/&/g,"\",\"").replace(/=/g,"\":\"")+"\"}")},this.getAttributes=function($node,pattern){var attrs={};return jQuery.each($node[0].attributes,function(index,attribute){var attrName=attribute.name;if(null!=pattern){var match=attrName.match(pattern);if(null==match)return;attrName=match[1]}attrName=attrName.replace("-","_"),attrs[attrName]=attribute.value}),attrs},this.getSubDomain=()=>{var p=window.location.host.split(".");return 2<p.length?p[0]:null},this.getDomain=()=>{var p=window.location.host.split(".");return 2<p.length?p[1]:1<p.length?p[0]:null},this.localDownload=(data,fileName,type="data:text/plain;charset=utf-8")=>{var downloadLink=document.createElement("a");downloadLink.href=type+","+data,downloadLink.download=fileName,document.body.appendChild(downloadLink),downloadLink.click(),document.body.removeChild(downloadLink)},this.localDownloadBlob=(data,fileName,type="octet/stream;charset=utf-8")=>{var a=document.createElement("a");document.body.appendChild(a),a.style="display: none",ObjectHelpers_1.objectHelpers.isObject(data)&&(data=JSON.stringify(data));var blob=new Blob([data],{type:type}),url=window.URL.createObjectURL(blob);a.href=url,a.download=fileName,a.click(),window.URL.revokeObjectURL(url)},this.jQueryExt={setup:function($){$.postJson=function(url,jsonData){var ret=$.ajax({url:url,type:"POST",dataType:"json",data:JSON.stringify(jsonData),contentType:"application/json; charset=utf-8"});return ret},$.getJson=function(url){for(var args=[],_i=0;_i<arguments.length-1;_i++)args[_i]=arguments[_i+1];var fullUrl=url.format(args);return $.when($.getJSON(fullUrl))},$.getJsonSync=function(url){for(var args=[],_i=0;_i<arguments.length-1;_i++)args[_i]=arguments[_i+1];var fullUrl=url.format(args),ret=$.ajax({url:fullUrl,type:"GET",async:!1,cache:!1,dataType:"json",contentType:"application/json; charset=utf-8"});return $.when(ret)},$.expr[":"].hasText=function(node,index,props){return node.textContent.trim()==props[3]}},applyReveal:function(){null==jQuery().viewportChecker||(jQuery("[reveal-reset]").viewportChecker({classToAdd:"visible animated",removeClassAfterAnimation:!1,repeat:!0,offset:"10%",callbackFunction:function(elem,action){var e=jQuery(elem);"add"==action?e.addClass(e.attr("reveal-reset")):e.removeClass(e.attr("reveal-reset"))}}),jQuery("[reveal]").viewportChecker({classToAdd:"visible animated",removeClassAfterAnimation:!1,offset:"10%",callbackFunction:function(elem,action){var e=jQuery(elem);"add"==action?e.addClass(e.attr("reveal")):e.removeClass(e.attr("reveal"))}}))}},this.getImageMeta=function(url){var defer=helpers_1.helpers.newPromise(),img=new Image;return img.addEventListener("load",function(){defer.resolve({width:this.naturalWidth,height:img.naturalHeight})}),img.src=url,defer.promise()},this.imgToBase64=(src,outputFormat)=>__awaiter(this,void 0,void 0,function*(){var p=helpers_1.helpers.newPromise(),img=new Image;return img.crossOrigin="Anonymous",img.onload=function(){var canvas=document.createElement("CANVAS"),ctx=canvas.getContext("2d"),dataURL;canvas.height=img.naturalHeight,canvas.width=img.naturalWidth,ctx.drawImage(this,0,0),dataURL=canvas.toDataURL(outputFormat),p.resolve(dataURL)},img.src=src,(img.complete||void 0===img.complete)&&(img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",img.src=src),p.promise()}),this.queryString=function(name,url=window.location.href){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(url);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))},this.getIdFromUrl=function(){var matches=window.location.pathname.match(/\/(\d*)$/);return null==matches||2>matches.length?null:parseInt(matches[1])},!helpers_1.helpers.isBrowser)return;const _self=this;(window.onpopstate=function(){var decode=function(s){return decodeURIComponent(s.replace(/\+/g," "))},query=window.location.search.substring(1),match;for(_self.urlParams={};match=/([^&=]+)=?([^&]*)/g.exec(query);)_self.urlParams[decode(match[1])]=decode(match[2])})(),"undefined"==typeof jQuery?log_1.log&&log_1.log.debug("helpers: jQuery is not defined, skipping jQuery libx setup..."):jQuery(document).ready(function(){this.jQueryExt.applyReveal()}),console&&(console.watch=this.watch)}enableLogDisplay(){let log=document.querySelector("#log");null==log&&alert("app.enableLogDisplay: Could not find #log!"),["log","warn","error"].forEach(function(verb){console[verb]=function(method,verb,log){return function(){method(helpers_1.helpers._.join(arguments,""));var msg=document.createElement("code");msg.style="display:block;",msg.classList.add(verb),msg.textContent=verb+": "+helpers_1.helpers._.join(arguments,""),log.appendChild(msg),log.scrollTo(0,log.scrollHeight)}}(console[verb].bind(console),verb,log)})}watch(oObj,sProp){var sPrivateProp="$_"+sProp+"_$";oObj[sPrivateProp]=oObj[sProp],Object.defineProperty(oObj,sProp,{get:function(){return oObj[sPrivateProp]},set:function(value){debugger;oObj[sPrivateProp]=value}})}}exports.BrowserHelpers=BrowserHelpers,exports.browserHelpers=new BrowserHelpers},{"../helpers":113,"../helpers/ObjectHelpers":111,"../modules/Network":118,"../modules/log":123}],100:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.browser=void 0;const browserHelpers_1=require("./browserHelpers"),require_1=__importDefault(require("./require")),detect_js_1=__importDefault(require("detect.js")),getBrowserInfo=(userAgent=null)=>detect_js_1.default.parse(userAgent||navigator.userAgent),browserInfo=getBrowserInfo();exports.browser={helpers:browserHelpers_1.browserHelpers,require:require_1.default,detect:detect_js_1.default,getBrowserInfo,browserInfo}},{"./browserHelpers":99,"./require":101,"detect.js":84}],101:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};module.exports=function(){if("undefined"==typeof window)return require;var mod={};return function(load){function fixSlash(url){var isDoubleSlash=url.startsWith("//"),ret=url.replace(/[\/]+/g,"/").replace(":/","://");return isDoubleSlash&&(ret=ret.replace(/^\//,"//")),ret}function resolve(identifier){if(0==identifier.indexOf("http://")||0==identifier.indexOf("https://")||0==identifier.indexOf("//")||-1!=identifier.indexOf("://"))return{id:identifier,uri:fixSlash(identifier)};if(0==identifier.indexOf("/")){var root=requirePath[0].substr(0,requirePath[0].indexOf("/",requirePath[0].indexOf("://")+3));return{id:identifier,uri:fixSlash(root+"/"+identifier)}}return{id:identifier,uri:fixSlash(identifier)};var m=identifier.match(/^(?:([^:\/]+):)?(\.\.?)?\/?((?:.*\/)?)([^\.]+)?(\..*)?$/),p=(pwd[0]?pwd[0].id:"").match(/^(?:([^:\/]+):)?(.*\/|)[^\/]*$/),root=m[2]?requirePath[p[1]?parseInt(p[1]):0]:requirePath[m[1]?parseInt(m[1]):0];var uri=parser.href+(m[5]?m[5]:".js");var id=(m[1]?m[1]+":":"0:")+parser.href.substr(root.length)}var RequireError=function(message){this.name="RequireError",this.message=message};RequireError.prototype=Object.create(Error.prototype),"string"==typeof new Error().fileName&&self.addEventListener("error",function(evt){if(evt.error instanceof Error)if(pwd[0])throw evt.preventDefault(),new evt.error.constructor(evt.error.message,pwd[0].uri,evt.error.lineNumber);else{var m=evt.error.stack.match(/^[^\n@]*@([^\n]+):\d+:\d+/);if(null===m)console.warn("libx.browser.require: unable to read file name from stack");else if(evt.error.fileName!=m[1])throw evt.preventDefault(),new evt.error.constructor(evt.error.message,m[1],evt.error.lineNumber)}},!1);var pwd=[],parser=URL?new URL(location.href):document.createElement("A");try{var cache={};Object.defineProperty(cache,"foo",{value:"bar",configurable:!0}),delete cache.foo}catch(e){console.warn("Falling back to DOM workaround for defineProperty: "+e),cache=document.createElement("DIV")}for(var lock={},requirePath=mod&&void 0!==mod.requirePath?mod.requirePath.slice(0):["./"],requireCompiler=mod&&void 0!==mod.requireCompiler?mod.requireCompiler:null,base=[location.origin,location.href.substr(0,location.href.lastIndexOf("/")+1)],i=0;i<requirePath.length;i++)parser.href=("."==requirePath[i][0]?base[1]:base[0])+requirePath[i],requirePath[i]=parser.href;for(var id in mod&&mod.requirePreloaded)cache["$"+resolve(id).id]=mod.requirePreloaded[id].toString();for(var id in mod&&mod.requireOverrides)cache["$"+resolve(id).id]=mod.requireOverrides[id];if(mod=function(identifier,callback,compiler){return __awaiter(this,void 0,void 0,function*(){return new Promise((resolvePromise,rejectPromise)=>{function onLoad(){try{if(4!=request.readyState)return;if(200!=request.status&&new RequireError("unable to load "+descriptor.id+" ("+request.status+" "+request.statusText+")"),200==request.status&&lock[cacheid]--,lock[cacheid])return console.warn("module locked: "+descriptor.id),void(callback&&setTimeout(onLoad,0));if(!cache[cacheid]){var source=compiler?compiler(request.responseText):request.responseText;load(descriptor,cache,pwd,source)}callback||onLoad(),callback&&callback(cache[cacheid]),resolvePromise(cache[cacheid])}catch(err){rejectPromise(err)}}if(identifier instanceof Array){for(var modules=[],modcount=identifier.length,index=0;index<identifier.length;index++)(function(id,i){modules.push(mod(id,callback&&function(mod){modules[i]=mod,0==--modcount&&callback(modules)},compiler))})(identifier[index],index);return modules}compiler=void 0===compiler?requireCompiler:compiler;var descriptor=resolve(identifier),cacheid="$"+descriptor.id;if(cache[cacheid])return"string"==typeof cache[cacheid]&&load(descriptor,cache,pwd,cache[cacheid]),callback&&setTimeout(function(){callback(cache[cacheid])},0),resolvePromise(cache[cacheid]);var request=new XMLHttpRequest;callback&&(request[null===request.onload?"onload":"onreadystatechange"]=onLoad),request.addEventListener("load",onLoad),request.open("GET",descriptor.uri,!0);try{}catch(ex){console.warn("libx.require: Error setting CORS headers. ",ex)}lock[cacheid]=lock[cacheid]++||1,request.send(),callback||onLoad()})})},void 0===mod)try{Object.defineProperty("require",{value:mod}),Object.defineProperty(mod,"resolve",{value:resolve}),Object.defineProperty(mod,"path",{get:function(){return requirePath.slice(0)}})}catch(e){mod.resolve=resolve,mod.path=requirePath.slice(0)}}(function(module){var global=self,exports={};Object.defineProperty(module,"exports",{get:function(){return exports},set:function(e){exports=e}}),arguments[2].unshift(module),Object.defineProperty(arguments[1],"$"+module.id,{get:function(){return exports}});var content=arguments[3],extra="var __moduleUri = \""+module.uri+"\";\n";module.uri.endsWith(".js")||(content="module.exports = "+content);var script="function(){\n"+extra+content+"\n}";let wrapper="("+script+")();\n//# sourceURL="+module.uri;if(eval(wrapper),"string"!=typeof module.id)for(id in module)arguments[1]["$"+mod.resolve(id).id]=module[id].toString();arguments[2].shift()}),mod}()},{}],102:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.libx=void 0;const essentials_1=require("./essentials"),browser_1=require("../browser"),ObjectExtensions_1=require("../extensions/ObjectExtensions"),DeepProxy_1=__importDefault(require("../modules/DeepProxy")),ProxyCache_1=require("../modules/ProxyCache");exports.libx=ObjectExtensions_1.objectExtensions.extend(essentials_1.libx,{browser:browser_1.browser,ProxyCache:ProxyCache_1.ProxyCache,DeepProxy:DeepProxy_1.default}),window.libx=exports.libx},{"../browser":100,"../extensions/ObjectExtensions":106,"../modules/DeepProxy":116,"../modules/ProxyCache":119,"./essentials":103}],103:[function(require,module,exports){(function(global){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.libx=void 0;const helpers_1=require("../helpers"),Callbacks_1=require("../modules/Callbacks"),log_1=require("../modules/log"),buffer_1=require("buffer"),extensions_1=require("../extensions/"),dependencyInjector_1=require("../modules/dependencyInjector"),ObjectHelpers_1=require("../helpers/ObjectHelpers"),ObjectExtensions_1=require("../extensions/ObjectExtensions"),BitwiseEnumHelper_1=require("../helpers/BitwiseEnumHelper"),ObjectId_1=require("../helpers/ObjectId"),Time_1=require("../modules/Time");global._libx_avoidExtensions||extensions_1.extensions.applyAllExtensions();const libxBase={$:{},Callbacks:Callbacks_1.Callbacks,Buffer:buffer_1.Buffer,extensions:extensions_1.extensions,log:log_1.log,di:dependencyInjector_1.di,enum:BitwiseEnumHelper_1.BitwiseEnumHelper,objectId:ObjectId_1.ObjectId,Time:Time_1.Time},exLibx=ObjectExtensions_1.objectExtensions.extend(libxBase,ObjectHelpers_1.objectHelpers),exLibx2=ObjectExtensions_1.objectExtensions.extend(exLibx,helpers_1.helpers);exports.libx=exLibx2}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../extensions/":108,"../extensions/ObjectExtensions":106,"../helpers":113,"../helpers/BitwiseEnumHelper":109,"../helpers/ObjectHelpers":111,"../helpers/ObjectId":112,"../modules/Callbacks":115,"../modules/Time":121,"../modules/dependencyInjector":122,"../modules/log":123,buffer:3}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArrayExtensions=void 0;class ArrayExtensions{}exports.ArrayExtensions=ArrayExtensions,ArrayExtensions.diff=function(a){return this.filter(function(i){return 0>a.indexOf(i)})},ArrayExtensions.myFilter=function(fn){var ret=[];for(var item of this)fn(item)&&ret.push(item);return ret},ArrayExtensions.contains=function(item){return-1!=this.indexOf(item)},ArrayExtensions.myFilterSingle=function(fn){var ret=null;for(var item of this)if(fn(item)){ret=item;break}return ret},ArrayExtensions.remove=function(item){var index=this.indexOf(item);return-1<index&&this.splice(index,1),this},ArrayExtensions.removeAt=function(index,replace=void 0){return-1<index&&(null===this||void 0===this?void 0:this.length)>index&&(replace?this.splice(index,1,replace):this.splice(index,1)),this},ArrayExtensions.move=function(from,to){return this.splice(to,0,this.splice(from,1)[0]),this},ArrayExtensions.last=function(){return null==this||0==this.length?null:this[this.length-1]}},{}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DateExtensions=void 0;class DateExtensions{}exports.DateExtensions=DateExtensions,DateExtensions.isValid=function(){return this.getTime()===this.getTime()},DateExtensions.dateFormat=function(){return function(date,mask,utc){if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(date)||/\d/.test(date)||(mask=date,date=void 0),date=date?new Date(date):new Date,isNaN(date))throw SyntaxError("invalid date");mask=(DateExtensions.masks[mask]||mask||DateExtensions.masks["default"])+"","UTC:"==mask.slice(0,4)&&(mask=mask.slice(4),utc=!0);var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:DateExtensions.pad(d),ddd:DateExtensions.i18n.dayNames[D],dddd:DateExtensions.i18n.dayNames[D+7],m:m+1,mm:DateExtensions.pad(m+1),mmm:DateExtensions.i18n.monthNames[m],mmmm:DateExtensions.i18n.monthNames[m+12],yy:(y+"").slice(2),yyyy:y,h:H%12||12,hh:DateExtensions.pad(H%12||12),H:H,HH:DateExtensions.pad(H),M:M,MM:DateExtensions.pad(M),s:s,ss:DateExtensions.pad(s),l:DateExtensions.pad(L,3),L:DateExtensions.pad(99<L?Math.round(L/10):L),t:12>H?"a":"p",tt:12>H?"am":"pm",T:"T",TTT:12>H?"A":"P",TT:12>H?"AM":"PM",Z:"Z",ZZ:utc?"UTC":((date+"").match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(0<o?"-":"+")+DateExtensions.pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][3<d%10?0:(10!=d%100-d%10)*d%10]};return mask.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}(),DateExtensions.pad=function(val,len){for(val+="",len=len||2;val.length<len;)val="0"+val;return val},DateExtensions.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},DateExtensions.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},DateExtensions.formatx=function(mask,utc=null){return null==mask?this:this.dateFormat(this,mask,utc)},DateExtensions.format=function(strFormat,utc=null){return isNaN(this.getTime())?null:this.dateFormat(this,strFormat,utc)},DateExtensions.fromJson=function(aJsonDate){if(aJsonDate==null||""==aJsonDate)return null;var stripped=aJsonDate.replace("/Date(","").replace(")/","");return new Date(parseInt(stripped,10))},DateExtensions.toJson=function(){return"/Date("+this.getTime()+")/"},DateExtensions.addHours=function(h){return this.addMilliseconds(1e3*(60*(60*h)))},DateExtensions.addMinutes=function(m){return this.addMilliseconds(1e3*(60*m))},DateExtensions.addMilliseconds=function(ms){let ret=new Date(this);return ret.setTime(ret.getTime()+ms),ret},DateExtensions.toUTC=function(){var date=new Date(this),tz=/GMT([\-\+]?\d{4})/.exec(date.toString())[1],hour=parseInt(tz)/100,min=parseInt(tz)%100;return date.setHours(date.getHours()-hour),date.setMinutes(date.getMinutes()-min),date},DateExtensions.toISOStringUTC=function(isUTC=!1){let date=this;return date.formatx("yyyy-mm-ddTHH:MM:ss.lZ",!isUTC)},DateExtensions.toTimezone=function(timezone){const date=this;return new Date(("string"==typeof date?new Date(date):date).toLocaleString("en-US",{timeZone:timezone}))}},{}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.objectExtensions=exports.ObjectExtensions=void 0;const ObjectHelpers_1=require("../helpers/ObjectHelpers");class ObjectExtensions{extend(input,withObj){for(let key of ObjectExtensions.__getCustomProperties.call(withObj))input[key]=withObj[key];for(let key of ObjectExtensions.__getCustomProperties.call(withObj.__proto__))input[key]=withObj.__proto__[key];return input}}exports.ObjectExtensions=ObjectExtensions,ObjectExtensions.__getCustomProperties=function(){return ObjectHelpers_1.objectHelpers.getCustomProperties(this)},ObjectExtensions.__extend=function(withObj){return exports.objectExtensions.extend(this,withObj)},exports.objectExtensions=new ObjectExtensions},{"../helpers/ObjectHelpers":111}],107:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringExtensions=void 0;const capitalize_1=__importDefault(require("lodash/capitalize")),ObjectHelpers_1=require("../helpers/ObjectHelpers");class StringExtensions{}exports.StringExtensions=StringExtensions,StringExtensions.capitalize=function(){return this.replace(/(\w+)/g,capitalize_1.default).trim()},StringExtensions.ellipsis=function(maxLength){let ret=this;return ret.length>maxLength&&(ret=ret.substr(0,maxLength),ret+="..."),ret},StringExtensions.kebabCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()},StringExtensions.camelize=function(){return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(letter,index){return 0==index?letter.toLowerCase():letter.toUpperCase()}).replace(/\s+|\-/g,"")},StringExtensions.padNumber=function(width,z="0"){var args=arguments,n=this+"";return n.length>=width?n:Array(width-n.length+1).join(z)+n},StringExtensions.contains=function(str){return 0<=this.indexOf(str)},StringExtensions.hashCode=function(){var hash=0;if(0==this.length)return hash.toString();for(var i=0,char;i<this.length;i++)char=this.charCodeAt(i),hash=(hash<<5)-hash+char,hash&=hash;return hash.toString()},StringExtensions.endsWith=function(suffix){return-1!==this.indexOf(suffix,this.length-suffix.length)},StringExtensions.removeLastPart=function(delimiter="/"){let parts=this.split(delimiter);return parts.pop(),parts.join(delimiter)},StringExtensions.startsWith=function(prefix){return 0==this.indexOf(prefix)},StringExtensions.isEmpty=function(input=null){var v=input||this;return!v||0==v.trim().length},StringExtensions.format=function(args){var args=[],ret=this,obj=arguments[0];if(null!==obj&&"object"==typeof obj)for(var arr=ObjectHelpers_1.objectHelpers.getCustomProperties(obj),i=0,x;i<arr.length;i++)x=arr[i],ret=ret.replace("{{"+x+"}}",obj[x]);else{for(var _i=0;_i<arguments.length-0;_i++)args[_i]=arguments[_i+0];0<args.length&&Array.isArray(args[0])&&(args=args[0]),ret=this.replace(/{{(\d+)}}/g,function(match,number){return"undefined"==typeof args[number]?match:args[number]})}return ret},StringExtensions.replaceAt=function(index,replacement){return this.substr(0,index)+replacement+this.substr(index+replacement.length)},StringExtensions.getAbbreviation=function(){return this.match(/\b([A-Z])/g).join("")}},{"../helpers/ObjectHelpers":111,"lodash/capitalize":249}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extensions=exports.Extensions=void 0;const ArrayExtensions_1=require("./ArrayExtensions"),DateExtensions_1=require("./DateExtensions"),ObjectExtensions_1=require("./ObjectExtensions"),StringExtensions_1=require("./StringExtensions");class Extensions{constructor(){this.object=ObjectExtensions_1.ObjectExtensions,this.string=StringExtensions_1.StringExtensions,this.date=DateExtensions_1.DateExtensions,this.array=ArrayExtensions_1.ArrayExtensions}applyObjectExtensions(){ObjectExtensions_1.ObjectExtensions.__extend.call(Object.prototype,ObjectExtensions_1.ObjectExtensions)}applyStringExtensions(){ObjectExtensions_1.ObjectExtensions.__extend.call(String.prototype,StringExtensions_1.StringExtensions)}applyDateExtensions(){ObjectExtensions_1.ObjectExtensions.__extend.call(Date.prototype,DateExtensions_1.DateExtensions)}applyArrayExtensions(){ObjectExtensions_1.ObjectExtensions.__extend.call(Array.prototype,ArrayExtensions_1.ArrayExtensions)}applyAllExtensions(){this.applyStringExtensions(),this.applyDateExtensions(),this.applyArrayExtensions()}}exports.Extensions=Extensions,exports.extensions=new Extensions},{"./ArrayExtensions":104,"./DateExtensions":105,"./ObjectExtensions":106,"./StringExtensions":107}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitwiseEnumHelper=void 0;exports.BitwiseEnumHelper=class{static combine(...values){let ret=null;for(let v of values)ret|=v;return ret}static has(e,value){return(e&value)===value}static doesNotHave(e,value){return(e&value)!==value}static getValues(e,val){const ret=[];for(let k of Object.keys(e))0!=(e[k]&val)&&ret.push(e[k]);return 0<ret.length?ret:null}static getValueNames(e,val){const ret=[];for(let k of Object.keys(e))0!=(e[k]&val)&&ret.push(k);return 0<ret.length?ret:null}}},{}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NotImplemented=exports.HttpErrorDuplicate=exports.HttpErrorNotFound=exports.HttpErrorBadRequest=exports.HttpError=exports.ErrorDuplicate=exports.ErrorNotFound=exports.Exception=void 0;class Exception extends Error{constructor(message,metadata,stack){let json="";try{json=JSON.stringify(metadata)}catch(_a){}let msg=message;""!=json&&(msg+="\nMetadata: "+json),super(msg),this.name="Exception",this.message=message,this.metadataObj=metadata,this.metadata=json,this.stack=stack}metadataPretty(){return JSON.stringify(this.metadataObj,null,2)}static fromError(err){return new Exception(err.message,err,err.stack)}static assert(condition,message,metadata,exceptionType=Exception){let conditions=condition;Array.isArray(condition)||(conditions=[condition]);for(let cond of conditions){if(null===cond||"boolean"==typeof cond&&!0!==cond)throw new exceptionType(message,metadata)}}toString(){return this.message+="\n\tMetadata: "+this.metadata}}exports.Exception=Exception;class ErrorNotFound extends Exception{constructor(message,metadata,stack){super("Requested item not found",metadata,stack)}}exports.ErrorNotFound=ErrorNotFound;class ErrorDuplicate extends Exception{constructor(message,metadata,stack){super(message||"Requested item conflicts with exists",{metadata},stack)}}exports.ErrorDuplicate=ErrorDuplicate;class HttpError extends Exception{constructor(statusCode,message,metadata,stack){super(message,metadata,stack),this.statusCode=statusCode}static tryGetErrorCode(error,defaultCode){return null==error?defaultCode:error instanceof HttpError?error.statusCode:error instanceof ErrorNotFound?new HttpErrorNotFound(error.message,error.metadata,error.stack).statusCode:error instanceof ErrorDuplicate?new HttpErrorDuplicate(error.message,error.metadata,error.stack).statusCode:defaultCode}}exports.HttpError=HttpError;exports.HttpErrorBadRequest=class extends HttpError{constructor(message,metadata,stack){super(400,message,metadata,stack)}};class HttpErrorNotFound extends HttpError{constructor(message,metadata,stack){super(404,message,metadata,stack)}}exports.HttpErrorNotFound=HttpErrorNotFound;class HttpErrorDuplicate extends HttpError{constructor(message,metadata,stack){super(409,message,metadata,stack)}}exports.HttpErrorDuplicate=HttpErrorDuplicate;exports.NotImplemented=class extends Exception{constructor(){super("Not Implemented!")}},exports.default=Exception},{}],111:[function(require,module,exports){(function(global){(function(){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.objectHelpers=exports.ObjectHelpers=void 0;const each_1=__importDefault(require("lodash/each")),has_1=__importDefault(require("lodash/has")),isObject_1=__importDefault(require("lodash/isObject")),isPlainObject_1=__importDefault(require("lodash/isPlainObject")),transform_1=__importDefault(require("lodash/transform")),isEqual_1=__importDefault(require("lodash/isEqual")),isString_1=__importDefault(require("lodash/isString")),StringExtensions_1=require("../extensions/StringExtensions");class Dummy{constructor(){}}Dummy.___func=()=>{};class ObjectHelpers{constructor(){this.globalProperties=[...Object.getOwnPropertyNames(Dummy),...Object.getOwnPropertyNames({}),...Object.getOwnPropertyNames(Dummy.prototype),...Object.getOwnPropertyNames(Dummy.__proto__)],this.ARGUMENT_NAMES=/([^\s,]+)/g,this.STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,this.class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"}}diff(object,base,skipEmpty=!1){const changes=(object,base,skipEmpty=!1)=>{let ret=transform_1.default(object,(result,value,key)=>{if(!isEqual_1.default(value,base[key])){if(skipEmpty&&this.isEmpty(value))return void(result=null);result[key]=isObject_1.default(value)&&isObject_1.default(base[key])?changes(value,base[key],skipEmpty):value,skipEmpty&&this.isEmpty(result[key])&&delete result[key]}});return skipEmpty&&this.isEmpty(ret)?null:ret};return changes(object,base,skipEmpty)}isObject(object){return null!=object&&object.isProxy?"object"==typeof object&&object.constructor==Object:isPlainObject_1.default(object)}isString(object){return isString_1.default(object)}isFunction(obj){var isFunc="function"===this.type(obj);if(!isFunc)return!1;var fnStr=obj.toString().replace(this.STRIP_COMMENTS,"");return!(null!=fnStr.match(/\s*class\s+/))}isArray(obj){return Array.isArray?Array.isArray(obj):"array"===this.type(obj)}isWindow(obj){return null!=obj&&(obj==obj.window||"undefined"!=typeof global&&obj==global)}isNumeric(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)}type(obj){return null==obj?obj+"":obj.isProxy?"object":this.class2type[toString.call(obj)]||"object"}isPlainObject(obj){var hasOwn=Object.prototype.hasOwnProperty;if(!obj||"object"!==this.type(obj)||obj.nodeType)return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(var key in obj);return key===void 0||hasOwn.call(obj,key)}isDefined(obj,prop){return"undefined"!=typeof obj&&(!(null!=prop)||has_1.default(obj,prop))}clone(source,target={}){return this.merge(!0,target,source)}merge(...args){var target=arguments[0],i=1,length=arguments.length,deep=!0,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,options,name,src,copy,copyIsArray,clone;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||exports.objectHelpers.isFunction(target)||(target={}),length===i&&(target=this,--i),i;i<length;i++)if(null!=(options=arguments[i])){const list=[...Object.getOwnPropertyNames(arguments[i]),...Object.getOwnPropertySymbols(arguments[i])];for(name of list)(src=target[name],copy=options[name],target!==copy)&&(deep&&copy&&(exports.objectHelpers.isPlainObject(copy)||(copyIsArray=exports.objectHelpers.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&exports.objectHelpers.isArray(src)?src:[]):clone=src&&exports.objectHelpers.isPlainObject(src)?src:{},target[name]=exports.objectHelpers.merge(deep,clone,copy)):void 0!==copy&&(target[name]=copy))}return target}shallowCopy(obj){return this.merge(!1,{},obj)}getDeep(obj,path,delimiter="/"){let parts=path.split(delimiter),ret=obj;do{if(0==parts.length)return ret;let curPart=parts.shift();if(""==curPart)continue;ret=ret[curPart]}while(null!=ret);return ret}isNull(obj){return obj==null||null==obj}isEmptyObject(obj){const props=this.getCustomProperties(obj);for(var name in props)return!1;return!0}isEmptyString(obj){return null==obj||""==obj}isEmpty(obj){if(null==obj)return!0;for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return JSON.stringify(obj)===JSON.stringify({})}isDate(obj){return"function"==typeof(null===obj||void 0===obj?void 0:obj.getMonth)}makeEmpty(obj){return each_1.default(Object.keys(obj),prop=>{if(obj.hasOwnProperty(prop))if(Array.isArray(obj[prop]))obj[prop]=[];else if("object"==typeof obj[prop]){if(null==obj[prop])return void(obj[prop]=null);this.makeEmpty(obj[prop])}else obj[prop]=""}),obj}getCustomProperties(obj){var currentPropList=[...Object.getOwnPropertyNames(obj),...Object.getOwnPropertySymbols(obj)];return currentPropList.filter(propName=>-1===this.globalProperties.indexOf(propName))}spawnHierarchy(path,root={},putValue=null,delimiter="."){let p=path.split(delimiter);null==root&&(root={});let cur=root,next=null,prev=null;for(let i=0;i<p.length;i++)next=p[i],null==cur&&(cur=prev[p[i-1]]={}),"undefined"==typeof cur[next]&&(cur[next]={}),prev=cur,cur=cur[next];return prev[next]=putValue,root}objectToKeyValue(obj){const props=this.getCustomProperties(obj);let ret={};for(let prop of props){const sub=obj[prop];if(this.isObject(sub)){const subKV=this.objectToKeyValue(sub);for(let subK in subKV)ret[prop+"/"+subK]=subKV[subK]}else ret[prop]=sub}return ret}keyValueToObject(keyValueMap,shouldParse=!1){let ret={};for(let path in keyValueMap){let value=keyValueMap[path];if(shouldParse&&this.isString(value))try{value=JSON.parse(value)}catch(_a){}exports.objectHelpers.spawnHierarchy(path,ret,value,"/")}return ret}flatterObjectToDotNotation(objectNotation,prefix){let set={};for(var key of Object.keys(objectNotation)){let pre=prefix===void 0?"":prefix+".",obj=objectNotation[key];obj&&"object"==typeof obj&&!1==Array.isArray(obj)&&null==obj._bsontype&&"function"!=typeof obj.getMonth?set=Object.assign(Object.assign({},set),this.flatterObjectToDotNotation(objectNotation[key],pre+key)):set[pre+key]=objectNotation[key]}return set}getObjectHash(obj){return null==obj?"":StringExtensions_1.StringExtensions.hashCode.call(JSON.stringify(obj))}}exports.ObjectHelpers=ObjectHelpers,exports.objectHelpers=new ObjectHelpers}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../extensions/StringExtensions":107,"lodash/each":250,"lodash/has":254,"lodash/isEqual":261,"lodash/isObject":264,"lodash/isPlainObject":266,"lodash/isString":267,"lodash/transform":287}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjectId=void 0;exports.ObjectId=class{static new(timestamp=new Date().getTime()){var timestampHex=(0|timestamp/1e3).toString(16);return timestampHex+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(0|16*Math.random()).toString(16)}).toLowerCase()}static toDate(id){return new Date(1e3*parseInt(id.substring(0,8),16))}}},{}],113:[function(require,module,exports){(function(global,Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){k2===void 0&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){k2===void 0&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o["default"]=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!=k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.helpers=exports.Helpers=exports.Deferred=void 0;const concurrency=__importStar(require("concurrency.libx.js")),concurrency_libx_js_1=require("concurrency.libx.js");Object.defineProperty(exports,"Deferred",{enumerable:!0,get:function(){return concurrency_libx_js_1.Deferred}});const mixin_1=__importDefault(require("lodash/mixin")),forEach_1=__importDefault(require("lodash/forEach")),transform_1=__importDefault(require("lodash/transform")),reduce_1=__importDefault(require("lodash/reduce")),map_1=__importDefault(require("lodash/map")),mapKeys_1=__importDefault(require("lodash/mapKeys")),mapValues_1=__importDefault(require("lodash/mapValues")),each_1=__importDefault(require("lodash/each")),toPairs_1=__importDefault(require("lodash/toPairs")),repeat_1=__importDefault(require("lodash/repeat")),join_1=__importDefault(require("lodash/join")),has_1=__importDefault(require("lodash/has")),index_1=require("../extensions/index"),log_1=require("../modules/log"),ObjectHelpers_1=require("./ObjectHelpers"),StringExtensions_1=require("../extensions/StringExtensions");class Helpers{constructor(){this._={forEach:forEach_1.default,mixin:mixin_1.default,transform:transform_1.default,reduce:reduce_1.default,map:map_1.default,mapKeys:mapKeys_1.default,mapValues:mapValues_1.default,each:each_1.default,toPairs:toPairs_1.default,repeat:repeat_1.default,join:join_1.default,has:has_1.default},this.ObjectHelpers=ObjectHelpers_1.objectHelpers,this.extensions=index_1.extensions,this.keys=obj=>null==obj?[]:Object.keys(obj),this.values=obj=>null==obj?[]:Object.values(obj),this.enumToArray=_enum=>Object.keys(_enum).map(key=>_enum[key]).filter(value=>"string"==typeof value),this.initConcurrency(),this.initCustomLodashMixins(),this.isBrowser="undefined"!=typeof window}bufferToArrayBuffer(buf){for(var ab=new ArrayBuffer(buf.length),view=new Uint8Array(ab),i=0;i<buf.length;++i)view[i]=buf[i];return ab}arrayBufferToBuffer(ab){for(var buf=Buffer.alloc(ab.byteLength),view=new Uint8Array(ab),i=0;i<buf.length;++i)buf[i]=view[i];return buf}newPromise(){var promise=new concurrency_libx_js_1.Deferred;return promise}parseJsonFileStripComments(content){const matchHashComment=new RegExp(/(?:^|\s)\/\/(.+?)$/,"gm"),json=content.replace(matchHashComment,"").trim(),ret=JSON.parse(json);return ret}parseConfig(contents,env){try{var obj=this.parseJsonFileStripComments(contents);obj.private=ObjectHelpers_1.objectHelpers.merge(obj.private,obj.envs[env].private),delete obj.envs[env].private,obj=ObjectHelpers_1.objectHelpers.merge(obj,obj.envs[env]),delete obj.envs;var obj2=JSON.stringify(obj);return obj2=StringExtensions_1.StringExtensions.format.call(obj2,ObjectHelpers_1.objectHelpers.merge(obj,obj.private)),obj=JSON.parse(obj2),obj}catch(ex){log_1.log.error("parseConfig error: ",ex)}}formatify(objectWithFormat,...args){var str=JSON.stringify(objectWithFormat);return str=StringExtensions_1.StringExtensions.format.call(str,ObjectHelpers_1.objectHelpers.merge(objectWithFormat,...args)),JSON.parse(str)}hexc(colorval){try{var parts=colorval.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);delete parts[0];for(var i=1;3>=i;++i)parts[i]=parseInt(parts[i]).toString(16),1==parts[i].length&&(parts[i]="0"+parts[i]);return"#"+parts.join("")}catch(e){}}parse(str){return JSON.parse(str)}jsonify(obj,isCompact=!1){return isCompact?isCompact?JSON.stringify(obj):JSON.stringify(obj,function(k,v){return v instanceof Array?JSON.stringify(v):v},4):JSON.stringify(obj,null,2)}newGuid(useDash=!1){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var dash=useDash?"-":"";return s4()+s4()+dash+s4()+dash+s4()+dash+s4()+dash+s4()+s4()+s4()}stringifyOnce(obj,replacer=null,indent=null){var printedObjects=[],printedObjectKeys=[];return JSON.stringify(obj,function(key,value){if(2e3<printedObjects.length)return"object too long";var printedObjIndex=!1;if(printedObjects.forEach(function(obj,index){obj===value&&(printedObjIndex=index)}),""==key)return printedObjects.push(obj),printedObjectKeys.push("root"),value;if("false"!=printedObjIndex+""&&"object"==typeof value)return"root"==printedObjectKeys[printedObjIndex]?"(pointer to root)":"(see "+(value&&value.constructor?value.constructor.name.toLowerCase():typeof value)+" with key "+printedObjectKeys[printedObjIndex]+")";return printedObjects.push(value),printedObjectKeys.push(key||"(empty key)"),replacer?replacer(key,value):value},indent)}getMatch(string,regex,index){index||(index=1);var matches=[],rxp=RegExp(regex,"g");for(let match;(match=rxp.exec(string))&&(matches.push(match[index]),0!=rxp.lastIndex););return matches}getMatches(string,regex,grab=null){var matches=[],rxp=RegExp(regex,"g");for(let match,res;(match=rxp.exec(string))&&(res=[],matches.push(match),0!=rxp.lastIndex););return null==grab?matches:"number"==typeof grab?this._.map(matches,item=>item[grab]):"string"==typeof grab?this._.map(matches,item=>item.groups[grab]):"boolean"==typeof grab?this._.map(matches,item=>item.groups):matches}base64ToUint8Array(base64String){for(var padding=this._.repeat("=",(4-base64String.length%4)%4),base64=(base64String+padding).replace(/\-/g,"+").replace(/_/g,"/"),rawData=Buffer.from(base64,"base64").toString("binary"),outputArray=new Uint8Array(rawData.length),i=0;i<rawData.length;++i)outputArray[i]=rawData.charCodeAt(i);return outputArray}getParamNames(func){var fnStr=func.toString().replace(ObjectHelpers_1.objectHelpers.STRIP_COMMENTS,"");if(null!=fnStr.match(/^\s*class\s+/))return null;var m=fnStr.match(/^\(?(?:async\s?)?(?:function\s?)?\(?([\w\d\,\s\$\_]+)\)?/);if(null==m||1>m.length)return null;var params=m[1].replace(/\s/g,""),result=params.split(",");return null===result&&(result=[]),result}randomNumber(max,min){return null==max&&(max=100),null==min&&(min=0),Math.floor(Math.random()*(max-min+1))+min}shuffle(a){var ret=ObjectHelpers_1.objectHelpers.clone(a,[]),j,x,i;for(i=ret.length;i;i--)j=Math.floor(Math.random()*i),x=ret[i-1],ret[i-1]=ret[j],ret[j]=x;return ret}fileStreamToBuffer(readStream){return __awaiter(this,void 0,void 0,function*(){let p=this.newPromise(),chunks=[];return readStream.readable||p.reject("fileStreamToBuffer: ex: stream no readable!"),readStream.on("error",err=>{p.reject(err)}),readStream.on("data",chunk=>{chunks.push(chunk)}),readStream.on("close",()=>{p.resolve(Buffer.concat(chunks))}),p})}getObjectByPath(path,obj=null){null==obj&&(obj=window||global),path=path.replace(/\[(\w+)\]/g,".$1"),path=path.replace(/^\./,"");for(var a=path.split("."),i=0,n=a.length,k;i<n;++i)if(k=a[i],k in obj)obj=obj[k];else return;return obj}querialize(obj,avoidPrefix){if(null==obj||1>obj.length)return null;var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return(avoidPrefix?"":"?")+str.join("&")}toUnicode(input){for(var unicodeString="",i=0,theUnicode;i<input.length;i++){for(theUnicode=input.charCodeAt(i).toString(16).toUpperCase();4>theUnicode.length;)theUnicode="0"+theUnicode;theUnicode="\\u"+theUnicode,unicodeString+=theUnicode}return unicodeString}parseUrl(url){var _a,_b,_c,_d;const match=null===(_a=this.getMatches(url,/((?<protocol>\w+):\/\/(?<domainName>[\w\d]+)\.(?<domainExt>[\w\d]+))?\/(?<path>[^\?]+)\/?([\?\&](?<queryParams>.*))?/g,!0))||void 0===_a?void 0:_a[0];if(null==match)return null;(null===(_b=match.path)||void 0===_b?void 0:_b.endsWith("/"))&&(match.path=match.path.slice(0,-1));const params=null===(_c=match.queryParams)||void 0===_c?void 0:_c.split("&").reduce((agg,x)=>{const parts=x.split("=");return agg[parts[0]]=parts[1]||!0,agg},{});return Object.assign(Object.assign({},match),{segments:null===(_d=match.path)||void 0===_d?void 0:_d.split("/"),params})}initConcurrency(){this.concurrency=concurrency,this.Deferred=concurrency.Deferred,this.throttle=concurrency.throttle,this.debounce=concurrency.debounce,this.delay=concurrency.delay,this.async=concurrency.async,this.isAsync=concurrency.isAsync,this.forceAsync=concurrency.async,this.waitUntil=concurrency.waitUntil,this.measurements=concurrency.measurements,this.measure=this.measurements.measure,this.startMeasure=this.measurements.startMeasure,this.peekMeasure=this.measurements.peekMeasure,this.getMeasureAndReset=this.measurements.getMeasureAndReset,this.chainTasks=concurrency.chain.chainTasks,this.sleep=concurrency.sleep}initCustomLodashMixins(){this._.mixin({sortKeysBy:function(obj,comparator){var keys=this._.sortBy(this._.keys(obj),function(key){return comparator?comparator(obj[key],key):key});return this._.zipObject(keys,this._.map(keys,function(key){return obj[key]}))}})}}exports.Helpers=Helpers,exports.helpers=new Helpers}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,require("buffer").Buffer)},{"../extensions/StringExtensions":107,"../extensions/index":108,"../modules/log":123,"./ObjectHelpers":111,buffer:3,"concurrency.libx.js":73,"lodash/each":250,"lodash/forEach":252,"lodash/has":254,"lodash/join":270,"lodash/map":272,"lodash/mapKeys":273,"lodash/mapValues":274,"lodash/mixin":276,"lodash/reduce":278,"lodash/repeat":279,"lodash/toPairs":285,"lodash/transform":287}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cache=void 0;const StringExtensions_1=require("../extensions/StringExtensions"),helpers_1=require("../helpers"),ObjectHelpers_1=require("../helpers/ObjectHelpers"),Callbacks_1=require("./Callbacks"),log_1=require("./log");class Cache{constructor(prefix,expiryPeriodMS=Cache._DefaultExpiryMS,delimiter,store=null){this.delimiter="/",this.onChange=new Callbacks_1.Callbacks,this.listenersMap={},delimiter&&(this.delimiter=delimiter),this.prefix=prefix,null!=expiryPeriodMS&&(this._expiryPeriodMS=expiryPeriodMS),""==(null===this||void 0===this?void 0:this.prefix)||this.prefix.endsWith||(this.prefix+=this.delimiter),this.store=store||localStorage,this.onChange.subscribe((path,data)=>this.changesListener(path,data))}get(path,ignoreCache=!1){if(ignoreCache||this.isExpired(path))return null;const keyPath=this.prefix+this.delimiter+path;let ret=this.store[keyPath];if(null!=ret)try{return JSON.parse(ret)}catch(ex){return log_1.log.w("Cache:get: Failed to parse content",ex),null}else if(null==ret)return this.getAll(keyPath)}set(path,data){this.store[this.prefix+this.delimiter+path]=helpers_1.helpers.jsonify(data,!0),0!=this._expiryPeriodMS&&null!=this._expiryPeriodMS&&this.setExpiry(path),this.onChange.trigger(path,data)}delete(path){delete this.store[this.prefix+this.delimiter+path],this.onChange.trigger(path,null)}push(path,data){null==this.store[this.prefix+this.delimiter+path]&&(this.store[this.prefix+this.delimiter+path]=[]),this.store[this.prefix+this.delimiter+path].push(data),this.onChange.trigger(path,this.store[this.prefix+this.delimiter+path])}listen(path="/",callback){this.listenersMap[path]=callback}unlisten(path){delete this.listenersMap[path]}isExpired(path){if(0==this._expiryPeriodMS)return!1;let expiryObj=this.store[`${this.prefix}/__expiry/${path}`];if(null==expiryObj)return!0;let expiry=new Date(expiryObj);return!(null!=expiry)||!(expiry>new Date)}setExpiry(path,expiryPeriodMS=null){let expiry=new Date().addMilliseconds(expiryPeriodMS||this._expiryPeriodMS);return this.store[`${this.prefix}/__expiry/${path}`]=expiry,expiry}clear(prefix){for(let key in this.store)key.startsWith(prefix||this.prefix)&&(delete this.store[key],this.onChange.trigger(key,null))}getAll(prefix){let ret=null;for(let key in prefix=prefix||this.prefix,this.store){const orgKey=key;if(!key.startsWith(prefix||this.prefix))continue;if(key=key.substr(prefix.length+1),StringExtensions_1.StringExtensions.contains.call(key,"__expiry"))continue;let value=this.store[orgKey];try{value=JSON.parse(value)}catch(_a){}ret=ObjectHelpers_1.objectHelpers.spawnHierarchy(key,ret,value,"/")}return ret}fixPath(path){return path.replace(/\/\//g,"/")}changesListener(path,data){const rootCallback=this.listenersMap["/"];null!=rootCallback&&rootCallback(path,data);const registeredCallback=this.listenersMap[path];null==registeredCallback||registeredCallback(path,data)}}exports.Cache=Cache,Cache._DefaultExpiryMS=300000},{"../extensions/StringExtensions":107,"../helpers":113,"../helpers/ObjectHelpers":111,"./Callbacks":115,"./log":123}],115:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleOptions=exports.Callbacks=void 0;const concurrency_libx_js_1=require("concurrency.libx.js"),each_1=__importDefault(require("lodash/each")),helpers_1=require("../helpers"),dependencyInjector_1=require("./dependencyInjector");class Callbacks{constructor(options){this.options=new ModuleOptions,this.options=Object.assign(Object.assign({},this.options),options),this.counter=0,this.list={},null!=this.options.cb&&this.subscribe(this.options.cb)}subscribe(cb){this.list[this.counter]=cb;var ret=this.counter;return this.counter++,ret}once(cb){let _this=this,handle=this.subscribe(function(){_this.clear(handle),cb.apply(null,arguments)})}until(cb){let handle=this.subscribe(cb);return()=>{this.clear(handle)}}trigger(...args){const p=helpers_1.helpers.newPromise(),allP=[];return each_1.default(this.list,cb=>{if(null!=cb){const promise=concurrency_libx_js_1.async(cb).apply(cb,args);allP.push(promise)}}),Promise.all(allP).then(()=>{p.resolve()}).catch(err=>{p.reject(err)}),p}unsubscribe(id){return this.clear(id)}clear(id){delete this.list[id]}clearAll(){delete this.list,this.list={}}getSubscribersCount(){return this.counter}}exports.Callbacks=Callbacks;class ModuleOptions{}exports.ModuleOptions=ModuleOptions,dependencyInjector_1.di.register("Callbacks",Callbacks)},{"../helpers":113,"./dependencyInjector":122,"concurrency.libx.js":73,"lodash/each":250}],116:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helpers_1=require("../helpers"),ObjectHelpers_1=require("../helpers/ObjectHelpers"),log_1=require("./log");class DeepProxy{constructor(target=null,handler,isDeep=!0){this.handler=handler,this.isDeep=isDeep,this.proxy=null,this.preproxy=new WeakMap,this.delimiter="/",this.input=target,this.proxy=this.proxify(target,"",!0),this.target=target}static create(target=null,handler,isDeep=!0){const newProxy=new DeepProxy(target,handler,isDeep);return newProxy.proxy}set(target,path,key,value){var _a,_b;return log_1.log.debug("DeepProxy:set",path,key,value),(null===(_a=this.handler)||void 0===_a?void 0:_a.set)&&this.handler.set(target,path,key,value),ObjectHelpers_1.objectHelpers.getDeep(this.input,path)[key]=value,this.isDeep&&(null===(_b=value)||void 0===_b||!_b.isProxy)&&(value=this.proxify(value,path+this.delimiter+key,!0)),target[key]=value,null==value&&Reflect.has(target,key)&&(log_1.log.debug("set: has existing value"),this.unproxy(target,path+this.delimiter+key)),!0}wrapHandler(path){return{get:(target,key)=>{var _a;if("isProxy"==key)return!0;if("toString"==key)return()=>helpers_1.helpers.stringifyOnce(target,null,2);let ret=null;return(null===(_a=this.handler)||void 0===_a?void 0:_a.get)&&(ret=this.handler.get(target,path,key)),null==ret&&(ret=target[key]||ObjectHelpers_1.objectHelpers.getDeep(this.input,path)[key]),ret},set:(target,key,value,receiver)=>{var _a;if(null===(_a=this.handler)||void 0===_a?void 0:_a.preSet){const preSetRet=this.handler.preSet(target,path,key,value);if(!1==preSetRet)return null}return this.set(target,path,key,value,receiver)},deleteProperty:(target,key)=>{var _a;if(Reflect.has(target,key)){this.unproxy(target,key),Reflect.deleteProperty(this.input,key);let deleted=Reflect.deleteProperty(target,key);return deleted&&(null===(_a=this.handler)||void 0===_a?void 0:_a.set)&&this.handler.set(target,path,key,null),deleted}return!1}}}unproxy(obj,key){if(this.preproxy.has(obj[key])&&(obj[key]=this.preproxy.get(obj[key]),this.preproxy.delete(obj[key])),this.isDeep&&null!=obj[key])for(let k of Object.keys(obj[key]))this.isDeep&&"object"==typeof obj[key][k]&&this.unproxy(obj[key],k)}proxify(obj,path,clone=!1){if(null==obj)return null;let copy=clone?ObjectHelpers_1.objectHelpers.clone(obj):obj;if(this.isDeep&&(ObjectHelpers_1.objectHelpers.isObject(obj)||ObjectHelpers_1.objectHelpers.isArray(obj)))for(let key of Object.keys(copy)){const prop=copy[key];"object"!=typeof prop||(null===prop||void 0===prop?void 0:prop.isProxy)||(copy[key]=this.proxify(prop,path+this.delimiter+key))}else return obj;let p=new Proxy(copy,this.wrapHandler(path));return this.preproxy.set(p,copy),p}}exports.default=DeepProxy},{"../helpers":113,"../helpers/ObjectHelpers":111,"./log":123}],117:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventsStream=exports.ChannelTypes=void 0;const dependencyInjector_1=require("./dependencyInjector"),ReplaySubject_1=require("rxjs/ReplaySubject"),BehaviorSubject_1=require("rxjs/BehaviorSubject"),Subject_1=require("rxjs/Subject"),from_1=require("rxjs/observable/from"),filter_1=require("rxjs/operators/filter"),take_1=require("rxjs/operators/take");var ChannelTypes;(function(ChannelTypes){ChannelTypes[ChannelTypes.History=0]="History",ChannelTypes[ChannelTypes.State=1]="State",ChannelTypes[ChannelTypes.Future=2]="Future"})(ChannelTypes=exports.ChannelTypes||(exports.ChannelTypes={}));class EventsStream{constructor(initialEvents){this.channels={history:new ReplaySubject_1.ReplaySubject,state:new BehaviorSubject_1.BehaviorSubject(null),future:new Subject_1.Subject},this._defaultPredicate=()=>!0,from_1.from(initialEvents||[]).pipe().subscribe(i=>this.emit(i.payload,i.type))}subscribe(action,predicate,channel){return null==predicate&&(predicate=this._defaultPredicate),(channel||this.channels.state).pipe(filter_1.filter(predicate)).subscribe(action)}subscribeOnce(action,predicate,channel){return null==predicate&&(predicate=this._defaultPredicate),(channel||this.channels.future).pipe(filter_1.filter(predicate),take_1.take(1)).subscribe(action)}emit(payload,type){var ev=this.newEvent(payload,type);this.channels.history.next(ev),this.channels.state.next(ev),this.channels.future.next(ev)}unsubscribe(handler){handler.unsubscribe()}getAll(transformer,predicate){const ret=[];return null==predicate&&(predicate=this._defaultPredicate),this.channels.history.pipe(filter_1.filter(predicate)).forEach(ev=>ret.push(transformer?transformer(ev):ev)),ret}newEvent(payload,type){return{payload,type}}}exports.EventsStream=EventsStream,dependencyInjector_1.di.register("EventsStream",EventsStream)},{"./dependencyInjector":122,"rxjs/BehaviorSubject":296,"rxjs/ReplaySubject":297,"rxjs/Subject":298,"rxjs/observable/from":498,"rxjs/operators/filter":499,"rxjs/operators/take":501}],118:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.network=exports.Network=void 0;const http_1=__importDefault(require("http")),https_1=__importDefault(require("https")),url_1=__importDefault(require("url")),axios_1=__importDefault(require("axios")),form_data_1=__importDefault(require("form-data")),helpers_1=require("../helpers"),dependencyInjector_1=require("./dependencyInjector"),buffer_1=require("buffer"),log_1=require("./log"),ObjectHelpers_1=require("../helpers/ObjectHelpers");class Network{constructor(){this.url=url_1.default,this.helper=new Helper,this.httpGetJson=(url,_options={})=>__awaiter(this,void 0,void 0,function*(){_options=ObjectHelpers_1.objectHelpers.merge({},_options,{headers:{"Content-Type":"application/json; charset=UTF-8"},enc:"utf-8"});let ret=yield this.httpGet(url,_options);return JSON.parse(ret)}),this.httpGetString=(url,_options={})=>__awaiter(this,void 0,void 0,function*(){_options=ObjectHelpers_1.objectHelpers.merge({},_options,{enc:"utf-8"});let ret=yield this.httpGet(url,_options);return ret.toString()}),this.httpGet=(url,_options={})=>__awaiter(this,void 0,void 0,function*(){let ret=yield this.httpRequest(url,null,"GET",_options);return ret}),this.httpPost=(url,data,_options={})=>__awaiter(this,void 0,void 0,function*(){return yield this.httpRequest(url,data,"POST",_options)}),this.httpPostJson=(url,data,_options={})=>__awaiter(this,void 0,void 0,function*(){let ret=yield this.httpRequest(url,data,"POST",_options);return null==ret?null:JSON.parse(ret.toString())}),this.httpRequest=(url,data,method,_options={})=>__awaiter(this,void 0,void 0,function*(){var defer=helpers_1.helpers.newPromise();url=this.helper.fixUrl(url);var dest=this.helper.parseUrl(url),options={headers:{Accept:"*/*"},enc:null,method:method||"GET",withCredentials:!1,dataType:"json",autoParse:!1,formData:null};ObjectHelpers_1.objectHelpers.clone(_options,options),ObjectHelpers_1.objectHelpers.clone(dest,options),null!=options.dataType&&null==options.headers["content-type"]&&("json"==options.dataType?options.headers["content-type"]="application/json; charset=UTF-8":"formData"==options.dataType&&(options.headers["content-type"]="multipart/form-data"));var operation=http_1.default;"https:"==dest.protocol&&(operation=https_1.default),"formData"==options.dataType&&(options.formData=data);var request=operation.request(options,res=>{options.enc&&res.setEncoding(options.enc);var data=[];res.on("data",function(chunk){data.push(buffer_1.Buffer.from(chunk))}),res.on("end",function(){let buffer=null;return buffer=1==data.length?data[0]:buffer_1.Buffer.concat(data),200==res.statusCode?defer.resolve(buffer):void defer.reject({statusCode:res.statusCode,response:buffer.toString()})})});if(null!=data){var dataObj=data;"json"==options.dataType&&(dataObj=JSON.stringify(data),request.write(dataObj))}return request.on("error",function(e){log_1.log.error(e.message),defer.reject(e)}),request.end(),defer}),this.request=(method,url,params=null,data=null,options={})=>__awaiter(this,void 0,void 0,function*(){let p=helpers_1.helpers.newPromise();return url=this.helper.fixUrl(url),options=ObjectHelpers_1.objectHelpers.merge(options,{method:method,mode:"no-cors"},{url:url}),options.data=data,null==options.responseType&&(options.responseType="arraybuffer"),axios_1.default(options).then(response=>{p.resolve(response.data)}).catch(err=>p.reject(err)),p}),this.get=(url,params=null,options={})=>__awaiter(this,void 0,void 0,function*(){if(null!=params){let includePrefix=!url.contains("?"),queryString=this.helper.toQueryString(params,!includePrefix);url+=includePrefix?queryString:"&"+queryString}return options=ObjectHelpers_1.objectHelpers.merge(options,{url:url}),yield this.request("GET",url,params,null,options)}),this.post=(url,data=null,options={})=>__awaiter(this,void 0,void 0,function*(){helpers_1.helpers.newPromise();return options=ObjectHelpers_1.objectHelpers.merge(options,{url:url}),yield this.request("POST",url,null,data,options)}),this.upload=(url,fileReadStream,options={})=>__awaiter(this,void 0,void 0,function*(){let p=helpers_1.helpers.newPromise(),formData=new form_data_1.default;if(formData.append("file",fileReadStream),null!=options.data){let props=ObjectHelpers_1.objectHelpers.getCustomProperties(options.data);for(let prop of props)formData.append(prop,options.data[prop])}return axios_1.default.create({headers:formData.getHeaders()}).post(url,formData).then(response=>{p.resolve(response.data)}).catch(err=>p.reject(err)),p})}}exports.Network=Network;class Helper{constructor(){this.toQueryString=(obj,excludePrefix=!1)=>helpers_1.helpers.querialize(obj,excludePrefix)}fixUrl(url,prefixUrl){var pos=url.indexOf("://");if(-1<pos){var startOfUrl=url.slice(0,pos),restOfUrl=url.slice(pos+3);restOfUrl=restOfUrl.replace(/\/+/g,"/"),url=startOfUrl+"://"+restOfUrl}else url=url.replace(/\/+/g,"/");prefixUrl=prefixUrl||"";return url=this.cleanUrl((-1<pos?"":prefixUrl)+url),url}parseUrl(url){return url_1.default.parse(url);var l=document.createElement("a")}cleanUrl(url){return null==url?null:url.replace(/([^:]\/)\/+/g,"$1")}}exports.network=new Network,dependencyInjector_1.di.register("network",exports.network)},{"../helpers":113,"../helpers/ObjectHelpers":111,"./dependencyInjector":122,"./log":123,axios:39,buffer:3,"form-data":98,http:30,https:6,url:35}],119:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleOptions=exports.ProxyCache=void 0;const ObjectHelpers_1=require("../helpers/ObjectHelpers"),Cache_1=require("./Cache"),log_1=require("./log"),DeepProxy_1=__importDefault(require("./DeepProxy"));exports.ProxyCache=class{constructor(name,target,options){this._cache=null,this._options=new ModuleOptions,this._options=Object.assign(Object.assign({},this._options),options),this._cache=new Cache_1.Cache(name,0,"/",this._options.store);const mergedObj=Object.assign(Object.assign({},target),this._cache.getAll());this.storeObjectAsKeyValueCache("",mergedObj),this._deepProxy=new DeepProxy_1.default(mergedObj,{get:(target,path,key)=>{var _a,_b;path=path+"/"+key.toString(),path.startsWith("/")&&(path=path.substr(1)),log_1.log.debug(`ProxyCache:get: ${path}`,key);let ret=null;null!=target[key]&&(ret=target[key]);const cached=this._cache.get(path);return null==(null===(_a=this._options.customHandler)||void 0===_a?void 0:_a.get)?null!==ret&&void 0!==ret&&ret.isProxy||ObjectHelpers_1.objectHelpers.isObject(ret)||cached==ret?ret:cached:null===(_b=this._options.customHandler)||void 0===_b?void 0:_b.get(target,path,key)},set:(target,path,key,value)=>{var _a,_b;path=path+"/"+key.toString(),path.startsWith("/")&&(path=path.substr(1)),log_1.log.debug(`ProxyCache:changes: ${path}`,key),null!=(null===(_a=this._options.customHandler)||void 0===_a?void 0:_a.set)&&(null===(_b=this._options.customHandler)||void 0===_b?void 0:_b.set(target,path,key,value)),null==value?(path.startsWith("/")&&(path=path.substr(1,path.length)),log_1.log.debug(`ProxyCache:delete: ${path}`,key),this._cache.delete(path)):this.storeObjectAsKeyValueCache(path,value)}},!0),this.proxy=this._deepProxy.proxy}set(path,value){return ObjectHelpers_1.objectHelpers.merge.call(this,this.proxy,value)}storeObjectAsKeyValueCache(path,value){if(path.startsWith("/")&&(path=path.substr(1)),ObjectHelpers_1.objectHelpers.isObject(value)){const kvObj=ObjectHelpers_1.objectHelpers.objectToKeyValue(value);for(let key in""==path||path.endsWith("/")||(path+="/"),kvObj){const val=kvObj[key];null!=val&&this._cache.set(path+key,val)}}else this._cache.set(path,value)}};class ModuleOptions{}exports.ModuleOptions=ModuleOptions},{"../helpers/ObjectHelpers":111,"./Cache":114,"./DeepProxy":116,"./log":123}],120:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleOptions=exports.Queue=void 0;const Callbacks_1=require("./Callbacks");class Queue{constructor(items=[],options){this.onEnqueue=new Callbacks_1.Callbacks,this.options=new ModuleOptions,this.options=Object.assign(Object.assign({},this.options),options),this.array=items,null!=this.options.onEnqueueCallback&&this.onEnqueue.subscribe(this.options.onEnqueueCallback)}enqueue(item){return this.array.push(item),setTimeout(()=>{var _a;null===(_a=this.onEnqueue)||void 0===_a?void 0:_a.trigger(item)},0),this}dequeue(){return null==this.array||0==this.array.length?null:this.array.shift()}count(){return this.array.length}get(index){return this.array[index]}get length(){return this.array.length}*[Symbol.iterator](){for(let key of Object.keys(this.array))yield this.array[key]}}exports.Queue=Queue;class ModuleOptions{}exports.ModuleOptions=ModuleOptions},{"./Callbacks":115}],121:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Time=void 0;const StringExtensions_1=require("../extensions/StringExtensions"),helpers_1=require("../helpers"),Exceptions_1=__importDefault(require("../helpers/Exceptions"));class Time{constructor(hoursMinSecStr,timezone,baseTimestamp){this.timezone=timezone,this.baseTimestamp=baseTimestamp,this.offsetHours=0,this.totalSeconds=0,this.isUTC=()=>0==this.offsetHours;const isNow=null==hoursMinSecStr;baseTimestamp=null==baseTimestamp?new Date:new Date(baseTimestamp.getTime()),isNow&&(hoursMinSecStr=`${baseTimestamp.getUTCHours()}:${baseTimestamp.getUTCMinutes()}:${baseTimestamp.getUTCSeconds()}`);const parts=Time.parse(hoursMinSecStr);null==timezone||isNow||(this.offsetHours=Time.getTimezoneOffset(timezone,baseTimestamp),parts.hours-=Math.floor(this.offsetHours),parts.minutes=Math.abs(parts.minutes-60*(this.offsetHours%1))),baseTimestamp.setUTCHours(parts.hours,parts.minutes,parts.seconds),this.totalSeconds=(parts.seconds||0)+60*parts.minutes+60*(60*parts.hours)}get hour(){return Time.totalSecondsToHoursMinutesSeconds(this.totalSeconds).hours}set hour(value){this.totalSeconds=this.totalSeconds-60*(60*Math.floor(this.totalSeconds/60/60))+60*(60*value)}get min(){return Time.totalSecondsToHoursMinutesSeconds(this.totalSeconds).minutes}set min(value){this.totalSeconds=this.totalSeconds-60*Math.floor(this.totalSeconds%3600/60)+60*value}get sec(){return Time.totalSecondsToHoursMinutesSeconds(this.totalSeconds).seconds}set sec(value){this.totalSeconds=this.totalSeconds-Math.floor(this.totalSeconds%60)+value}add(hours,mins=0,sec=0){this.totalSeconds+=60*(60*hours)+60*mins+sec}subtract(hours,mins=0,sec=0){this.totalSeconds-=60*(60*hours)+60*mins+sec}static parse(input){var _a,_b,_c,_d;const matches=helpers_1.helpers.getMatches(input,/(?<hour>\d+)\:(?<min>\d+)(\:(?<sec>\d+))?\s?(?<timezone>.*)?/,!0);if(null==matches||0==matches.length)throw new Exceptions_1.default("Time: Unable to parse time input",{input});return{hours:parseInt(null===(_a=matches[0])||void 0===_a?void 0:_a.hour)||0,minutes:parseInt(null===(_b=matches[0])||void 0===_b?void 0:_b.min)||0,seconds:parseInt(null===(_c=matches[0])||void 0===_c?void 0:_c.sec)||0,timezone:null===(_d=matches[0])||void 0===_d?void 0:_d.timezone}}static formDate(date){const hour=date.getUTCHours(),min=date.getUTCMinutes(),sec=date.getUTCSeconds(),ret=new Time(`${hour}:${min}:${sec}`,null,date);return ret}toDate(baseTimestamp){const ret=null==baseTimestamp?new Date:new Date(baseTimestamp||this.baseTimestamp);return ret.setUTCHours(this.hour,this.min,this.sec,0),ret}compare(to){const a=this.totalSeconds,b=to.totalSeconds;return a==b?0:a>b?1:a<b?-1:null}toString(timezone,baseTimestamp,includeSeconds=!1,asDuration=!1){let tzOffset=this.offsetHours;const tz=timezone||this.timezone;let tzStr="";if(null!=tz){tzOffset=Time.getTimezoneOffset(tz,this.toDate(baseTimestamp||this.baseTimestamp));const tzAbbr=Time.getTimeZoneName(tz,baseTimestamp||this.baseTimestamp,!0);tzStr=` ${tzAbbr}`}let isNegative=0>this.totalSeconds;const newTime=Time.totalSecondsToHoursMinutesSeconds(this.totalSeconds+60*(60*tzOffset));let sign=isNegative?"-":"",h=StringExtensions_1.StringExtensions.padNumber.call(Math.abs(asDuration?newTime.hours:newTime.hours%24),2),m=StringExtensions_1.StringExtensions.padNumber.call(Math.abs(newTime.minutes),2),s=!0==includeSeconds&&null!=this.sec?`:${StringExtensions_1.StringExtensions.padNumber.call(Math.abs(newTime.seconds),2)}`:"";return`${sign}${h}:${m}${s}${tzStr}`}static getTimezoneOffset(timezone,hereDate=new Date){hereDate=new Date(hereDate),hereDate.setMilliseconds(0);const hereOffsetHrs=-1*(hereDate.getTimezoneOffset()/60),thereLocaleStr=hereDate.toLocaleString("en-US",{timeZone:timezone}),thereDate=new Date(thereLocaleStr),diffHrs=(thereDate.getTime()-hereDate.getTime())/1e3/60/60;return hereOffsetHrs+diffHrs}static getLocalTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}static getTimeZoneName(timezone,date=new Date,inAbbreviation=!0){const format=Intl.DateTimeFormat("en",{timeZoneName:"long",timeZone:timezone});let ret=format.formatToParts(date||new Date).find(p=>"timeZoneName"===p.type).value;return ret.startsWith("GMT")&&(ret=format.formatToParts(null).find(p=>"timeZoneName"===p.type).value),inAbbreviation&&!ret.startsWith("GMT")&&(ret=StringExtensions_1.StringExtensions.getAbbreviation.call(ret)),ret}static totalSecondsToHoursMinutesSeconds(totalSeconds){return{hours:Math.floor(totalSeconds/3600),minutes:Math.floor(totalSeconds%3600/60),seconds:Math.floor(totalSeconds%60)}}}exports.Time=Time,Time.TimeZones=["Europe/Andorra","Asia/Dubai","Asia/Kabul","Europe/Tirane","Asia/Yerevan","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Mawson","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","America/Argentina/Buenos_Aires","America/Argentina/Cordoba","America/Argentina/Salta","America/Argentina/Jujuy","America/Argentina/Tucuman","America/Argentina/Catamarca","America/Argentina/La_Rioja","America/Argentina/San_Juan","America/Argentina/Mendoza","America/Argentina/San_Luis","America/Argentina/Rio_Gallegos","America/Argentina/Ushuaia","Pacific/Pago_Pago","Europe/Vienna","Australia/Lord_Howe","Antarctica/Macquarie","Australia/Hobart","Australia/Currie","Australia/Melbourne","Australia/Sydney","Australia/Broken_Hill","Australia/Brisbane","Australia/Lindeman","Australia/Adelaide","Australia/Darwin","Australia/Perth","Australia/Eucla","Asia/Baku","America/Barbados","Asia/Dhaka","Europe/Brussels","Europe/Sofia","Atlantic/Bermuda","Asia/Brunei","America/La_Paz","America/Noronha","America/Belem","America/Fortaleza","America/Recife","America/Araguaina","America/Maceio","America/Bahia","America/Sao_Paulo","America/Campo_Grande","America/Cuiaba","America/Santarem","America/Porto_Velho","America/Boa_Vista","America/Manaus","America/Eirunepe","America/Rio_Branco","America/Nassau","Asia/Thimphu","Europe/Minsk","America/Belize","America/St_Johns","America/Halifax","America/Glace_Bay","America/Moncton","America/Goose_Bay","America/Blanc-Sablon","America/Toronto","America/Nipigon","America/Thunder_Bay","America/Iqaluit","America/Pangnirtung","America/Atikokan","America/Winnipeg","America/Rainy_River","America/Resolute","America/Rankin_Inlet","America/Regina","America/Swift_Current","America/Edmonton","America/Cambridge_Bay","America/Yellowknife","America/Inuvik","America/Creston","America/Dawson_Creek","America/Fort_Nelson","America/Vancouver","America/Whitehorse","America/Dawson","Indian/Cocos","Europe/Zurich","Africa/Abidjan","Pacific/Rarotonga","America/Santiago","America/Punta_Arenas","Pacific/Easter","Asia/Shanghai","Asia/Urumqi","America/Bogota","America/Costa_Rica","America/Havana","Atlantic/Cape_Verde","America/Curacao","Indian/Christmas","Asia/Nicosia","Asia/Famagusta","Europe/Prague","Europe/Berlin","Europe/Copenhagen","America/Santo_Domingo","Africa/Algiers","America/Guayaquil","Pacific/Galapagos","Europe/Tallinn","Africa/Cairo","Africa/El_Aaiun","Europe/Madrid","Africa/Ceuta","Atlantic/Canary","Europe/Helsinki","Pacific/Fiji","Atlantic/Stanley","Pacific/Chuuk","Pacific/Pohnpei","Pacific/Kosrae","Atlantic/Faroe","Europe/Paris","Europe/London","Asia/Tbilisi","America/Cayenne","Africa/Accra","Europe/Gibraltar","America/Godthab","America/Danmarkshavn","America/Scoresbysund","America/Thule","Europe/Athens","Atlantic/South_Georgia","America/Guatemala","Pacific/Guam","Africa/Bissau","America/Guyana","Asia/Hong_Kong","America/Tegucigalpa","America/Port-au-Prince","Europe/Budapest","Asia/Jakarta","Asia/Pontianak","Asia/Makassar","Asia/Jayapura","Europe/Dublin","Asia/Jerusalem","Asia/Kolkata","Indian/Chagos","Asia/Baghdad","Asia/Tehran","Atlantic/Reykjavik","Europe/Rome","America/Jamaica","Asia/Amman","Asia/Tokyo","Africa/Nairobi","Asia/Bishkek","Pacific/Tarawa","Pacific/Enderbury","Pacific/Kiritimati","Asia/Pyongyang","Asia/Seoul","Asia/Almaty","Asia/Qyzylorda","Asia/Qostanay","Asia/Aqtobe","Asia/Aqtau","Asia/Atyrau","Asia/Oral","Asia/Beirut","Asia/Colombo","Africa/Monrovia","Europe/Vilnius","Europe/Luxembourg","Europe/Riga","Africa/Tripoli","Africa/Casablanca","Europe/Monaco","Europe/Chisinau","Pacific/Majuro","Pacific/Kwajalein","Asia/Yangon","Asia/Ulaanbaatar","Asia/Hovd","Asia/Choibalsan","Asia/Macau","America/Martinique","Europe/Malta","Indian/Mauritius","Indian/Maldives","America/Mexico_City","America/Cancun","America/Merida","America/Monterrey","America/Matamoros","America/Mazatlan","America/Chihuahua","America/Ojinaga","America/Hermosillo","America/Tijuana","America/Bahia_Banderas","Asia/Kuala_Lumpur","Asia/Kuching","Africa/Maputo","Africa/Windhoek","Pacific/Noumea","Pacific/Norfolk","Africa/Lagos","America/Managua","Europe/Amsterdam","Europe/Oslo","Asia/Kathmandu","Pacific/Nauru","Pacific/Niue","Pacific/Auckland","Pacific/Chatham","America/Panama","America/Lima","Pacific/Tahiti","Pacific/Marquesas","Pacific/Gambier","Pacific/Port_Moresby","Pacific/Bougainville","Asia/Manila","Asia/Karachi","Europe/Warsaw","America/Miquelon","Pacific/Pitcairn","America/Puerto_Rico","Asia/Gaza","Asia/Hebron","Europe/Lisbon","Atlantic/Madeira","Atlantic/Azores","Pacific/Palau","America/Asuncion","Asia/Qatar","Indian/Reunion","Europe/Bucharest","Europe/Belgrade","Europe/Kaliningrad","Europe/Moscow","Europe/Simferopol","Europe/Kirov","Europe/Astrakhan","Europe/Volgograd","Europe/Saratov","Europe/Ulyanovsk","Europe/Samara","Asia/Yekaterinburg","Asia/Omsk","Asia/Novosibirsk","Asia/Barnaul","Asia/Tomsk","Asia/Novokuznetsk","Asia/Krasnoyarsk","Asia/Irkutsk","Asia/Chita","Asia/Yakutsk","Asia/Khandyga","Asia/Vladivostok","Asia/Ust-Nera","Asia/Magadan","Asia/Sakhalin","Asia/Srednekolymsk","Asia/Kamchatka","Asia/Anadyr","Asia/Riyadh","Pacific/Guadalcanal","Indian/Mahe","Africa/Khartoum","Europe/Stockholm","Asia/Singapore","America/Paramaribo","Africa/Juba","Africa/Sao_Tome","America/El_Salvador","Asia/Damascus","America/Grand_Turk","Africa/Ndjamena","Indian/Kerguelen","Asia/Bangkok","Asia/Dushanbe","Pacific/Fakaofo","Asia/Dili","Asia/Ashgabat","Africa/Tunis","Pacific/Tongatapu","Europe/Istanbul","America/Port_of_Spain","Pacific/Funafuti","Asia/Taipei","Europe/Kiev","Europe/Uzhgorod","Europe/Zaporozhye","Pacific/Wake","America/New_York","America/Detroit","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Indiana/Indianapolis","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Vevay","America/Chicago","America/Indiana/Tell_City","America/Indiana/Knox","America/Menominee","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/North_Dakota/Beulah","America/Denver","America/Boise","America/Phoenix","America/Los_Angeles","America/Anchorage","America/Juneau","America/Sitka","America/Metlakatla","America/Yakutat","America/Nome","America/Adak","Pacific/Honolulu","America/Montevideo","Asia/Samarkand","Asia/Tashkent","America/Caracas","Asia/Ho_Chi_Minh","Pacific/Efate","Pacific/Wallis","Pacific/Apia","Africa/Johannesburg"]},{"../extensions/StringExtensions":107,"../helpers":113,"../helpers/Exceptions":110}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.di=void 0;const DependencyInjector_1=require("di.libx.js/build/DependencyInjector");exports.di=new DependencyInjector_1.DependencyInjector},{"di.libx.js/build/DependencyInjector":85}],123:[function(require,module,exports){(function(process){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=exports.LogLevel=exports.ConsoleColors=exports.Log=void 0;const extensions_1=require("../extensions/");extensions_1.extensions.applyDateExtensions();class Log{constructor(filterLevel=LogLevel.Verbose){this.colors=ConsoleColors,this.isDebug=!1,this.isShowStacktrace=!1,this.isShowPrefix=!0,this.severities=LogLevel,this.filterLevel=LogLevel.Verbose,this.isBrowser="undefined"!=typeof window&&null!=window.document&&"undefined"==typeof process,this.isShowTime=!this.isBrowser,this.filterLevel=filterLevel}debug(msg,...args){this.write(this.severities.Debug,msg,args)}d(msg,...args){this.write(this.severities.Debug,msg,args)}verbose(msg,...args){this.write(this.severities.Verbose,msg,args)}v(msg,...args){this.write(this.severities.Verbose,msg,args)}info(msg,...args){this.write(this.severities.Info,msg,args)}i(msg,...args){this.write(this.severities.Info,msg,args)}warning(msg,...args){this.write(this.severities.Warning,msg,args)}w(msg,...args){this.write(this.severities.Warning,msg,args)}error(msg,...args){this.write(this.severities.Error,msg,args)}e(msg,...args){this.write(this.severities.Error,msg,args)}fatal(msg,...args){this.write(this.severities.Fatal,msg,args)}write(severity,msg,args=[]){var time=this.isShowTime?"["+new Date().format("HH:MM:ss.l")+"]":"",prefix="",style="",func="log";if((severity!=this.severities.Debug||this.isDebug)&&!(severity!=this.severities.Debug&&severity>this.filterLevel)){severity===this.severities.Debug?(func="log",prefix=" [DBG]",style+="font-size:10px;"):severity===this.severities.Verbose?(func="log",prefix=" [v]"):severity===this.severities.Info?(func="info",prefix=" [>>]"):severity===this.severities.Warning?(func="warn",prefix=" [*]"):severity===this.severities.Error?(func="error",prefix=" [!]"):severity===this.severities.Fatal?(func="error",prefix=" [!!!]",style+="color:red;"):void 0,prefix+="\t",this.isShowPrefix||(prefix="");var trace="";this.isShowStacktrace&&(trace=this.getStackTrace());const argsStr=JSON.stringify(args||"");if(this.isBrowser){var _msg=`${prefix}${time} ${msg} %c${trace}`;0==args.length?console[func].call(console,_msg,"font-size:8px;"):console[func].call(console,_msg,"font-size:8px;",argsStr)}else{var _msg=`${prefix}${time} ${msg} ${trace}`;console[func].call(console,_msg,0==args.length?"":this.color(argsStr,this.colors.fgYellow))}return msg}}color(str,color){var c=null;if(c=color.startsWith("\x1B[")?color:ConsoleColors["fg"+color.capitalize()],null==c&&null==ConsoleColors[color])throw"given color ({0}) is not supported. options: black, red, green, yellow, blue, magenta, cyan, white".format(color);return c+str+ConsoleColors.reset}getStackTrace(){try{var err=new Error,ret=err.stack,lines=ret.split("\n"),i=4;return lines.length<i&&(i=lines.length-1),lines[i].replace(/^\s+/g,"\n\t")}catch(ex){}}}exports.Log=Log;var ConsoleColors;(function(ConsoleColors){ConsoleColors.reset="\x1B[0m",ConsoleColors.bright="\x1B[1m",ConsoleColors.dim="\x1B[2m",ConsoleColors.underscore="\x1B[4m",ConsoleColors.blink="\x1B[5m",ConsoleColors.reverse="\x1B[7m",ConsoleColors.hidden="\x1B[8m",ConsoleColors.fgBlack="\x1B[30m",ConsoleColors.fgRed="\x1B[31m",ConsoleColors.fgGreen="\x1B[32m",ConsoleColors.fgYellow="\x1B[33m",ConsoleColors.fgBlue="\x1B[34m",ConsoleColors.fgMagenta="\x1B[35m",ConsoleColors.fgCyan="\x1B[36m",ConsoleColors.fgWhite="\x1B[37m",ConsoleColors.bgBlack="\x1B[40m",ConsoleColors.bgRed="\x1B[41m",ConsoleColors.bgGreen="\x1B[42m",ConsoleColors.bgYellow="\x1B[43m",ConsoleColors.bgBlue="\x1B[44m",ConsoleColors.bgMagenta="\x1B[45m",ConsoleColors.bgCyan="\x1B[46m",ConsoleColors.bgWhite="\x1B[47m"})(ConsoleColors=exports.ConsoleColors||(exports.ConsoleColors={}));var LogLevel;(function(LogLevel){LogLevel[LogLevel.None=0]="None",LogLevel[LogLevel.Fatal=1]="Fatal",LogLevel[LogLevel.Error=2]="Error",LogLevel[LogLevel.Warning=4]="Warning",LogLevel[LogLevel.Info=8]="Info",LogLevel[LogLevel.Verbose=16]="Verbose",LogLevel[LogLevel.Debug=32]="Debug",LogLevel[LogLevel.All=255]="All"})(LogLevel=exports.LogLevel||(exports.LogLevel={})),exports.log=new Log}).call(this)}).call(this,require("_process"))},{"../extensions/":108,_process:9}],124:[function(require,module){var getNative=require("./_getNative"),root=require("./_root"),DataView=getNative(root,"DataView");module.exports=DataView},{"./_getNative":195,"./_root":233}],125:[function(require,module){function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}var hashClear=require("./_hashClear"),hashDelete=require("./_hashDelete"),hashGet=require("./_hashGet"),hashHas=require("./_hashHas"),hashSet=require("./_hashSet");Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},{"./_hashClear":203,"./_hashDelete":204,"./_hashGet":205,"./_hashHas":206,"./_hashSet":207}],126:[function(require,module){function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}var listCacheClear=require("./_listCacheClear"),listCacheDelete=require("./_listCacheDelete"),listCacheGet=require("./_listCacheGet"),listCacheHas=require("./_listCacheHas"),listCacheSet=require("./_listCacheSet");ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},{"./_listCacheClear":215,"./_listCacheDelete":216,"./_listCacheGet":217,"./_listCacheHas":218,"./_listCacheSet":219}],127:[function(require,module){var getNative=require("./_getNative"),root=require("./_root"),Map=getNative(root,"Map");module.exports=Map},{"./_getNative":195,"./_root":233}],128:[function(require,module){function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}var mapCacheClear=require("./_mapCacheClear"),mapCacheDelete=require("./_mapCacheDelete"),mapCacheGet=require("./_mapCacheGet"),mapCacheHas=require("./_mapCacheHas"),mapCacheSet=require("./_mapCacheSet");MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},{"./_mapCacheClear":220,"./_mapCacheDelete":221,"./_mapCacheGet":222,"./_mapCacheHas":223,"./_mapCacheSet":224}],129:[function(require,module){var getNative=require("./_getNative"),root=require("./_root"),Promise=getNative(root,"Promise");module.exports=Promise},{"./_getNative":195,"./_root":233}],130:[function(require,module){var getNative=require("./_getNative"),root=require("./_root"),Set=getNative(root,"Set");module.exports=Set},{"./_getNative":195,"./_root":233}],131:[function(require,module){function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}var MapCache=require("./_MapCache"),setCacheAdd=require("./_setCacheAdd"),setCacheHas=require("./_setCacheHas");SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},{"./_MapCache":128,"./_setCacheAdd":234,"./_setCacheHas":235}],132:[function(require,module){function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}var ListCache=require("./_ListCache"),stackClear=require("./_stackClear"),stackDelete=require("./_stackDelete"),stackGet=require("./_stackGet"),stackHas=require("./_stackHas"),stackSet=require("./_stackSet");Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},{"./_ListCache":126,"./_stackClear":238,"./_stackDelete":239,"./_stackGet":240,"./_stackHas":241,"./_stackSet":242}],133:[function(require,module){var root=require("./_root"),Symbol=root.Symbol;module.exports=Symbol},{"./_root":233}],134:[function(require,module){var root=require("./_root"),Uint8Array=root.Uint8Array;module.exports=Uint8Array},{"./_root":233}],135:[function(require,module){var getNative=require("./_getNative"),root=require("./_root"),WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},{"./_getNative":195,"./_root":233}],136:[function(require,module){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!(!1===iteratee(array[index],index,array)););return array}},{}],137:[function(require,module){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},{}],138:[function(require,module){var baseTimes=require("./_baseTimes"),isArguments=require("./isArguments"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isIndex=require("./_isIndex"),isTypedArray=require("./isTypedArray"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=function(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)(inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length)))&&result.push(key);return result}},{"./_baseTimes":172,"./_isIndex":208,"./isArguments":257,"./isArray":258,"./isBuffer":260,"./isTypedArray":269}],139:[function(require,module){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},{}],140:[function(require,module){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},{}],141:[function(require,module){module.exports=function(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}},{}],142:[function(require,module){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},{}],143:[function(require,module){module.exports=function(string){return string.split("")}},{}],144:[function(require,module){var eq=require("./eq");module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},{"./eq":251}],145:[function(require,module){var defineProperty=require("./_defineProperty");module.exports=function(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}},{"./_defineProperty":187}],146:[function(require,module){var isObject=require("./isObject"),objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();module.exports=baseCreate},{"./isObject":264}],147:[function(require,module){var baseForOwn=require("./_baseForOwn"),createBaseEach=require("./_createBaseEach"),baseEach=createBaseEach(baseForOwn);module.exports=baseEach},{"./_baseForOwn":149,"./_createBaseEach":183}],148:[function(require,module){var createBaseFor=require("./_createBaseFor"),baseFor=createBaseFor();module.exports=baseFor},{"./_createBaseFor":184}],149:[function(require,module){var baseFor=require("./_baseFor"),keys=require("./keys");module.exports=function(object,iteratee){return object&&baseFor(object,iteratee,keys)}},{"./_baseFor":148,"./keys":271}],150:[function(require,module){var arrayFilter=require("./_arrayFilter"),isFunction=require("./isFunction");module.exports=function(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}},{"./_arrayFilter":137,"./isFunction":262}],151:[function(require,module){var castPath=require("./_castPath"),toKey=require("./_toKey");module.exports=function(object,path){path=castPath(path,object);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},{"./_castPath":179,"./_toKey":245}],152:[function(require,module){var arrayPush=require("./_arrayPush"),isArray=require("./isArray");module.exports=function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},{"./_arrayPush":140,"./isArray":258}],153:[function(require,module){function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString"),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=baseGetTag},{"./_Symbol":133,"./_getRawTag":197,"./_objectToString":231}],154:[function(require,module){var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=function(object,key){return null!=object&&hasOwnProperty.call(object,key)}},{}],155:[function(require,module){function baseHasIn(object,key){return null!=object&&key in Object(object)}module.exports=baseHasIn},{}],156:[function(require,module){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");module.exports=function(value){return isObjectLike(value)&&baseGetTag(value)=="[object Arguments]"}},{"./_baseGetTag":153,"./isObjectLike":265}],157:[function(require,module){function baseIsEqual(value,other,bitmask,customizer,stack){return!(value!==other)||(null!=value&&null!=other&&(isObjectLike(value)||isObjectLike(other))?baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack):value!==value&&other!==other)}var baseIsEqualDeep=require("./_baseIsEqualDeep"),isObjectLike=require("./isObjectLike");module.exports=baseIsEqual},{"./_baseIsEqualDeep":158,"./isObjectLike":265}],158:[function(require,module){var Stack=require("./_Stack"),equalArrays=require("./_equalArrays"),equalByTag=require("./_equalByTag"),equalObjects=require("./_equalObjects"),getTag=require("./_getTag"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isTypedArray=require("./isTypedArray"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other);objTag="[object Arguments]"==objTag?"[object Object]":objTag,othTag="[object Arguments]"==othTag?"[object Object]":othTag;var objIsObj="[object Object]"==objTag,othIsObj="[object Object]"==othTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},{"./_Stack":132,"./_equalArrays":188,"./_equalByTag":189,"./_equalObjects":190,"./_getTag":199,"./isArray":258,"./isBuffer":260,"./isTypedArray":269}],159:[function(require,module){function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(!(noCustomizer&&data[2])){var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(void 0===result?!baseIsEqual(srcValue,objValue,3,customizer,stack):!result)return!1}else if(void 0===objValue&&!(key in object))return!1}return!0}var Stack=require("./_Stack"),baseIsEqual=require("./_baseIsEqual");module.exports=baseIsMatch},{"./_Stack":132,"./_baseIsEqual":157}],160:[function(require,module){var isFunction=require("./isFunction"),isMasked=require("./_isMasked"),isObject=require("./isObject"),toSource=require("./_toSource"),funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)?reIsNative:/^\[object .+?Constructor\]$/;return pattern.test(toSource(value))}},{"./_isMasked":212,"./_toSource":246,"./isFunction":262,"./isObject":264}],161:[function(require,module){var baseGetTag=require("./_baseGetTag"),isLength=require("./isLength"),isObjectLike=require("./isObjectLike"),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},{"./_baseGetTag":153,"./isLength":263,"./isObjectLike":265}],162:[function(require,module){var baseMatches=require("./_baseMatches"),baseMatchesProperty=require("./_baseMatchesProperty"),identity=require("./identity"),isArray=require("./isArray"),property=require("./property");module.exports=function(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}},{"./_baseMatches":165,"./_baseMatchesProperty":166,"./identity":256,"./isArray":258,"./property":277}],163:[function(require,module){var isPrototype=require("./_isPrototype"),nativeKeys=require("./_nativeKeys"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},{"./_isPrototype":213,"./_nativeKeys":229}],164:[function(require,module){var baseEach=require("./_baseEach"),isArrayLike=require("./isArrayLike");module.exports=function(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}},{"./_baseEach":147,"./isArrayLike":259}],165:[function(require,module){var baseIsMatch=require("./_baseIsMatch"),getMatchData=require("./_getMatchData"),matchesStrictComparable=require("./_matchesStrictComparable");module.exports=function(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}},{"./_baseIsMatch":159,"./_getMatchData":194,"./_matchesStrictComparable":226}],166:[function(require,module){var baseIsEqual=require("./_baseIsEqual"),get=require("./get"),hasIn=require("./hasIn"),isKey=require("./_isKey"),isStrictComparable=require("./_isStrictComparable"),matchesStrictComparable=require("./_matchesStrictComparable"),toKey=require("./_toKey");module.exports=function(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===void 0&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}},{"./_baseIsEqual":157,"./_isKey":210,"./_isStrictComparable":214,"./_matchesStrictComparable":226,"./_toKey":245,"./get":253,"./hasIn":255}],167:[function(require,module){module.exports=function(key){return function(object){return null==object?void 0:object[key]}}},{}],168:[function(require,module){var baseGet=require("./_baseGet");module.exports=function(path){return function(object){return baseGet(object,path)}}},{"./_baseGet":151}],169:[function(require,module){module.exports=function(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}},{}],170:[function(require,module){var nativeFloor=Math.floor;module.exports=function(string,n){var result="";if(!string||1>n||n>9007199254740991)return result;do n%2&&(result+=string),n=nativeFloor(n/2),n&&(string+=string);while(n);return result}},{}],171:[function(require,module){module.exports=function(array,start,end){var index=-1,length=array.length;0>start&&(start=-start>length?0:length+start),end=end>length?length:end,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},{}],172:[function(require,module){module.exports=function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},{}],173:[function(require,module){var arrayMap=require("./_arrayMap");module.exports=function(object,props){return arrayMap(props,function(key){return[key,object[key]]})}},{"./_arrayMap":139}],174:[function(require,module){function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}var Symbol=require("./_Symbol"),arrayMap=require("./_arrayMap"),isArray=require("./isArray"),isSymbol=require("./isSymbol"),INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=baseToString},{"./_Symbol":133,"./_arrayMap":139,"./isArray":258,"./isSymbol":268}],175:[function(require,module){var trimmedEndIndex=require("./_trimmedEndIndex");module.exports=function(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(/^\s+/,""):string}},{"./_trimmedEndIndex":247}],176:[function(require,module){module.exports=function(func){return function(value){return func(value)}}},{}],177:[function(require,module){module.exports=function(cache,key){return cache.has(key)}},{}],178:[function(require,module){var identity=require("./identity");module.exports=function(value){return"function"==typeof value?value:identity}},{"./identity":256}],179:[function(require,module){var isArray=require("./isArray"),isKey=require("./_isKey"),stringToPath=require("./_stringToPath"),toString=require("./toString");module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},{"./_isKey":210,"./_stringToPath":244,"./isArray":258,"./toString":286}],180:[function(require,module){var baseSlice=require("./_baseSlice");module.exports=function(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}},{"./_baseSlice":171}],181:[function(require,module){module.exports=function(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}},{}],182:[function(require,module){var root=require("./_root"),coreJsData=root["__core-js_shared__"];module.exports=coreJsData},{"./_root":233}],183:[function(require,module){var isArrayLike=require("./isArrayLike");module.exports=function(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!(!1===iteratee(iterable[index],index,iterable)););return collection}}},{"./isArrayLike":259}],184:[function(require,module){module.exports=function(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},{}],185:[function(require,module){var castSlice=require("./_castSlice"),hasUnicode=require("./_hasUnicode"),stringToArray=require("./_stringToArray"),toString=require("./toString");module.exports=function(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):void 0,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}},{"./_castSlice":180,"./_hasUnicode":202,"./_stringToArray":243,"./toString":286}],186:[function(require,module){var baseToPairs=require("./_baseToPairs"),getTag=require("./_getTag"),mapToArray=require("./_mapToArray"),setToPairs=require("./_setToPairs");module.exports=function(keysFunc){return function(object){var tag=getTag(object);return"[object Map]"==tag?mapToArray(object):"[object Set]"==tag?setToPairs(object):baseToPairs(object,keysFunc(object))}}},{"./_baseToPairs":173,"./_getTag":199,"./_mapToArray":225,"./_setToPairs":237}],187:[function(require,module){var getNative=require("./_getNative"),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},{"./_getNative":195}],188:[function(require,module){var SetCache=require("./_SetCache"),arraySome=require("./_arraySome"),cacheHas=require("./_cacheHas");module.exports=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=!1;break}}return stack["delete"](array),stack["delete"](other),result}},{"./_SetCache":131,"./_arraySome":142,"./_cacheHas":177}],189:[function(require,module){var Symbol=require("./_Symbol"),Uint8Array=require("./_Uint8Array"),eq=require("./eq"),equalArrays=require("./_equalArrays"),mapToArray=require("./_mapToArray"),setToArray=require("./_setToArray"),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!!(object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack["delete"](object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other);}return!1}},{"./_Symbol":133,"./_Uint8Array":134,"./_equalArrays":188,"./_mapToArray":225,"./_setToArray":236,"./eq":251}],190:[function(require,module){function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength,key;index--;)if(key=objProps[index],isPartial?!(key in other):!hasOwnProperty.call(other,key))return!1;var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(void 0===compared?!(objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack)):!compared){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack["delete"](object),stack["delete"](other),result}var getAllKeys=require("./_getAllKeys"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=equalObjects},{"./_getAllKeys":192}],191:[function(require,module){(function(global){(function(){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],192:[function(require,module){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbols=require("./_getSymbols"),keys=require("./keys");module.exports=function(object){return baseGetAllKeys(object,keys,getSymbols)}},{"./_baseGetAllKeys":152,"./_getSymbols":198,"./keys":271}],193:[function(require,module){var isKeyable=require("./_isKeyable");module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},{"./_isKeyable":211}],194:[function(require,module){var isStrictComparable=require("./_isStrictComparable"),keys=require("./keys");module.exports=function(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}},{"./_isStrictComparable":214,"./keys":271}],195:[function(require,module){var baseIsNative=require("./_baseIsNative"),getValue=require("./_getValue");module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},{"./_baseIsNative":160,"./_getValue":200}],196:[function(require,module){var overArg=require("./_overArg"),getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype},{"./_overArg":232}],197:[function(require,module){var Symbol=require("./_Symbol"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},{"./_Symbol":133}],198:[function(require,module){var arrayFilter=require("./_arrayFilter"),stubArray=require("./stubArray"),objectProto=Object.prototype,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray;module.exports=getSymbols},{"./_arrayFilter":137,"./stubArray":280}],199:[function(require,module){var DataView=require("./_DataView"),Map=require("./_Map"),Promise=require("./_Promise"),Set=require("./_Set"),WeakMap=require("./_WeakMap"),baseGetTag=require("./_baseGetTag"),toSource=require("./_toSource"),mapTag="[object Map]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result=="[object Object]"?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}return result}),module.exports=getTag},{"./_DataView":124,"./_Map":127,"./_Promise":129,"./_Set":130,"./_WeakMap":135,"./_baseGetTag":153,"./_toSource":246}],200:[function(require,module){module.exports=function(object,key){return null==object?void 0:object[key]}},{}],201:[function(require,module){var castPath=require("./_castPath"),isArguments=require("./isArguments"),isArray=require("./isArray"),isIndex=require("./_isIndex"),isLength=require("./isLength"),toKey=require("./_toKey");module.exports=function(object,path,hasFunc){path=castPath(path,object);for(var index=-1,length=path.length,result=!1,key;++index<length&&(key=toKey(path[index]),!!(result=null!=object&&hasFunc(object,key)));)object=object[key];return result||++index!=length?result:(length=null==object?0:object.length,!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object)))}},{"./_castPath":179,"./_isIndex":208,"./_toKey":245,"./isArguments":257,"./isArray":258,"./isLength":263}],202:[function(require,module){var reHasUnicode=RegExp("["+"\\u200d"+"\\ud800-\\udfff"+"\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff"+"\\ufe0e\\ufe0f"+"]");module.exports=function(string){return reHasUnicode.test(string)}},{}],203:[function(require,module){var nativeCreate=require("./_nativeCreate");module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},{"./_nativeCreate":228}],204:[function(require,module){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},{}],205:[function(require,module){var nativeCreate=require("./_nativeCreate"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result==="__lodash_hash_undefined__"?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},{"./_nativeCreate":228}],206:[function(require,module){var nativeCreate=require("./_nativeCreate"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?data[key]!==void 0:hasOwnProperty.call(data,key)}},{"./_nativeCreate":228}],207:[function(require,module){var nativeCreate=require("./_nativeCreate");module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},{"./_nativeCreate":228}],208:[function(require,module){module.exports=function(value,length){var type=typeof value;return length=null==length?9007199254740991:length,!!length&&("number"==type||"symbol"!=type&&/^(?:0|[1-9]\d*)$/.test(value))&&-1<value&&0==value%1&&value<length}},{}],209:[function(require,module){function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!("number"==type?!(isArrayLike(object)&&isIndex(index,object.length)):!("string"==type&&index in object))&&eq(object[index],value)}var eq=require("./eq"),isArrayLike=require("./isArrayLike"),isIndex=require("./_isIndex"),isObject=require("./isObject");module.exports=isIterateeCall},{"./_isIndex":208,"./eq":251,"./isArrayLike":259,"./isObject":264}],210:[function(require,module){function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!!("number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value))||reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)}var isArray=require("./isArray"),isSymbol=require("./isSymbol"),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=isKey},{"./isArray":258,"./isSymbol":268}],211:[function(require,module){module.exports=function(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},{}],212:[function(require,module){function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var coreJsData=require("./_coreJsData"),maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();module.exports=isMasked},{"./_coreJsData":182}],213:[function(require,module){var objectProto=Object.prototype;module.exports=function(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}},{}],214:[function(require,module){var isObject=require("./isObject");module.exports=function(value){return value===value&&!isObject(value)}},{"./isObject":264}],215:[function(require,module){module.exports=function(){this.__data__=[],this.size=0}},{}],216:[function(require,module){var assocIndexOf=require("./_assocIndexOf"),arrayProto=Array.prototype,splice=arrayProto.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);if(0>index)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0}},{"./_assocIndexOf":144}],217:[function(require,module){var assocIndexOf=require("./_assocIndexOf");module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return 0>index?void 0:data[index][1]}},{"./_assocIndexOf":144}],218:[function(require,module){var assocIndexOf=require("./_assocIndexOf");module.exports=function(key){return-1<assocIndexOf(this.__data__,key)}},{"./_assocIndexOf":144}],219:[function(require,module){var assocIndexOf=require("./_assocIndexOf");module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return 0>index?(++this.size,data.push([key,value])):data[index][1]=value,this}},{"./_assocIndexOf":144}],220:[function(require,module){var Hash=require("./_Hash"),ListCache=require("./_ListCache"),Map=require("./_Map");module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},{"./_Hash":125,"./_ListCache":126,"./_Map":127}],221:[function(require,module){var getMapData=require("./_getMapData");module.exports=function(key){var result=getMapData(this,key)["delete"](key);return this.size-=result?1:0,result}},{"./_getMapData":193}],222:[function(require,module){var getMapData=require("./_getMapData");module.exports=function(key){return getMapData(this,key).get(key)}},{"./_getMapData":193}],223:[function(require,module){var getMapData=require("./_getMapData");module.exports=function(key){return getMapData(this,key).has(key)}},{"./_getMapData":193}],224:[function(require,module){var getMapData=require("./_getMapData");module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},{"./_getMapData":193}],225:[function(require,module){module.exports=function(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}},{}],226:[function(require,module){module.exports=function(key,srcValue){return function(object){return null!=object&&object[key]===srcValue&&(srcValue!==void 0||key in Object(object))}}},{}],227:[function(require,module){var memoize=require("./memoize");module.exports=function(func){var result=memoize(func,function(key){return 500===cache.size&&cache.clear(),key}),cache=result.cache;return result}},{"./memoize":275}],228:[function(require,module){var getNative=require("./_getNative"),nativeCreate=getNative(Object,"create");module.exports=nativeCreate},{"./_getNative":195}],229:[function(require,module){var overArg=require("./_overArg"),nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},{"./_overArg":232}],230:[function(require,module,exports){var freeGlobal=require("./_freeGlobal"),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},{"./_freeGlobal":191}],231:[function(require,module){var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;module.exports=function(value){return nativeObjectToString.call(value)}},{}],232:[function(require,module){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},{}],233:[function(require,module){var freeGlobal=require("./_freeGlobal"),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":191}],234:[function(require,module){module.exports=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},{}],235:[function(require,module){module.exports=function(value){return this.__data__.has(value)}},{}],236:[function(require,module){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}},{}],237:[function(require,module){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}},{}],238:[function(require,module){var ListCache=require("./_ListCache");module.exports=function(){this.__data__=new ListCache,this.size=0}},{"./_ListCache":126}],239:[function(require,module){module.exports=function(key){var data=this.__data__,result=data["delete"](key);return this.size=data.size,result}},{}],240:[function(require,module){module.exports=function(key){return this.__data__.get(key)}},{}],241:[function(require,module){module.exports=function(key){return this.__data__.has(key)}},{}],242:[function(require,module){var ListCache=require("./_ListCache"),Map=require("./_Map"),MapCache=require("./_MapCache");module.exports=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||199>pairs.length)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},{"./_ListCache":126,"./_Map":127,"./_MapCache":128}],243:[function(require,module){var asciiToArray=require("./_asciiToArray"),hasUnicode=require("./_hasUnicode"),unicodeToArray=require("./_unicodeToArray");module.exports=function(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}},{"./_asciiToArray":143,"./_hasUnicode":202,"./_unicodeToArray":248}],244:[function(require,module){var memoizeCapped=require("./_memoizeCapped"),stringToPath=memoizeCapped(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(match,number,quote,subString){result.push(quote?subString.replace(/\\(\\)?/g,"$1"):number||match)}),result});module.exports=stringToPath},{"./_memoizeCapped":227}],245:[function(require,module){var isSymbol=require("./isSymbol");module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-(1/0)?"-0":result}},{"./isSymbol":268}],246:[function(require,module){var funcProto=Function.prototype,funcToString=funcProto.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},{}],247:[function(require,module){module.exports=function(string){for(var index=string.length;index--&&/\s/.test(string.charAt(index)););return index}},{}],248:[function(require,module){var rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsOptVar="[\\ufe0e\\ufe0f]?",rsOptJoin="(?:"+"\\u200d"+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,"[\\ud800-\\udfff]"].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+(rsOptVar+reOptMod+rsOptJoin),"g");module.exports=function(string){return string.match(reUnicode)||[]}},{}],249:[function(require,module){var toString=require("./toString"),upperFirst=require("./upperFirst");module.exports=function(string){return upperFirst(toString(string).toLowerCase())}},{"./toString":286,"./upperFirst":288}],250:[function(require,module){module.exports=require("./forEach")},{"./forEach":252}],251:[function(require,module){module.exports=function(value,other){return value===other||value!==value&&other!==other}},{}],252:[function(require,module){var arrayEach=require("./_arrayEach"),baseEach=require("./_baseEach"),castFunction=require("./_castFunction"),isArray=require("./isArray");module.exports=function(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,castFunction(iteratee))}},{"./_arrayEach":136,"./_baseEach":147,"./_castFunction":178,"./isArray":258}],253:[function(require,module){var baseGet=require("./_baseGet");module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return result===void 0?defaultValue:result}},{"./_baseGet":151}],254:[function(require,module){var baseHas=require("./_baseHas"),hasPath=require("./_hasPath");module.exports=function(object,path){return null!=object&&hasPath(object,path,baseHas)}},{"./_baseHas":154,"./_hasPath":201}],255:[function(require,module){var baseHasIn=require("./_baseHasIn"),hasPath=require("./_hasPath");module.exports=function(object,path){return null!=object&&hasPath(object,path,baseHasIn)}},{"./_baseHasIn":155,"./_hasPath":201}],256:[function(require,module){module.exports=function(value){return value}},{}],257:[function(require,module){var baseIsArguments=require("./_baseIsArguments"),isObjectLike=require("./isObjectLike"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},{"./_baseIsArguments":156,"./isObjectLike":265}],258:[function(require,module){var isArray=Array.isArray;module.exports=isArray},{}],259:[function(require,module){var isFunction=require("./isFunction"),isLength=require("./isLength");module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},{"./isFunction":262,"./isLength":263}],260:[function(require,module,exports){var root=require("./_root"),stubFalse=require("./stubFalse"),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0;module.exports=nativeIsBuffer||stubFalse},{"./_root":233,"./stubFalse":281}],261:[function(require,module){var baseIsEqual=require("./_baseIsEqual");module.exports=function(value,other){return baseIsEqual(value,other)}},{"./_baseIsEqual":157}],262:[function(require,module){var baseGetTag=require("./_baseGetTag"),isObject=require("./isObject");module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag=="[object Function]"||tag=="[object GeneratorFunction]"||tag=="[object AsyncFunction]"||tag=="[object Proxy]"}},{"./_baseGetTag":153,"./isObject":264}],263:[function(require,module){module.exports=function(value){return"number"==typeof value&&-1<value&&0==value%1&&value<=9007199254740991}},{}],264:[function(require,module){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},{}],265:[function(require,module){module.exports=function(value){return null!=value&&"object"==typeof value}},{}],266:[function(require,module){var baseGetTag=require("./_baseGetTag"),getPrototype=require("./_getPrototype"),isObjectLike=require("./isObjectLike"),funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);module.exports=function(value){if(!isObjectLike(value)||baseGetTag(value)!="[object Object]")return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},{"./_baseGetTag":153,"./_getPrototype":196,"./isObjectLike":265}],267:[function(require,module){var baseGetTag=require("./_baseGetTag"),isArray=require("./isArray"),isObjectLike=require("./isObjectLike");module.exports=function(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)=="[object String]"}},{"./_baseGetTag":153,"./isArray":258,"./isObjectLike":265}],268:[function(require,module){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)=="[object Symbol]"}},{"./_baseGetTag":153,"./isObjectLike":265}],269:[function(require,module){var baseIsTypedArray=require("./_baseIsTypedArray"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil"),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},{"./_baseIsTypedArray":161,"./_baseUnary":176,"./_nodeUtil":230}],270:[function(require,module){var arrayProto=Array.prototype,nativeJoin=arrayProto.join;module.exports=function(array,separator){return null==array?"":nativeJoin.call(array,separator)}},{}],271:[function(require,module){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeys=require("./_baseKeys"),isArrayLike=require("./isArrayLike");module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},{"./_arrayLikeKeys":138,"./_baseKeys":163,"./isArrayLike":259}],272:[function(require,module){var arrayMap=require("./_arrayMap"),baseIteratee=require("./_baseIteratee"),baseMap=require("./_baseMap"),isArray=require("./isArray");module.exports=function(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee,3))}},{"./_arrayMap":139,"./_baseIteratee":162,"./_baseMap":164,"./isArray":258}],273:[function(require,module){var baseAssignValue=require("./_baseAssignValue"),baseForOwn=require("./_baseForOwn"),baseIteratee=require("./_baseIteratee");module.exports=function(object,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result}},{"./_baseAssignValue":145,"./_baseForOwn":149,"./_baseIteratee":162}],274:[function(require,module){var baseAssignValue=require("./_baseAssignValue"),baseForOwn=require("./_baseForOwn"),baseIteratee=require("./_baseIteratee");module.exports=function(object,iteratee){var result={};return iteratee=baseIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result}},{"./_baseAssignValue":145,"./_baseForOwn":149,"./_baseIteratee":162}],275:[function(require,module){function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}var MapCache=require("./_MapCache");memoize.Cache=MapCache,module.exports=memoize},{"./_MapCache":128}],276:[function(require,module){function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props),chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);return actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}var arrayEach=require("./_arrayEach"),arrayPush=require("./_arrayPush"),baseFunctions=require("./_baseFunctions"),copyArray=require("./_copyArray"),isFunction=require("./isFunction"),isObject=require("./isObject"),keys=require("./keys");module.exports=mixin},{"./_arrayEach":136,"./_arrayPush":140,"./_baseFunctions":150,"./_copyArray":181,"./isFunction":262,"./isObject":264,"./keys":271}],277:[function(require,module){var baseProperty=require("./_baseProperty"),basePropertyDeep=require("./_basePropertyDeep"),isKey=require("./_isKey"),toKey=require("./_toKey");module.exports=function(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}},{"./_baseProperty":167,"./_basePropertyDeep":168,"./_isKey":210,"./_toKey":245}],278:[function(require,module){var arrayReduce=require("./_arrayReduce"),baseEach=require("./_baseEach"),baseIteratee=require("./_baseIteratee"),baseReduce=require("./_baseReduce"),isArray=require("./isArray");module.exports=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=3>arguments.length;return func(collection,baseIteratee(iteratee,4),accumulator,initAccum,baseEach)}},{"./_arrayReduce":141,"./_baseEach":147,"./_baseIteratee":162,"./_baseReduce":169,"./isArray":258}],279:[function(require,module){var baseRepeat=require("./_baseRepeat"),isIterateeCall=require("./_isIterateeCall"),toInteger=require("./toInteger"),toString=require("./toString");module.exports=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):void 0===n)?1:toInteger(n),baseRepeat(toString(string),n)}},{"./_baseRepeat":170,"./_isIterateeCall":209,"./toInteger":283,"./toString":286}],280:[function(require,module){module.exports=function(){return[]}},{}],281:[function(require,module){module.exports=function(){return!1}},{}],282:[function(require,module){var toNumber=require("./toNumber"),INFINITY=1/0;module.exports=function(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=0>value?-1:1;return 1.7976931348623157e+308*sign}return value===value?value:0}},{"./toNumber":284}],283:[function(require,module){var toFinite=require("./toFinite");module.exports=function(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}},{"./toFinite":282}],284:[function(require,module){var baseTrim=require("./_baseTrim"),isObject=require("./isObject"),isSymbol=require("./isSymbol"),NAN=0/0,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=/^0b[01]+$/i.test(value);return isBinary||/^0o[0-7]+$/i.test(value)?freeParseInt(value.slice(2),isBinary?2:8):/^[-+]0x[0-9a-f]+$/i.test(value)?NAN:+value}},{"./_baseTrim":175,"./isObject":264,"./isSymbol":268}],285:[function(require,module){var createToPairs=require("./_createToPairs"),keys=require("./keys"),toPairs=createToPairs(keys);module.exports=toPairs},{"./_createToPairs":186,"./keys":271}],286:[function(require,module){var baseToString=require("./_baseToString");module.exports=function(value){return null==value?"":baseToString(value)}},{"./_baseToString":174}],287:[function(require,module){var arrayEach=require("./_arrayEach"),baseCreate=require("./_baseCreate"),baseForOwn=require("./_baseForOwn"),baseIteratee=require("./_baseIteratee"),getPrototype=require("./_getPrototype"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isFunction=require("./isFunction"),isObject=require("./isObject"),isTypedArray=require("./isTypedArray");module.exports=function(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);if(iteratee=baseIteratee(iteratee,4),null==accumulator){var Ctor=object&&object.constructor;accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)?isFunction(Ctor)?baseCreate(getPrototype(object)):{}:{}}return(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}},{"./_arrayEach":136,"./_baseCreate":146,"./_baseForOwn":149,"./_baseIteratee":162,"./_getPrototype":196,"./isArray":258,"./isBuffer":260,"./isFunction":262,"./isObject":264,"./isTypedArray":269}],288:[function(require,module){var createCaseFirst=require("./_createCaseFirst"),upperFirst=createCaseFirst("toUpperCase");module.exports=upperFirst},{"./_createCaseFirst":185}],289:[function(require,module,exports){'use strict';function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(){return _construct=_isNativeReflectConstruct()?Reflect.construct:function(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a),instance=new Constructor;return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(Class){function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}if(null===Class||!_isNativeFunction(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof _cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var target={},sourceKeys=Object.keys(source),key,i;for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelperLoose(o){var i=0;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(o=_unsupportedIterableToArray(o)))return function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return i=o[Symbol.iterator](),i.next.bind(i)}function isUndefined(o){return"undefined"==typeof o}function isNumber(o){return"number"==typeof o}function isInteger(o){return"number"==typeof o&&0==o%1}function isString(o){return"string"==typeof o}function isDate(o){return"[object Date]"===Object.prototype.toString.call(o)}function hasIntl(){try{return"undefined"!=typeof Intl&&Intl.DateTimeFormat}catch(e){return!1}}function hasFormatToParts(){return!isUndefined(Intl.DateTimeFormat.prototype.formatToParts)}function hasRelative(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function maybeArray(thing){return Array.isArray(thing)?thing:[thing]}function bestBy(arr,by,compare){return 0===arr.length?void 0:arr.reduce(function(best,next){var pair=[by(next),next];return best?compare(best[0],pair[0])===best[0]?best:pair:pair},null)[1]}function pick(obj,keys){return keys.reduce(function(a,k){return a[k]=obj[k],a},{})}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function integerBetween(thing,bottom,top){return isInteger(thing)&&thing>=bottom&&thing<=top}function floorMod(x,n){return x-n*Math.floor(x/n)}function padStart(input,n){void 0===n&&(n=2);var minus=0>input?"-":"",target=minus?-1*input:input,result;return result=target.toString().length<n?("0".repeat(n)+target).slice(-n):target.toString(),""+minus+result}function parseInteger(string){return isUndefined(string)||null===string||""===string?void 0:parseInt(string,10)}function parseMillis(fraction){if(!(isUndefined(fraction)||null===fraction||""===fraction)){var f=1e3*parseFloat("0."+fraction);return Math.floor(f)}}function roundTo(number,digits,towardZero){void 0===towardZero&&(towardZero=!1);var factor=Math.pow(10,digits),rounder=towardZero?Math.trunc:Math.round;return rounder(number*factor)/factor}function isLeapYear(year){return 0==year%4&&(0!=year%100||0==year%400)}function daysInYear(year){return isLeapYear(year)?366:365}function daysInMonth(year,month){var modMonth=floorMod(month-1,12)+1;return 2===modMonth?isLeapYear(year+(month-modMonth)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][modMonth-1]}function objToLocalTS(obj){var d=Date.UTC(obj.year,obj.month-1,obj.day,obj.hour,obj.minute,obj.second,obj.millisecond);return 100>obj.year&&0<=obj.year&&(d=new Date(d),d.setUTCFullYear(d.getUTCFullYear()-1900)),+d}function weeksInWeekYear(weekYear){var p1=(weekYear+Math.floor(weekYear/4)-Math.floor(weekYear/100)+Math.floor(weekYear/400))%7,last=weekYear-1,p2=(last+Math.floor(last/4)-Math.floor(last/100)+Math.floor(last/400))%7;return 4==p1||3===p2?53:52}function untruncateYear(year){return 99<year?year:60<year?1900+year:2e3+year}function parseZoneInfo(ts,offsetFormat,locale,timeZone){void 0===timeZone&&(timeZone=null);var date=new Date(ts),intlOpts={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};timeZone&&(intlOpts.timeZone=timeZone);var modified=Object.assign({timeZoneName:offsetFormat},intlOpts),intl=hasIntl();if(intl&&hasFormatToParts()){var parsed=new Intl.DateTimeFormat(locale,modified).formatToParts(date).find(function(m){return"timezonename"===m.type.toLowerCase()});return parsed?parsed.value:null}if(intl){var without=new Intl.DateTimeFormat(locale,intlOpts).format(date),included=new Intl.DateTimeFormat(locale,modified).format(date),diffed=included.substring(without.length),trimmed=diffed.replace(/^[, \u200e]+/,"");return trimmed}return null}function signedOffset(offHourStr,offMinuteStr){var offHour=parseInt(offHourStr,10);Number.isNaN(offHour)&&(offHour=0);var offMin=parseInt(offMinuteStr,10)||0,offMinSigned=0>offHour||Object.is(offHour,-0)?-offMin:offMin;return 60*offHour+offMinSigned}function asNumber(value){var numericValue=+value;if("boolean"==typeof value||""===value||Number.isNaN(numericValue))throw new InvalidArgumentError("Invalid unit value "+value);return numericValue}function normalizeObject(obj,normalizer,nonUnitKeys){var normalized={};for(var u in obj)if(hasOwnProperty(obj,u)){if(0<=nonUnitKeys.indexOf(u))continue;var v=obj[u];if(v===void 0||null===v)continue;normalized[normalizer(u)]=asNumber(v)}return normalized}function formatOffset(offset,format){var hours=Math.trunc(Math.abs(offset/60)),minutes=Math.trunc(Math.abs(offset%60)),sign=0<=offset?"+":"-";switch(format){case"short":return""+sign+padStart(hours,2)+":"+padStart(minutes,2);case"narrow":return""+sign+hours+(0<minutes?":"+minutes:"");case"techie":return""+sign+padStart(hours,2)+padStart(minutes,2);default:throw new RangeError("Value format "+format+" is out of range for property format");}}function timeObject(obj){return pick(obj,["hour","minute","second","millisecond"])}function stringify(obj){return JSON.stringify(obj,Object.keys(obj).sort())}function months(length){return"narrow"===length?[].concat(monthsNarrow):"short"===length?[].concat(monthsShort):"long"===length?[].concat(monthsLong):"numeric"===length?["1","2","3","4","5","6","7","8","9","10","11","12"]:"2-digit"===length?["01","02","03","04","05","06","07","08","09","10","11","12"]:null}function weekdays(length){return"narrow"===length?[].concat(weekdaysNarrow):"short"===length?[].concat(weekdaysShort):"long"===length?[].concat(weekdaysLong):"numeric"===length?["1","2","3","4","5","6","7"]:null}function eras(length){return"narrow"===length?[].concat(erasNarrow):"short"===length?[].concat(erasShort):"long"===length?[].concat(erasLong):null}function meridiemForDateTime(dt){return meridiems[12>dt.hour?0:1]}function weekdayForDateTime(dt,length){return weekdays(length)[dt.weekday-1]}function monthForDateTime(dt,length){return months(length)[dt.month-1]}function eraForDateTime(dt,length){return eras(length)[0>dt.year?0:1]}function formatRelativeTime(unit,count,numeric,narrow){void 0===numeric&&(numeric="always"),void 0===narrow&&(narrow=!1);var units={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},lastable=-1===["hours","minutes","seconds"].indexOf(unit);if("auto"===numeric&&lastable){var isDay="days"===unit;switch(count){case 1:return isDay?"tomorrow":"next "+units[unit][0];case-1:return isDay?"yesterday":"last "+units[unit][0];case 0:return isDay?"today":"this "+units[unit][0];}}var isInPast=Object.is(count,-0)||0>count,fmtValue=Math.abs(count),singular=1===fmtValue,lilUnits=units[unit],fmtUnit=narrow?singular?lilUnits[1]:lilUnits[2]||lilUnits[1]:singular?units[unit][0]:unit;return isInPast?fmtValue+" "+fmtUnit+" ago":"in "+fmtValue+" "+fmtUnit}function formatString(knownFormat){var filtered=pick(knownFormat,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"]),key=stringify(filtered);return key===stringify(DATE_SHORT)?"M/d/yyyy":key===stringify(DATE_MED)?"LLL d, yyyy":key===stringify(DATE_MED_WITH_WEEKDAY)?"EEE, LLL d, yyyy":key===stringify(DATE_FULL)?"LLLL d, yyyy":key===stringify(DATE_HUGE)?"EEEE, LLLL d, yyyy":key===stringify(TIME_SIMPLE)?"h:mm a":key===stringify(TIME_WITH_SECONDS)?"h:mm:ss a":key===stringify(TIME_WITH_SHORT_OFFSET)?"h:mm a":key===stringify(TIME_WITH_LONG_OFFSET)?"h:mm a":key===stringify(TIME_24_SIMPLE)?"HH:mm":key===stringify(TIME_24_WITH_SECONDS)?"HH:mm:ss":key===stringify(TIME_24_WITH_SHORT_OFFSET)?"HH:mm":key===stringify(TIME_24_WITH_LONG_OFFSET)?"HH:mm":key===stringify(DATETIME_SHORT)?"M/d/yyyy, h:mm a":key===stringify(DATETIME_MED)?"LLL d, yyyy, h:mm a":key===stringify(DATETIME_FULL)?"LLLL d, yyyy, h:mm a":key===stringify(DATETIME_HUGE)?"EEEE, LLLL d, yyyy, h:mm a":key===stringify(DATETIME_SHORT_WITH_SECONDS)?"M/d/yyyy, h:mm:ss a":key===stringify(DATETIME_MED_WITH_SECONDS)?"LLL d, yyyy, h:mm:ss a":key===stringify(DATETIME_MED_WITH_WEEKDAY)?"EEE, d LLL yyyy, h:mm a":key===stringify(DATETIME_FULL_WITH_SECONDS)?"LLLL d, yyyy, h:mm:ss a":key===stringify(DATETIME_HUGE_WITH_SECONDS)?"EEEE, LLLL d, yyyy, h:mm:ss a":"EEEE, LLLL d, yyyy, h:mm a"}function stringifyTokens(splits,tokenToString){for(var s="",_iterator=_createForOfIteratorHelperLoose(splits),_step,token;!(_step=_iterator()).done;)token=_step.value,s+=token.literal?token.val:tokenToString(token.val);return"short"}function makeDTF(zone){return dtfCache[zone]||(dtfCache[zone]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:zone,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),dtfCache[zone]}function hackyOffset(dtf,date){var formatted=dtf.format(date).replace(/\u200E/g,""),parsed=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(formatted),fMonth=parsed[1],fDay=parsed[2],fYear=parsed[3],fHour=parsed[4],fMinute=parsed[5],fSecond=parsed[6];return[fYear,fMonth,fDay,fHour,fMinute,fSecond]}function partsOffset(dtf,date){for(var formatted=dtf.formatToParts(date),filled=[],i=0;i<formatted.length;i++){var _formatted$i=formatted[i],type=_formatted$i.type,value=_formatted$i.value,pos=typeToPos[type];isUndefined(pos)||(filled[pos]=parseInt(value,10))}return filled}function normalizeZone(input,defaultZone){var offset;if(isUndefined(input)||null===input)return defaultZone;if(input instanceof Zone)return input;if(isString(input)){var lowered=input.toLowerCase();return"local"===lowered?defaultZone:"utc"===lowered||"gmt"===lowered?FixedOffsetZone.utcInstance:null==(offset=IANAZone.parseGMTOffset(input))?IANAZone.isValidSpecifier(lowered)?IANAZone.create(input):FixedOffsetZone.parseSpecifier(lowered)||new InvalidZone(input):FixedOffsetZone.instance(offset)}return isNumber(input)?FixedOffsetZone.instance(input):"object"==typeof input&&input.offset&&"number"==typeof input.offset?input:new InvalidZone(input)}function getCachedDTF(locString,opts){void 0===opts&&(opts={});var key=JSON.stringify([locString,opts]),dtf=intlDTCache[key];return dtf||(dtf=new Intl.DateTimeFormat(locString,opts),intlDTCache[key]=dtf),dtf}function getCachedINF(locString,opts){void 0===opts&&(opts={});var key=JSON.stringify([locString,opts]),inf=intlNumCache[key];return inf||(inf=new Intl.NumberFormat(locString,opts),intlNumCache[key]=inf),inf}function getCachedRTF(locString,opts){void 0===opts&&(opts={});var _opts=opts,base=_opts.base,cacheKeyOpts=_objectWithoutPropertiesLoose(_opts,["base"]),key=JSON.stringify([locString,cacheKeyOpts]),inf=intlRelCache[key];return inf||(inf=new Intl.RelativeTimeFormat(locString,opts),intlRelCache[key]=inf),inf}function systemLocale(){if(sysLocaleCache)return sysLocaleCache;if(hasIntl()){var computedSys=new Intl.DateTimeFormat().resolvedOptions().locale;return sysLocaleCache=computedSys&&"und"!==computedSys?computedSys:"en-US",sysLocaleCache}return sysLocaleCache="en-US",sysLocaleCache}function parseLocaleString(localeStr){var uIndex=localeStr.indexOf("-u-");if(-1===uIndex)return[localeStr];var smaller=localeStr.substring(0,uIndex),options;try{options=getCachedDTF(localeStr).resolvedOptions()}catch(e){options=getCachedDTF(smaller).resolvedOptions()}var _options=options,numberingSystem=_options.numberingSystem,calendar=_options.calendar;return[smaller,numberingSystem,calendar]}function intlConfigString(localeStr,numberingSystem,outputCalendar){return hasIntl()?outputCalendar||numberingSystem?(localeStr+="-u",outputCalendar&&(localeStr+="-ca-"+outputCalendar),numberingSystem&&(localeStr+="-nu-"+numberingSystem),localeStr):localeStr:[]}function mapMonths(f){for(var ms=[],i=1,dt;12>=i;i++)dt=DateTime.utc(2016,i,1),ms.push(f(dt));return ms}function mapWeekdays(f){for(var ms=[],i=1,dt;7>=i;i++)dt=DateTime.utc(2016,11,13+i),ms.push(f(dt));return ms}function listStuff(loc,length,defaultOK,englishFn,intlFn){var mode=loc.listingMode(defaultOK);return"error"===mode?null:"en"===mode?englishFn(length):intlFn(length)}function supportsFastNumbers(loc){return!(loc.numberingSystem&&"latn"!==loc.numberingSystem)&&("latn"===loc.numberingSystem||!loc.locale||loc.locale.startsWith("en")||hasIntl()&&"latn"===new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem)}function combineRegexes(){for(var _len=arguments.length,regexes=Array(_len),_key=0;_key<_len;_key++)regexes[_key]=arguments[_key];var full=regexes.reduce(function(f,r){return f+r.source},"");return RegExp("^"+full+"$")}function combineExtractors(){for(var _len2=arguments.length,extractors=Array(_len2),_key2=0;_key2<_len2;_key2++)extractors[_key2]=arguments[_key2];return function(m){return extractors.reduce(function(_ref,ex){var mergedVals=_ref[0],mergedZone=_ref[1],cursor=_ref[2],_ex=ex(m,cursor),val=_ex[0],zone=_ex[1],next=_ex[2];return[Object.assign(mergedVals,val),mergedZone||zone,next]},[{},null,1]).slice(0,2)}}function parse(s){if(null==s)return[null,null];for(var _len3=arguments.length,patterns=Array(1<_len3?_len3-1:0),_key3=1;_key3<_len3;_key3++)patterns[_key3-1]=arguments[_key3];for(var _i=0,_patterns=patterns;_i<_patterns.length;_i++){var _patterns$_i=_patterns[_i],regex=_patterns$_i[0],extractor=_patterns$_i[1],m=regex.exec(s);if(m)return extractor(m)}return[null,null]}function simpleParse(){for(var _len4=arguments.length,keys=Array(_len4),_key4=0;_key4<_len4;_key4++)keys[_key4]=arguments[_key4];return function(match,cursor){var ret={},i;for(i=0;i<keys.length;i++)ret[keys[i]]=parseInteger(match[cursor+i]);return[ret,null,cursor+i]}}function int(match,pos,fallback){var m=match[pos];return isUndefined(m)?fallback:parseInteger(m)}function extractISOYmd(match,cursor){var item={year:int(match,cursor),month:int(match,cursor+1,1),day:int(match,cursor+2,1)};return[item,null,cursor+3]}function extractISOTime(match,cursor){var item={hours:int(match,cursor,0),minutes:int(match,cursor+1,0),seconds:int(match,cursor+2,0),milliseconds:parseMillis(match[cursor+3])};return[item,null,cursor+4]}function extractISOOffset(match,cursor){var local=!match[cursor]&&!match[cursor+1],fullOffset=signedOffset(match[cursor+1],match[cursor+2]),zone=local?null:FixedOffsetZone.instance(fullOffset);return[{},zone,cursor+3]}function extractIANAZone(match,cursor){var zone=match[cursor]?IANAZone.create(match[cursor]):null;return[{},zone,cursor+1]}function extractISODuration(match){var s=match[0],yearStr=match[1],monthStr=match[2],weekStr=match[3],dayStr=match[4],hourStr=match[5],minuteStr=match[6],secondStr=match[7],millisecondsStr=match[8],hasNegativePrefix="-"===s[0],negativeSeconds=secondStr&&"-"===secondStr[0],maybeNegate=function(num,force){return void 0===force&&(force=!1),void 0!==num&&(force||num&&hasNegativePrefix)?-num:num};return[{years:maybeNegate(parseInteger(yearStr)),months:maybeNegate(parseInteger(monthStr)),weeks:maybeNegate(parseInteger(weekStr)),days:maybeNegate(parseInteger(dayStr)),hours:maybeNegate(parseInteger(hourStr)),minutes:maybeNegate(parseInteger(minuteStr)),seconds:maybeNegate(parseInteger(secondStr),"-0"===secondStr),milliseconds:maybeNegate(parseMillis(millisecondsStr),negativeSeconds)}]}function fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result={year:2===yearStr.length?untruncateYear(parseInteger(yearStr)):parseInteger(yearStr),month:monthsShort.indexOf(monthStr)+1,day:parseInteger(dayStr),hour:parseInteger(hourStr),minute:parseInteger(minuteStr)};return secondStr&&(result.second=parseInteger(secondStr)),weekdayStr&&(result.weekday=3<weekdayStr.length?weekdaysLong.indexOf(weekdayStr)+1:weekdaysShort.indexOf(weekdayStr)+1),result}function extractRFC2822(match){var weekdayStr=match[1],dayStr=match[2],monthStr=match[3],yearStr=match[4],hourStr=match[5],minuteStr=match[6],secondStr=match[7],obsOffset=match[8],milOffset=match[9],offHourStr=match[10],offMinuteStr=match[11],result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr),offset;return offset=obsOffset?obsOffsets[obsOffset]:milOffset?0:signedOffset(offHourStr,offMinuteStr),[result,new FixedOffsetZone(offset)]}function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function extractRFC1123Or850(match){var weekdayStr=match[1],dayStr=match[2],monthStr=match[3],yearStr=match[4],hourStr=match[5],minuteStr=match[6],secondStr=match[7],result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);return[result,FixedOffsetZone.utcInstance]}function extractASCII(match){var weekdayStr=match[1],monthStr=match[2],dayStr=match[3],hourStr=match[4],minuteStr=match[5],secondStr=match[6],yearStr=match[7],result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);return[result,FixedOffsetZone.utcInstance]}function parseISODate(s){return parse(s,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(s){return parse(preprocessRFC2822(s),[rfc2822,extractRFC2822])}function parseHTTPDate(s){return parse(s,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(s){return parse(s,[isoDuration,extractISODuration])}function parseISOTimeOnly(s){return parse(s,[isoTimeOnly,extractISOTimeOnly])}function parseSQL(s){return parse(s,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeOffsetAndIANAZone],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}function clone(dur,alts,clear){void 0===clear&&(clear=!1);var conf={values:clear?alts.values:Object.assign({},dur.values,alts.values||{}),loc:dur.loc.clone(alts.loc),conversionAccuracy:alts.conversionAccuracy||dur.conversionAccuracy};return new Duration(conf)}function antiTrunc(n){return 0>n?Math.floor(n):Math.ceil(n)}function convert(matrix,fromMap,fromUnit,toMap,toUnit){var conv=matrix[toUnit][fromUnit],raw=fromMap[fromUnit]/conv,sameSign=Math.sign(raw)===Math.sign(toMap[toUnit]),added=!sameSign&&0!==toMap[toUnit]&&1>=Math.abs(raw)?antiTrunc(raw):Math.trunc(raw);toMap[toUnit]+=added,fromMap[fromUnit]-=added*conv}function normalizeValues(matrix,vals){reverseUnits.reduce(function(previous,current){return isUndefined(vals[current])?previous:(previous&&convert(matrix,vals,previous,vals,current),current)},null)}function friendlyDuration(durationish){if(isNumber(durationish))return Duration.fromMillis(durationish);if(Duration.isDuration(durationish))return durationish;if("object"==typeof durationish)return Duration.fromObject(durationish);throw new InvalidArgumentError("Unknown duration argument "+durationish+" of type "+typeof durationish)}function validateStartEnd(start,end){return start&&start.isValid?end&&end.isValid?end<start?Interval.invalid("end before start","The end of an interval must be after its start, but you had start="+start.toISO()+" and end="+end.toISO()):null:Interval.invalid("missing or invalid end"):Interval.invalid("missing or invalid start")}function dayDiff(earlier,later){var utcDayStart=function(dt){return dt.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},ms=utcDayStart(later)-utcDayStart(earlier);return Math.floor(Duration.fromMillis(ms).as("days"))}function highOrderDiffs(cursor,later,units){for(var differs=[["years",function(a,b){return b.year-a.year}],["quarters",function(a,b){return b.quarter-a.quarter}],["months",function(a,b){return b.month-a.month+12*(b.year-a.year)}],["weeks",function(a,b){var days=dayDiff(a,b);return(days-days%7)/7}],["days",dayDiff]],results={},_i=0,_differs=differs,lowestOrder,highWater;_i<_differs.length;_i++){var _differs$_i=_differs[_i],unit=_differs$_i[0],differ=_differs$_i[1];if(0<=units.indexOf(unit)){var _cursor$plus;lowestOrder=unit;var delta=differ(cursor,later);if(highWater=cursor.plus((_cursor$plus={},_cursor$plus[unit]=delta,_cursor$plus)),highWater>later){var _cursor$plus2;cursor=cursor.plus((_cursor$plus2={},_cursor$plus2[unit]=delta-1,_cursor$plus2)),delta-=1}else cursor=highWater;results[unit]=delta}}return[cursor,results,highWater,lowestOrder]}function _diff(earlier,later,units,opts){var _highOrderDiffs=highOrderDiffs(earlier,later,units),cursor=_highOrderDiffs[0],results=_highOrderDiffs[1],highWater=_highOrderDiffs[2],lowestOrder=_highOrderDiffs[3],remainingMillis=later-cursor,lowerOrderUnits=units.filter(function(u){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(u)});if(0===lowerOrderUnits.length){if(highWater<later){var _cursor$plus3;highWater=cursor.plus((_cursor$plus3={},_cursor$plus3[lowestOrder]=1,_cursor$plus3))}highWater!==cursor&&(results[lowestOrder]=(results[lowestOrder]||0)+remainingMillis/(highWater-cursor))}var duration=Duration.fromObject(Object.assign(results,opts));if(0<lowerOrderUnits.length){var _Duration$fromMillis;return(_Duration$fromMillis=Duration.fromMillis(remainingMillis,opts)).shiftTo.apply(_Duration$fromMillis,lowerOrderUnits).plus(duration)}return duration}function parseDigits(str){var value=parseInt(str,10);if(isNaN(value)){value="";for(var i=0,code;i<str.length;i++)if(code=str.charCodeAt(i),-1!==str[i].search(numberingSystems.hanidec))value+=hanidecChars.indexOf(str[i]);else for(var key in numberingSystemsUTF16){var _numberingSystemsUTF=numberingSystemsUTF16[key],min=_numberingSystemsUTF[0],max=_numberingSystemsUTF[1];code>=min&&code<=max&&(value+=code-min)}return parseInt(value,10)}return value}function digitRegex(_ref,append){var numberingSystem=_ref.numberingSystem;return void 0===append&&(append=""),new RegExp(""+numberingSystems[numberingSystem||"latn"]+append)}function intUnit(regex,post){return void 0===post&&(post=function(i){return i}),{regex:regex,deser:function(_ref){var s=_ref[0];return post(parseDigits(s))}}}function fixListRegex(s){return s.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,"( |\xA0)")}function stripInsensitivities(s){return s.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(strings,startIndex){return null===strings?null:{regex:RegExp(strings.map(fixListRegex).join("|")),deser:function(_ref2){var s=_ref2[0];return strings.findIndex(function(i){return stripInsensitivities(s)===stripInsensitivities(i)})+startIndex}}}function offset(regex,groups){return{regex:regex,deser:function(_ref3){var h=_ref3[1],m=_ref3[2];return signedOffset(h,m)},groups:groups}}function simple(regex){return{regex:regex,deser:function(_ref4){var s=_ref4[0];return s}}}function escapeToken(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(token,loc){var one=digitRegex(loc),two=digitRegex(loc,"{2}"),three=digitRegex(loc,"{3}"),four=digitRegex(loc,"{4}"),six=digitRegex(loc,"{6}"),oneOrTwo=digitRegex(loc,"{1,2}"),oneToThree=digitRegex(loc,"{1,3}"),oneToSix=digitRegex(loc,"{1,6}"),oneToNine=digitRegex(loc,"{1,9}"),twoToFour=digitRegex(loc,"{2,4}"),fourToSix=digitRegex(loc,"{4,6}"),literal=function(t){return{regex:RegExp(escapeToken(t.val)),deser:function(_ref5){var s=_ref5[0];return s},literal:!0}},unit=function(t){if(token.literal)return literal(t);switch(t.val){case"G":return oneOf(loc.eras("short",!1),0);case"GG":return oneOf(loc.eras("long",!1),0);case"y":return intUnit(oneToSix);case"yy":return intUnit(twoToFour,untruncateYear);case"yyyy":return intUnit(four);case"yyyyy":return intUnit(fourToSix);case"yyyyyy":return intUnit(six);case"M":return intUnit(oneOrTwo);case"MM":return intUnit(two);case"MMM":return oneOf(loc.months("short",!0,!1),1);case"MMMM":return oneOf(loc.months("long",!0,!1),1);case"L":return intUnit(oneOrTwo);case"LL":return intUnit(two);case"LLL":return oneOf(loc.months("short",!1,!1),1);case"LLLL":return oneOf(loc.months("long",!1,!1),1);case"d":return intUnit(oneOrTwo);case"dd":return intUnit(two);case"o":return intUnit(oneToThree);case"ooo":return intUnit(three);case"HH":return intUnit(two);case"H":return intUnit(oneOrTwo);case"hh":return intUnit(two);case"h":return intUnit(oneOrTwo);case"mm":return intUnit(two);case"m":return intUnit(oneOrTwo);case"q":return intUnit(oneOrTwo);case"qq":return intUnit(two);case"s":return intUnit(oneOrTwo);case"ss":return intUnit(two);case"S":return intUnit(oneToThree);case"SSS":return intUnit(three);case"u":return simple(oneToNine);case"a":return oneOf(loc.meridiems(),0);case"kkkk":return intUnit(four);case"kk":return intUnit(twoToFour,untruncateYear);case"W":return intUnit(oneOrTwo);case"WW":return intUnit(two);case"E":case"c":return intUnit(one);case"EEE":return oneOf(loc.weekdays("short",!1,!1),1);case"EEEE":return oneOf(loc.weekdays("long",!1,!1),1);case"ccc":return oneOf(loc.weekdays("short",!0,!1),1);case"cccc":return oneOf(loc.weekdays("long",!0,!1),1);case"Z":case"ZZ":return offset(new RegExp("([+-]"+oneOrTwo.source+")(?::("+two.source+"))?"),2);case"ZZZ":return offset(new RegExp("([+-]"+oneOrTwo.source+")("+two.source+")?"),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);default:return literal(t);}}(token)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return unit.token=token,unit}function tokenForPart(part,locale,formatOpts){var type=part.type,value=part.value;if("literal"===type)return{literal:!0,val:value};var style=formatOpts[type],val=partTypeStyleToTokenVal[type];return"object"==typeof val&&(val=val[style]),val?{literal:!1,val:val}:void 0}function buildRegex(units){var re=units.map(function(u){return u.regex}).reduce(function(f,r){return f+"("+r.source+")"},"");return["^"+re+"$",units]}function match(input,regex,handlers){var matches=input.match(regex);if(matches){var all={},matchIndex=1;for(var i in handlers)if(hasOwnProperty(handlers,i)){var h=handlers[i],groups=h.groups?h.groups+1:1;!h.literal&&h.token&&(all[h.token.val[0]]=h.deser(matches.slice(matchIndex,matchIndex+groups))),matchIndex+=groups}return[matches,all]}return[matches,{}]}function dateTimeFromMatches(matches){var toField=function(token){return"S"===token?"millisecond":"s"===token?"second":"m"===token?"minute":"h"===token||"H"===token?"hour":"d"===token?"day":"o"===token?"ordinal":"L"===token||"M"===token?"month":"y"===token?"year":"E"===token||"c"===token?"weekday":"W"===token?"weekNumber":"k"===token?"weekYear":"q"===token?"quarter":null},zone;zone=isUndefined(matches.Z)?isUndefined(matches.z)?null:IANAZone.create(matches.z):new FixedOffsetZone(matches.Z),isUndefined(matches.q)||(matches.M=3*(matches.q-1)+1),isUndefined(matches.h)||(12>matches.h&&1===matches.a?matches.h+=12:12===matches.h&&0===matches.a&&(matches.h=0)),0===matches.G&&matches.y&&(matches.y=-matches.y),isUndefined(matches.u)||(matches.S=parseMillis(matches.u));var vals=Object.keys(matches).reduce(function(r,k){var f=toField(k);return f&&(r[f]=matches[k]),r},{});return[vals,zone]}function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache}function maybeExpandMacroToken(token,locale){if(token.literal)return token;var formatOpts=Formatter.macroTokenToFormatOpts(token.val);if(!formatOpts)return token;var formatter=Formatter.create(locale,formatOpts),parts=formatter.formatDateTimeParts(getDummyDateTime()),tokens=parts.map(function(p){return tokenForPart(p,locale,formatOpts)});return tokens.includes(void 0)?token:tokens}function expandMacroTokens(tokens,locale){var _Array$prototype;return(_Array$prototype=Array.prototype).concat.apply(_Array$prototype,tokens.map(function(t){return maybeExpandMacroToken(t,locale)}))}function explainFromTokens(locale,input,format){var tokens=expandMacroTokens(Formatter.parseFormat(format),locale),units=tokens.map(function(t){return unitForToken(t,locale)}),disqualifyingUnit=units.find(function(t){return t.invalidReason});if(disqualifyingUnit)return{input:input,tokens:tokens,invalidReason:disqualifyingUnit.invalidReason};var _buildRegex=buildRegex(units),regexString=_buildRegex[0],handlers=_buildRegex[1],regex=RegExp(regexString,"i"),_match=match(input,regex,handlers),rawMatches=_match[0],matches=_match[1],_ref6=matches?dateTimeFromMatches(matches):[null,null],result=_ref6[0],zone=_ref6[1];if(hasOwnProperty(matches,"a")&&hasOwnProperty(matches,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input:input,tokens:tokens,regex:regex,rawMatches:rawMatches,matches:matches,result:result,zone:zone}}function parseFromTokens(locale,input,format){var _explainFromTokens=explainFromTokens(locale,input,format),result=_explainFromTokens.result,zone=_explainFromTokens.zone,invalidReason=_explainFromTokens.invalidReason;return[result,zone,invalidReason]}function unitOutOfRange(unit,value){return new Invalid("unit out of range","you specified "+value+" (of type "+typeof value+") as a "+unit+", which is invalid")}function dayOfWeek(year,month,day){var js=new Date(Date.UTC(year,month-1,day)).getUTCDay();return 0===js?7:js}function computeOrdinal(year,month,day){return day+(isLeapYear(year)?leapLadder:nonLeapLadder)[month-1]}function uncomputeOrdinal(year,ordinal){var table=isLeapYear(year)?leapLadder:nonLeapLadder,month0=table.findIndex(function(i){return i<ordinal}),day=ordinal-table[month0];return{month:month0+1,day:day}}function gregorianToWeek(gregObj){var year=gregObj.year,month=gregObj.month,day=gregObj.day,ordinal=computeOrdinal(year,month,day),weekday=dayOfWeek(year,month,day),weekNumber=Math.floor((ordinal-weekday+10)/7),weekYear;return 1>weekNumber?(weekYear=year-1,weekNumber=weeksInWeekYear(weekYear)):weekNumber>weeksInWeekYear(year)?(weekYear=year+1,weekNumber=1):weekYear=year,Object.assign({weekYear:weekYear,weekNumber:weekNumber,weekday:weekday},timeObject(gregObj))}function weekToGregorian(weekData){var weekYear=weekData.weekYear,weekNumber=weekData.weekNumber,weekday=weekData.weekday,weekdayOfJan4=dayOfWeek(weekYear,1,4),yearInDays=daysInYear(weekYear),ordinal=7*weekNumber+weekday-weekdayOfJan4-3,year;1>ordinal?(year=weekYear-1,ordinal+=daysInYear(year)):ordinal>yearInDays?(year=weekYear+1,ordinal-=daysInYear(weekYear)):year=weekYear;var _uncomputeOrdinal=uncomputeOrdinal(year,ordinal),month=_uncomputeOrdinal.month,day=_uncomputeOrdinal.day;return Object.assign({year:year,month:month,day:day},timeObject(weekData))}function gregorianToOrdinal(gregData){var year=gregData.year,month=gregData.month,day=gregData.day,ordinal=computeOrdinal(year,month,day);return Object.assign({year:year,ordinal:ordinal},timeObject(gregData))}function ordinalToGregorian(ordinalData){var year=ordinalData.year,ordinal=ordinalData.ordinal,_uncomputeOrdinal2=uncomputeOrdinal(year,ordinal),month=_uncomputeOrdinal2.month,day=_uncomputeOrdinal2.day;return Object.assign({year:year,month:month,day:day},timeObject(ordinalData))}function hasInvalidWeekData(obj){var validYear=isInteger(obj.weekYear),validWeek=integerBetween(obj.weekNumber,1,weeksInWeekYear(obj.weekYear)),validWeekday=integerBetween(obj.weekday,1,7);return validYear?validWeek?!validWeekday&&unitOutOfRange("weekday",obj.weekday):unitOutOfRange("week",obj.week):unitOutOfRange("weekYear",obj.weekYear)}function hasInvalidOrdinalData(obj){var validYear=isInteger(obj.year),validOrdinal=integerBetween(obj.ordinal,1,daysInYear(obj.year));return validYear?!validOrdinal&&unitOutOfRange("ordinal",obj.ordinal):unitOutOfRange("year",obj.year)}function hasInvalidGregorianData(obj){var validYear=isInteger(obj.year),validMonth=integerBetween(obj.month,1,12),validDay=integerBetween(obj.day,1,daysInMonth(obj.year,obj.month));return validYear?validMonth?!validDay&&unitOutOfRange("day",obj.day):unitOutOfRange("month",obj.month):unitOutOfRange("year",obj.year)}function hasInvalidTimeData(obj){var hour=obj.hour,minute=obj.minute,second=obj.second,millisecond=obj.millisecond,validHour=integerBetween(hour,0,23)||24===hour&&0===minute&&0===second&&0===millisecond,validMinute=integerBetween(minute,0,59),validSecond=integerBetween(second,0,59),validMillisecond=integerBetween(millisecond,0,999);return validHour?validMinute?validSecond?!validMillisecond&&unitOutOfRange("millisecond",millisecond):unitOutOfRange("second",second):unitOutOfRange("minute",minute):unitOutOfRange("hour",hour)}function unsupportedZone(zone){return new Invalid("unsupported zone","the zone \""+zone.name+"\" is not supported")}function possiblyCachedWeekData(dt){return null===dt.weekData&&(dt.weekData=gregorianToWeek(dt.c)),dt.weekData}function clone$1(inst,alts){var current={ts:inst.ts,zone:inst.zone,c:inst.c,o:inst.o,loc:inst.loc,invalid:inst.invalid};return new DateTime(Object.assign({},current,alts,{old:current}))}function fixOffset(localTS,o,tz){var utcGuess=localTS-1e3*(60*o),o2=tz.offset(utcGuess);if(o===o2)return[utcGuess,o];utcGuess-=1e3*(60*(o2-o));var o3=tz.offset(utcGuess);return o2===o3?[utcGuess,o2]:[localTS-1e3*(60*Math.min(o2,o3)),Math.max(o2,o3)]}function tsToObj(ts,offset){ts+=1e3*(60*offset);var d=new Date(ts);return{year:d.getUTCFullYear(),month:d.getUTCMonth()+1,day:d.getUTCDate(),hour:d.getUTCHours(),minute:d.getUTCMinutes(),second:d.getUTCSeconds(),millisecond:d.getUTCMilliseconds()}}function objToTS(obj,offset,zone){return fixOffset(objToLocalTS(obj),offset,zone)}function adjustTime(inst,dur){var oPre=inst.o,year=inst.c.year+Math.trunc(dur.years),month=inst.c.month+Math.trunc(dur.months)+3*Math.trunc(dur.quarters),c=Object.assign({},inst.c,{year:year,month:month,day:Math.min(inst.c.day,daysInMonth(year,month))+Math.trunc(dur.days)+7*Math.trunc(dur.weeks)}),millisToAdd=Duration.fromObject({years:dur.years-Math.trunc(dur.years),quarters:dur.quarters-Math.trunc(dur.quarters),months:dur.months-Math.trunc(dur.months),weeks:dur.weeks-Math.trunc(dur.weeks),days:dur.days-Math.trunc(dur.days),hours:dur.hours,minutes:dur.minutes,seconds:dur.seconds,milliseconds:dur.milliseconds}).as("milliseconds"),localTS=objToLocalTS(c),_fixOffset=fixOffset(localTS,oPre,inst.zone),ts=_fixOffset[0],o=_fixOffset[1];return 0!==millisToAdd&&(ts+=millisToAdd,o=inst.zone.offset(ts)),{ts:ts,o:o}}function parseDataToDateTime(parsed,parsedZone,opts,format,text){var setZone=opts.setZone,zone=opts.zone;if(parsed&&0!==Object.keys(parsed).length){var inst=DateTime.fromObject(Object.assign(parsed,opts,{zone:parsedZone||zone,setZone:void 0}));return setZone?inst:inst.setZone(zone)}return DateTime.invalid(new Invalid("unparsable","the input \""+text+"\" can't be parsed as "+format))}function toTechFormat(dt,format,allowZ){return void 0===allowZ&&(allowZ=!0),dt.isValid?Formatter.create(Locale.create("en-US"),{allowZ:allowZ,forceSimple:!0}).formatDateTimeFromString(dt,format):null}function toTechTimeFormat(dt,_ref){var _ref$suppressSeconds=_ref.suppressSeconds,_ref$suppressMillisec=_ref.suppressMilliseconds,includeOffset=_ref.includeOffset,_ref$includePrefix=_ref.includePrefix,_ref$includeZone=_ref.includeZone,includeZone=void 0!==_ref$includeZone&&_ref$includeZone,_ref$spaceZone=_ref.spaceZone,_ref$format=_ref.format,format=void 0===_ref$format?"extended":_ref$format,fmt="basic"===format?"HHmm":"HH:mm";void 0!==_ref$suppressSeconds&&_ref$suppressSeconds&&0===dt.second&&0===dt.millisecond||(fmt+="basic"===format?"ss":":ss",(!(void 0!==_ref$suppressMillisec&&_ref$suppressMillisec)||0!==dt.millisecond)&&(fmt+=".SSS")),(includeZone||includeOffset)&&void 0!==_ref$spaceZone&&_ref$spaceZone&&(fmt+=" "),includeZone?fmt+="z":includeOffset&&(fmt+="basic"===format?"ZZZ":"ZZ");var str=toTechFormat(dt,fmt);return void 0!==_ref$includePrefix&&_ref$includePrefix&&(str="T"+str),str}function normalizeUnit(unit){var normalized={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[unit.toLowerCase()];if(!normalized)throw new InvalidUnitError(unit);return normalized}function quickDT(obj,zone){for(var _iterator=_createForOfIteratorHelperLoose(orderedUnits$1),_step,u;!(_step=_iterator()).done;)u=_step.value,isUndefined(obj[u])&&(obj[u]=defaultUnitValues[u]);var invalid=hasInvalidGregorianData(obj)||hasInvalidTimeData(obj);if(invalid)return DateTime.invalid(invalid);var tsNow=Settings.now(),offsetProvis=zone.offset(tsNow),_objToTS=objToTS(obj,offsetProvis,zone),ts=_objToTS[0],o=_objToTS[1];return new DateTime({ts:ts,zone:zone,o:o})}function diffRelative(start,end,opts){var round=!!isUndefined(opts.round)||opts.round,format=function(c,unit){c=roundTo(c,round||opts.calendary?0:2,!0);var formatter=end.loc.clone(opts).relFormatter(opts);return formatter.format(c,unit)},differ=function(unit){return opts.calendary?end.hasSame(start,unit)?0:end.startOf(unit).diff(start.startOf(unit),unit).get(unit):end.diff(start,unit).get(unit)};if(opts.unit)return format(differ(opts.unit),opts.unit);for(var _iterator2=_createForOfIteratorHelperLoose(opts.units),_step2;!(_step2=_iterator2()).done;){var unit=_step2.value,count=differ(unit);if(1<=Math.abs(count))return format(count,unit)}return format(start>end?-0:0,opts.units[opts.units.length-1])}function friendlyDateTime(dateTimeish){if(DateTime.isDateTime(dateTimeish))return dateTimeish;if(dateTimeish&&dateTimeish.valueOf&&isNumber(dateTimeish.valueOf()))return DateTime.fromJSDate(dateTimeish);if(dateTimeish&&"object"==typeof dateTimeish)return DateTime.fromObject(dateTimeish);throw new InvalidArgumentError("Unknown datetime argument: "+dateTimeish+", of type "+typeof dateTimeish)}Object.defineProperty(exports,"__esModule",{value:!0});var LuxonError=function(_Error){function LuxonError(){return _Error.apply(this,arguments)||this}return _inheritsLoose(LuxonError,_Error),LuxonError}(_wrapNativeSuper(Error)),InvalidDateTimeError=function(_LuxonError){function InvalidDateTimeError(reason){return _LuxonError.call(this,"Invalid DateTime: "+reason.toMessage())||this}return _inheritsLoose(InvalidDateTimeError,_LuxonError),InvalidDateTimeError}(LuxonError),InvalidIntervalError=function(_LuxonError2){function InvalidIntervalError(reason){return _LuxonError2.call(this,"Invalid Interval: "+reason.toMessage())||this}return _inheritsLoose(InvalidIntervalError,_LuxonError2),InvalidIntervalError}(LuxonError),InvalidDurationError=function(_LuxonError3){function InvalidDurationError(reason){return _LuxonError3.call(this,"Invalid Duration: "+reason.toMessage())||this}return _inheritsLoose(InvalidDurationError,_LuxonError3),InvalidDurationError}(LuxonError),ConflictingSpecificationError=function(_LuxonError4){function ConflictingSpecificationError(){return _LuxonError4.apply(this,arguments)||this}return _inheritsLoose(ConflictingSpecificationError,_LuxonError4),ConflictingSpecificationError}(LuxonError),InvalidUnitError=function(_LuxonError5){function InvalidUnitError(unit){return _LuxonError5.call(this,"Invalid unit "+unit)||this}return _inheritsLoose(InvalidUnitError,_LuxonError5),InvalidUnitError}(LuxonError),InvalidArgumentError=function(_LuxonError6){function InvalidArgumentError(){return _LuxonError6.apply(this,arguments)||this}return _inheritsLoose(InvalidArgumentError,_LuxonError6),InvalidArgumentError}(LuxonError),ZoneIsAbstractError=function(_LuxonError7){function ZoneIsAbstractError(){return _LuxonError7.call(this,"Zone is an abstract class")||this}return _inheritsLoose(ZoneIsAbstractError,_LuxonError7),ZoneIsAbstractError}(LuxonError),n="numeric",s="short",l="long",DATE_SHORT={year:n,month:n,day:n},DATE_MED={year:n,month:s,day:n},DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s},DATE_FULL={year:n,month:l,day:n},DATE_HUGE={year:n,month:l,day:n,weekday:l},TIME_SIMPLE={hour:n,minute:n},TIME_WITH_SECONDS={hour:n,minute:n,second:n},TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s},TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l},TIME_24_SIMPLE={hour:n,minute:n,hour12:!1},TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hour12:!1},TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hour12:!1,timeZoneName:s},TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hour12:!1,timeZoneName:l},DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n},DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n},DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n},DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n},DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n},DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s},DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s},DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l},DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l},ianaRegex=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"],weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"],meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"],_macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS},Formatter=function(){function Formatter(locale,formatOpts){this.opts=formatOpts,this.loc=locale,this.systemLoc=null}Formatter.create=function(locale,opts){return void 0===opts&&(opts={}),new Formatter(locale,opts)},Formatter.parseFormat=function(fmt){for(var current=null,currentFull="",bracketed=!1,splits=[],i=0,c;i<fmt.length;i++)c=fmt.charAt(i),"'"===c?(0<currentFull.length&&splits.push({literal:bracketed,val:currentFull}),current=null,currentFull="",bracketed=!bracketed):bracketed?currentFull+=c:c===current?currentFull+=c:(0<currentFull.length&&splits.push({literal:!1,val:currentFull}),currentFull=c,current=c);return 0<currentFull.length&&splits.push({literal:bracketed,val:currentFull}),splits},Formatter.macroTokenToFormatOpts=function(token){return _macroTokenToFormatOpts[token]};var _proto=Formatter.prototype;return _proto.formatWithSystemDefault=function(dt,opts){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());var df=this.systemLoc.dtFormatter(dt,Object.assign({},this.opts,opts));return df.format()},_proto.formatDateTime=function(dt,opts){void 0===opts&&(opts={});var df=this.loc.dtFormatter(dt,Object.assign({},this.opts,opts));return df.format()},_proto.formatDateTimeParts=function(dt,opts){void 0===opts&&(opts={});var df=this.loc.dtFormatter(dt,Object.assign({},this.opts,opts));return df.formatToParts()},_proto.resolvedOptions=function(dt,opts){void 0===opts&&(opts={});var df=this.loc.dtFormatter(dt,Object.assign({},this.opts,opts));return df.resolvedOptions()},_proto.num=function(n,p){if(void 0===p&&(p=0),this.opts.forceSimple)return padStart(n,p);var opts=Object.assign({},this.opts);return 0<p&&(opts.padTo=p),this.loc.numberFormatter(opts).format(n)},_proto.formatDateTimeFromString=function(dt,fmt){var _this=this,knownEnglish="en"===this.loc.listingMode(),useDateTimeFormatter=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar&&hasFormatToParts(),string=function(opts,extract){return _this.loc.extract(dt,opts,extract)},formatOffset=function(opts){return dt.isOffsetFixed&&0===dt.offset&&opts.allowZ?"Z":dt.isValid?dt.zone.formatOffset(dt.ts,opts.format):""},meridiem=function(){return knownEnglish?meridiemForDateTime(dt):string({hour:"numeric",hour12:!0},"dayperiod")},month=function(length,standalone){return knownEnglish?monthForDateTime(dt,length):string(standalone?{month:length}:{month:length,day:"numeric"},"month")},weekday=function(length,standalone){return knownEnglish?weekdayForDateTime(dt,length):string(standalone?{weekday:length}:{weekday:length,month:"long",day:"numeric"},"weekday")},maybeMacro=function(token){var formatOpts=Formatter.macroTokenToFormatOpts(token);return formatOpts?_this.formatWithSystemDefault(dt,formatOpts):token},era=function(length){return knownEnglish?eraForDateTime(dt,length):string({era:length},"era")};return stringifyTokens(Formatter.parseFormat(fmt),function(token){return"S"===token?_this.num(dt.millisecond):"u"===token||"SSS"===token?_this.num(dt.millisecond,3):"s"===token?_this.num(dt.second):"ss"===token?_this.num(dt.second,2):"m"===token?_this.num(dt.minute):"mm"===token?_this.num(dt.minute,2):"h"===token?_this.num(0==dt.hour%12?12:dt.hour%12):"hh"===token?_this.num(0==dt.hour%12?12:dt.hour%12,2):"H"===token?_this.num(dt.hour):"HH"===token?_this.num(dt.hour,2):"Z"===token?formatOffset({format:"narrow",allowZ:_this.opts.allowZ}):"ZZ"===token?formatOffset({format:"short",allowZ:_this.opts.allowZ}):"ZZZ"===token?formatOffset({format:"techie",allowZ:_this.opts.allowZ}):"ZZZZ"===token?dt.zone.offsetName(dt.ts,{format:"short",locale:_this.loc.locale}):"ZZZZZ"===token?dt.zone.offsetName(dt.ts,{format:"long",locale:_this.loc.locale}):"z"===token?dt.zoneName:"a"===token?meridiem():"d"===token?useDateTimeFormatter?string({day:"numeric"},"day"):_this.num(dt.day):"dd"===token?useDateTimeFormatter?string({day:"2-digit"},"day"):_this.num(dt.day,2):"c"===token?_this.num(dt.weekday):"ccc"===token?weekday("short",!0):"cccc"===token?weekday("long",!0):"ccccc"===token?weekday("narrow",!0):"E"===token?_this.num(dt.weekday):"EEE"===token?weekday("short",!1):"EEEE"===token?weekday("long",!1):"EEEEE"===token?weekday("narrow",!1):"L"===token?useDateTimeFormatter?string({month:"numeric",day:"numeric"},"month"):_this.num(dt.month):"LL"===token?useDateTimeFormatter?string({month:"2-digit",day:"numeric"},"month"):_this.num(dt.month,2):"LLL"===token?month("short",!0):"LLLL"===token?month("long",!0):"LLLLL"===token?month("narrow",!0):"M"===token?useDateTimeFormatter?string({month:"numeric"},"month"):_this.num(dt.month):"MM"===token?useDateTimeFormatter?string({month:"2-digit"},"month"):_this.num(dt.month,2):"MMM"===token?month("short",!1):"MMMM"===token?month("long",!1):"MMMMM"===token?month("narrow",!1):"y"===token?useDateTimeFormatter?string({year:"numeric"},"year"):_this.num(dt.year):"yy"===token?useDateTimeFormatter?string({year:"2-digit"},"year"):_this.num(dt.year.toString().slice(-2),2):"yyyy"===token?useDateTimeFormatter?string({year:"numeric"},"year"):_this.num(dt.year,4):"yyyyyy"===token?useDateTimeFormatter?string({year:"numeric"},"year"):_this.num(dt.year,6):"G"===token?era("short"):"GG"===token?era("long"):"GGGGG"===token?era("narrow"):"kk"===token?_this.num(dt.weekYear.toString().slice(-2),2):"kkkk"===token?_this.num(dt.weekYear,4):"W"===token?_this.num(dt.weekNumber):"WW"===token?_this.num(dt.weekNumber,2):"o"===token?_this.num(dt.ordinal):"ooo"===token?_this.num(dt.ordinal,3):"q"===token?_this.num(dt.quarter):"qq"===token?_this.num(dt.quarter,2):"X"===token?_this.num(Math.floor(dt.ts/1e3)):"x"===token?_this.num(dt.ts):maybeMacro(token)})},_proto.formatDurationFromString=function(dur,fmt){var _this2=this,tokenToField=function(token){switch(token[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null;}},tokens=Formatter.parseFormat(fmt),realTokens=tokens.reduce(function(found,_ref){var literal=_ref.literal,val=_ref.val;return literal?found:found.concat(val)},[]),collapsed=dur.shiftTo.apply(dur,realTokens.map(tokenToField).filter(function(t){return t}));return stringifyTokens(tokens,function(lildur){return function(token){var mapped=tokenToField(token);return mapped?_this2.num(lildur.get(mapped),token.length):token}}(collapsed))},Formatter}(),Invalid=function(){function Invalid(reason,explanation){this.reason=reason,this.explanation=explanation}var _proto=Invalid.prototype;return _proto.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},Invalid}(),Zone=function(){function Zone(){}var _proto=Zone.prototype;return _proto.offsetName=function(){throw new ZoneIsAbstractError},_proto.formatOffset=function(){throw new ZoneIsAbstractError},_proto.offset=function(){throw new ZoneIsAbstractError},_proto.equals=function(){throw new ZoneIsAbstractError},_createClass(Zone,[{key:"type",get:function(){throw new ZoneIsAbstractError}},{key:"name",get:function(){throw new ZoneIsAbstractError}},{key:"universal",get:function(){throw new ZoneIsAbstractError}},{key:"isValid",get:function(){throw new ZoneIsAbstractError}}]),Zone}(),singleton=null,LocalZone=function(_Zone){function LocalZone(){return _Zone.apply(this,arguments)||this}_inheritsLoose(LocalZone,_Zone);var _proto=LocalZone.prototype;return _proto.offsetName=function(ts,_ref){var format=_ref.format,locale=_ref.locale;return parseZoneInfo(ts,format,locale)},_proto.formatOffset=function(ts,format){return formatOffset(this.offset(ts),format)},_proto.offset=function(ts){return-new Date(ts).getTimezoneOffset()},_proto.equals=function(otherZone){return"local"===otherZone.type},_createClass(LocalZone,[{key:"type",get:function(){return"local"}},{key:"name",get:function(){return hasIntl()?new Intl.DateTimeFormat().resolvedOptions().timeZone:"local"}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===singleton&&(singleton=new LocalZone),singleton}}]),LocalZone}(Zone),matchingRegex=RegExp("^"+ianaRegex.source+"$"),dtfCache={},typeToPos={year:0,month:1,day:2,hour:3,minute:4,second:5},ianaZoneCache={},IANAZone=function(_Zone){function IANAZone(name){var _this;return _this=_Zone.call(this)||this,_this.zoneName=name,_this.valid=IANAZone.isValidZone(name),_this}_inheritsLoose(IANAZone,_Zone),IANAZone.create=function(name){return ianaZoneCache[name]||(ianaZoneCache[name]=new IANAZone(name)),ianaZoneCache[name]},IANAZone.resetCache=function(){ianaZoneCache={},dtfCache={}},IANAZone.isValidSpecifier=function(s){return!!(s&&s.match(matchingRegex))},IANAZone.isValidZone=function(zone){try{return new Intl.DateTimeFormat("en-US",{timeZone:zone}).format(),!0}catch(e){return!1}},IANAZone.parseGMTOffset=function(specifier){if(specifier){var match=specifier.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i);if(match)return-60*parseInt(match[1])}return null};var _proto=IANAZone.prototype;return _proto.offsetName=function(ts,_ref){var format=_ref.format,locale=_ref.locale;return parseZoneInfo(ts,format,locale,this.name)},_proto.formatOffset=function(ts,format){return formatOffset(this.offset(ts),format)},_proto.offset=function(ts){var date=new Date(ts);if(isNaN(date))return NaN;var dtf=makeDTF(this.name),_ref2=dtf.formatToParts?partsOffset(dtf,date):hackyOffset(dtf,date),year=_ref2[0],month=_ref2[1],day=_ref2[2],hour=_ref2[3],minute=_ref2[4],second=_ref2[5],adjustedHour=24===hour?0:hour,asUTC=objToLocalTS({year:year,month:month,day:day,hour:adjustedHour,minute:minute,second:second,millisecond:0}),asTS=+date,over=asTS%1e3;return asTS-=0<=over?over:1e3+over,(asUTC-asTS)/60000},_proto.equals=function(otherZone){return"iana"===otherZone.type&&otherZone.name===this.name},_createClass(IANAZone,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),IANAZone}(Zone),singleton$1=null,FixedOffsetZone=function(_Zone){function FixedOffsetZone(offset){var _this;return _this=_Zone.call(this)||this,_this.fixed=offset,_this}_inheritsLoose(FixedOffsetZone,_Zone),FixedOffsetZone.instance=function(offset){return 0===offset?FixedOffsetZone.utcInstance:new FixedOffsetZone(offset)},FixedOffsetZone.parseSpecifier=function(s){if(s){var r=s.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new FixedOffsetZone(signedOffset(r[1],r[2]))}return null},_createClass(FixedOffsetZone,null,[{key:"utcInstance",get:function(){return null===singleton$1&&(singleton$1=new FixedOffsetZone(0)),singleton$1}}]);var _proto=FixedOffsetZone.prototype;return _proto.offsetName=function(){return this.name},_proto.formatOffset=function(ts,format){return formatOffset(this.fixed,format)},_proto.offset=function(){return this.fixed},_proto.equals=function(otherZone){return"fixed"===otherZone.type&&otherZone.fixed===this.fixed},_createClass(FixedOffsetZone,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+formatOffset(this.fixed,"narrow")}},{key:"universal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}]),FixedOffsetZone}(Zone),InvalidZone=function(_Zone){function InvalidZone(zoneName){var _this;return _this=_Zone.call(this)||this,_this.zoneName=zoneName,_this}_inheritsLoose(InvalidZone,_Zone);var _proto=InvalidZone.prototype;return _proto.offsetName=function(){return null},_proto.formatOffset=function(){return""},_proto.offset=function(){return NaN},_proto.equals=function(){return!1},_createClass(InvalidZone,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),InvalidZone}(Zone),now=function(){return Date.now()},defaultZone=null,defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,throwOnInvalid=!1,Settings=function(){function Settings(){}return Settings.resetCaches=function(){Locale.resetCache(),IANAZone.resetCache()},_createClass(Settings,null,[{key:"now",get:function(){return now},set:function(n){now=n}},{key:"defaultZoneName",get:function(){return Settings.defaultZone.name},set:function(z){defaultZone=z?normalizeZone(z):null}},{key:"defaultZone",get:function(){return defaultZone||LocalZone.instance}},{key:"defaultLocale",get:function(){return defaultLocale},set:function(locale){defaultLocale=locale}},{key:"defaultNumberingSystem",get:function(){return defaultNumberingSystem},set:function(numberingSystem){defaultNumberingSystem=numberingSystem}},{key:"defaultOutputCalendar",get:function(){return defaultOutputCalendar},set:function(outputCalendar){defaultOutputCalendar=outputCalendar}},{key:"throwOnInvalid",get:function(){return throwOnInvalid},set:function(t){throwOnInvalid=t}}]),Settings}(),intlDTCache={},intlNumCache={},intlRelCache={},sysLocaleCache=null,PolyNumberFormatter=function(){function PolyNumberFormatter(intl,forceSimple,opts){if(this.padTo=opts.padTo||0,this.floor=opts.floor||!1,!forceSimple&&hasIntl()){var intlOpts={useGrouping:!1};0<opts.padTo&&(intlOpts.minimumIntegerDigits=opts.padTo),this.inf=getCachedINF(intl,intlOpts)}}var _proto=PolyNumberFormatter.prototype;return _proto.format=function(i){if(this.inf){var fixed=this.floor?Math.floor(i):i;return this.inf.format(fixed)}var _fixed=this.floor?Math.floor(i):roundTo(i,3);return padStart(_fixed,this.padTo)},PolyNumberFormatter}(),PolyDateFormatter=function(){function PolyDateFormatter(dt,intl,opts){this.opts=opts,this.hasIntl=hasIntl();var z;if(dt.zone.universal&&this.hasIntl){var gmtOffset=-1*(dt.offset/60),offsetZ=0<=gmtOffset?"Etc/GMT+"+gmtOffset:"Etc/GMT"+gmtOffset,isOffsetZoneSupported=IANAZone.isValidZone(offsetZ);0!==dt.offset&&isOffsetZoneSupported?(z=offsetZ,this.dt=dt):(z="UTC",this.dt=opts.timeZoneName?dt:0===dt.offset?dt:DateTime.fromMillis(dt.ts+1e3*(60*dt.offset)))}else"local"===dt.zone.type?this.dt=dt:(this.dt=dt,z=dt.zone.name);if(this.hasIntl){var intlOpts=Object.assign({},this.opts);z&&(intlOpts.timeZone=z),this.dtf=getCachedDTF(intl,intlOpts)}}var _proto2=PolyDateFormatter.prototype;return _proto2.format=function(){if(this.hasIntl)return this.dtf.format(this.dt.toJSDate());var tokenFormat=formatString(this.opts),loc=Locale.create("en-US");return Formatter.create(loc).formatDateTimeFromString(this.dt,tokenFormat)},_proto2.formatToParts=function(){return this.hasIntl&&hasFormatToParts()?this.dtf.formatToParts(this.dt.toJSDate()):[]},_proto2.resolvedOptions=function(){return this.hasIntl?this.dtf.resolvedOptions():{locale:"en-US",numberingSystem:"latn",outputCalendar:"gregory"}},PolyDateFormatter}(),PolyRelFormatter=function(){function PolyRelFormatter(intl,isEnglish,opts){this.opts=Object.assign({style:"long"},opts),!isEnglish&&hasRelative()&&(this.rtf=getCachedRTF(intl,opts))}var _proto3=PolyRelFormatter.prototype;return _proto3.format=function(count,unit){return this.rtf?this.rtf.format(count,unit):formatRelativeTime(unit,count,this.opts.numeric,"long"!==this.opts.style)},_proto3.formatToParts=function(count,unit){return this.rtf?this.rtf.formatToParts(count,unit):[]},PolyRelFormatter}(),Locale=function(){function Locale(locale,numbering,outputCalendar,specifiedLocale){var _parseLocaleString=parseLocaleString(locale),parsedLocale=_parseLocaleString[0],parsedNumberingSystem=_parseLocaleString[1],parsedOutputCalendar=_parseLocaleString[2];this.locale=parsedLocale,this.numberingSystem=numbering||parsedNumberingSystem||null,this.outputCalendar=outputCalendar||parsedOutputCalendar||null,this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=specifiedLocale,this.fastNumbersCached=null}Locale.fromOpts=function(opts){return Locale.create(opts.locale,opts.numberingSystem,opts.outputCalendar,opts.defaultToEN)},Locale.create=function(locale,numberingSystem,outputCalendar,defaultToEN){void 0===defaultToEN&&(defaultToEN=!1);var specifiedLocale=locale||Settings.defaultLocale,localeR=specifiedLocale||(defaultToEN?"en-US":systemLocale()),numberingSystemR=numberingSystem||Settings.defaultNumberingSystem,outputCalendarR=outputCalendar||Settings.defaultOutputCalendar;return new Locale(localeR,numberingSystemR,outputCalendarR,specifiedLocale)},Locale.resetCache=function(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}},Locale.fromObject=function(_temp){var _ref=void 0===_temp?{}:_temp,locale=_ref.locale,numberingSystem=_ref.numberingSystem,outputCalendar=_ref.outputCalendar;return Locale.create(locale,numberingSystem,outputCalendar)};var _proto4=Locale.prototype;return _proto4.listingMode=function(defaultOK){void 0===defaultOK&&(defaultOK=!0);var intl=hasIntl(),hasFTP=intl&&hasFormatToParts(),isActuallyEn=this.isEnglish(),hasNoWeirdness=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return hasFTP||isActuallyEn&&hasNoWeirdness||defaultOK?!hasFTP||isActuallyEn&&hasNoWeirdness?"en":"intl":"error"},_proto4.clone=function(alts){return alts&&0!==Object.getOwnPropertyNames(alts).length?Locale.create(alts.locale||this.specifiedLocale,alts.numberingSystem||this.numberingSystem,alts.outputCalendar||this.outputCalendar,alts.defaultToEN||!1):this},_proto4.redefaultToEN=function(alts){return void 0===alts&&(alts={}),this.clone(Object.assign({},alts,{defaultToEN:!0}))},_proto4.redefaultToSystem=function(alts){return void 0===alts&&(alts={}),this.clone(Object.assign({},alts,{defaultToEN:!1}))},_proto4.months=function(length,format,defaultOK){var _this=this;return void 0===format&&(format=!1),void 0===defaultOK&&(defaultOK=!0),listStuff(this,length,defaultOK,months,function(){var intl=format?{month:length,day:"numeric"}:{month:length},formatStr=format?"format":"standalone";return _this.monthsCache[formatStr][length]||(_this.monthsCache[formatStr][length]=mapMonths(function(dt){return _this.extract(dt,intl,"month")})),_this.monthsCache[formatStr][length]})},_proto4.weekdays=function(length,format,defaultOK){var _this2=this;return void 0===format&&(format=!1),void 0===defaultOK&&(defaultOK=!0),listStuff(this,length,defaultOK,weekdays,function(){var intl=format?{weekday:length,year:"numeric",month:"long",day:"numeric"}:{weekday:length},formatStr=format?"format":"standalone";return _this2.weekdaysCache[formatStr][length]||(_this2.weekdaysCache[formatStr][length]=mapWeekdays(function(dt){return _this2.extract(dt,intl,"weekday")})),_this2.weekdaysCache[formatStr][length]})},_proto4.meridiems=function(defaultOK){var _this3=this;return void 0===defaultOK&&(defaultOK=!0),listStuff(this,void 0,defaultOK,function(){return meridiems},function(){if(!_this3.meridiemCache){var intl={hour:"numeric",hour12:!0};_this3.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(function(dt){return _this3.extract(dt,intl,"dayperiod")})}return _this3.meridiemCache})},_proto4.eras=function(length,defaultOK){var _this4=this;return void 0===defaultOK&&(defaultOK=!0),listStuff(this,length,defaultOK,eras,function(){var intl={era:length};return _this4.eraCache[length]||(_this4.eraCache[length]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(function(dt){return _this4.extract(dt,intl,"era")})),_this4.eraCache[length]})},_proto4.extract=function(dt,intlOpts,field){var df=this.dtFormatter(dt,intlOpts),results=df.formatToParts(),matching=results.find(function(m){return m.type.toLowerCase()===field});return matching?matching.value:null},_proto4.numberFormatter=function(opts){return void 0===opts&&(opts={}),new PolyNumberFormatter(this.intl,opts.forceSimple||this.fastNumbers,opts)},_proto4.dtFormatter=function(dt,intlOpts){return void 0===intlOpts&&(intlOpts={}),new PolyDateFormatter(dt,this.intl,intlOpts)},_proto4.relFormatter=function(opts){return void 0===opts&&(opts={}),new PolyRelFormatter(this.intl,this.isEnglish(),opts)},_proto4.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||hasIntl()&&new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},_proto4.equals=function(other){return this.locale===other.locale&&this.numberingSystem===other.numberingSystem&&this.outputCalendar===other.outputCalendar},_createClass(Locale,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=supportsFastNumbers(this)),this.fastNumbersCached}}]),Locale}(),offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(""+isoTimeBaseRegex.source+offsetRegex.source+"?"),isoTimeExtensionRegex=RegExp("(?:T"+isoTimeRegex.source+")?"),extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlTimeRegex=RegExp(isoTimeBaseRegex.source+" ?(?:"+offsetRegex.source+"|("+ianaRegex.source+"))?"),sqlTimeExtensionRegex=RegExp("(?: "+sqlTimeRegex.source+")?"),isoTimeOnly=RegExp("^T?"+isoTimeBaseRegex.source+"$"),isoDuration=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,obsOffsets={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,isoYmdWithTimeExtensionRegex=combineRegexes(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(/(\d{4})-?(\d{3})/,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset),extractISOTimeOnly=combineExtractors(extractISOTime),sqlYmdWithTimeExtensionRegex=combineRegexes(/(\d{4})-(\d\d)-(\d\d)/,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOYmdTimeOffsetAndIANAZone=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone),lowOrderMatrix={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:604800000},days:{hours:24,minutes:1440,seconds:86400,milliseconds:86400000},hours:{minutes:60,seconds:3600,milliseconds:3600000},minutes:{seconds:60,milliseconds:60000},seconds:{milliseconds:1e3}},casualMatrix=Object.assign({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536000,milliseconds:31536000000},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:7862400000},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592000,milliseconds:2592000000}},lowOrderMatrix),daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix=Object.assign({years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:24*daysInYearAccurate,minutes:60*(24*daysInYearAccurate),seconds:60*(60*(24*daysInYearAccurate)),milliseconds:1e3*(60*(60*(24*daysInYearAccurate)))},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:24*daysInYearAccurate/4,minutes:60*(24*daysInYearAccurate)/4,seconds:60*(60*(24*daysInYearAccurate))/4,milliseconds:1e3*(60*(60*(24*daysInYearAccurate)))/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:24*daysInMonthAccurate,minutes:60*(24*daysInMonthAccurate),seconds:60*(60*(24*daysInMonthAccurate)),milliseconds:1e3*(60*(60*(24*daysInMonthAccurate)))}},lowOrderMatrix),orderedUnits=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits.slice(0).reverse(),Duration=function(){function Duration(config){var accurate="longterm"===config.conversionAccuracy||!1;this.values=config.values,this.loc=config.loc||Locale.create(),this.conversionAccuracy=accurate?"longterm":"casual",this.invalid=config.invalid||null,this.matrix=accurate?accurateMatrix:casualMatrix,this.isLuxonDuration=!0}Duration.fromMillis=function(count,opts){return Duration.fromObject(Object.assign({milliseconds:count},opts))},Duration.fromObject=function(obj){if(null==obj||"object"!=typeof obj)throw new InvalidArgumentError("Duration.fromObject: argument expected to be an object, got "+(null===obj?"null":typeof obj));return new Duration({values:normalizeObject(obj,Duration.normalizeUnit,["locale","numberingSystem","conversionAccuracy","zone"]),loc:Locale.fromObject(obj),conversionAccuracy:obj.conversionAccuracy})},Duration.fromISO=function(text,opts){var _parseISODuration=parseISODuration(text),parsed=_parseISODuration[0];if(parsed){var obj=Object.assign(parsed,opts);return Duration.fromObject(obj)}return Duration.invalid("unparsable","the input \""+text+"\" can't be parsed as ISO 8601")},Duration.fromISOTime=function(text,opts){var _parseISOTimeOnly=parseISOTimeOnly(text),parsed=_parseISOTimeOnly[0];if(parsed){var obj=Object.assign(parsed,opts);return Duration.fromObject(obj)}return Duration.invalid("unparsable","the input \""+text+"\" can't be parsed as ISO 8601")},Duration.invalid=function invalid(reason,explanation){if(void 0===explanation&&(explanation=null),!reason)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");var invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid)throw new InvalidDurationError(invalid);else return new Duration({invalid:invalid})},Duration.normalizeUnit=function(unit){var normalized={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[unit?unit.toLowerCase():unit];if(!normalized)throw new InvalidUnitError(unit);return normalized},Duration.isDuration=function(o){return o&&o.isLuxonDuration||!1};var _proto=Duration.prototype;return _proto.toFormat=function(fmt,opts){void 0===opts&&(opts={});var fmtOpts=Object.assign({},opts,{floor:!1!==opts.round&&!1!==opts.floor});return this.isValid?Formatter.create(this.loc,fmtOpts).formatDurationFromString(this,fmt):"Invalid Duration"},_proto.toObject=function(opts){if(void 0===opts&&(opts={}),!this.isValid)return{};var base=Object.assign({},this.values);return opts.includeConfig&&(base.conversionAccuracy=this.conversionAccuracy,base.numberingSystem=this.loc.numberingSystem,base.locale=this.loc.locale),base},_proto.toISO=function(){if(!this.isValid)return null;var s="P";return 0!==this.years&&(s+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(s+=this.months+3*this.quarters+"M"),0!==this.weeks&&(s+=this.weeks+"W"),0!==this.days&&(s+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(s+="T"),0!==this.hours&&(s+=this.hours+"H"),0!==this.minutes&&(s+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(s+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),"P"==s&&(s+="T0S"),s},_proto.toISOTime=function(opts){if(void 0===opts&&(opts={}),!this.isValid)return null;var millis=this.toMillis();if(0>millis||864e5<=millis)return null;opts=Object.assign({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},opts);var value=this.shiftTo("hours","minutes","seconds","milliseconds"),fmt="basic"===opts.format?"hhmm":"hh:mm";opts.suppressSeconds&&0===value.seconds&&0===value.milliseconds||(fmt+="basic"===opts.format?"ss":":ss",(!opts.suppressMilliseconds||0!==value.milliseconds)&&(fmt+=".SSS"));var str=value.toFormat(fmt);return opts.includePrefix&&(str="T"+str),str},_proto.toJSON=function(){return this.toISO()},_proto.toString=function(){return this.toISO()},_proto.toMillis=function(){return this.as("milliseconds")},_proto.valueOf=function(){return this.toMillis()},_proto.plus=function(duration){if(!this.isValid)return this;for(var dur=friendlyDuration(duration),result={},_iterator=_createForOfIteratorHelperLoose(orderedUnits),_step,k;!(_step=_iterator()).done;)k=_step.value,(hasOwnProperty(dur.values,k)||hasOwnProperty(this.values,k))&&(result[k]=dur.get(k)+this.get(k));return clone(this,{values:result},!0)},_proto.minus=function(duration){if(!this.isValid)return this;var dur=friendlyDuration(duration);return this.plus(dur.negate())},_proto.mapUnits=function(fn){if(!this.isValid)return this;for(var result={},_i=0,_Object$keys=Object.keys(this.values),k;_i<_Object$keys.length;_i++)k=_Object$keys[_i],result[k]=asNumber(fn(this.values[k],k));return clone(this,{values:result},!0)},_proto.get=function(unit){return this[Duration.normalizeUnit(unit)]},_proto.set=function(values){if(!this.isValid)return this;var mixed=Object.assign(this.values,normalizeObject(values,Duration.normalizeUnit,[]));return clone(this,{values:mixed})},_proto.reconfigure=function(_temp){var _ref=void 0===_temp?{}:_temp,locale=_ref.locale,numberingSystem=_ref.numberingSystem,conversionAccuracy=_ref.conversionAccuracy,loc=this.loc.clone({locale:locale,numberingSystem:numberingSystem}),opts={loc:loc};return conversionAccuracy&&(opts.conversionAccuracy=conversionAccuracy),clone(this,opts)},_proto.as=function(unit){return this.isValid?this.shiftTo(unit).get(unit):NaN},_proto.normalize=function(){if(!this.isValid)return this;var vals=this.toObject();return normalizeValues(this.matrix,vals),clone(this,{values:vals},!0)},_proto.shiftTo=function(){for(var _len=arguments.length,units=Array(_len),_key=0;_key<_len;_key++)units[_key]=arguments[_key];if(!this.isValid)return this;if(0===units.length)return this;units=units.map(function(u){return Duration.normalizeUnit(u)});for(var built={},accumulated={},vals=this.toObject(),_iterator2=_createForOfIteratorHelperLoose(orderedUnits),lastUnit,_step2,k;!(_step2=_iterator2()).done;)if(k=_step2.value,0<=units.indexOf(k)){lastUnit=k;var own=0;for(var ak in accumulated)own+=this.matrix[ak][k]*accumulated[ak],accumulated[ak]=0;isNumber(vals[k])&&(own+=vals[k]);var i=Math.trunc(own);for(var down in built[k]=i,accumulated[k]=own-i,vals)orderedUnits.indexOf(down)>orderedUnits.indexOf(k)&&convert(this.matrix,vals,down,built,k)}else isNumber(vals[k])&&(accumulated[k]=vals[k]);for(var key in accumulated)0!==accumulated[key]&&(built[lastUnit]+=key===lastUnit?accumulated[key]:accumulated[key]/this.matrix[lastUnit][key]);return clone(this,{values:built},!0).normalize()},_proto.negate=function(){if(!this.isValid)return this;for(var negated={},_i2=0,_Object$keys2=Object.keys(this.values),k;_i2<_Object$keys2.length;_i2++)k=_Object$keys2[_i2],negated[k]=-this.values[k];return clone(this,{values:negated},!0)},_proto.equals=function(other){function eq(v1,v2){return void 0===v1||0===v1?void 0===v2||0===v2:v1===v2}if(!this.isValid||!other.isValid)return!1;if(!this.loc.equals(other.loc))return!1;for(var _iterator3=_createForOfIteratorHelperLoose(orderedUnits),_step3,u;!(_step3=_iterator3()).done;)if(u=_step3.value,!eq(this.values[u],other.values[u]))return!1;return!0},_createClass(Duration,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),Duration}(),INVALID$1="Invalid Interval",Interval=function(){function Interval(config){this.s=config.start,this.e=config.end,this.invalid=config.invalid||null,this.isLuxonInterval=!0}Interval.invalid=function invalid(reason,explanation){if(void 0===explanation&&(explanation=null),!reason)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");var invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid)throw new InvalidIntervalError(invalid);else return new Interval({invalid:invalid})},Interval.fromDateTimes=function(start,end){var builtStart=friendlyDateTime(start),builtEnd=friendlyDateTime(end),validateError=validateStartEnd(builtStart,builtEnd);return null==validateError?new Interval({start:builtStart,end:builtEnd}):validateError},Interval.after=function(start,duration){var dur=friendlyDuration(duration),dt=friendlyDateTime(start);return Interval.fromDateTimes(dt,dt.plus(dur))},Interval.before=function(end,duration){var dur=friendlyDuration(duration),dt=friendlyDateTime(end);return Interval.fromDateTimes(dt.minus(dur),dt)},Interval.fromISO=function(text,opts){var _split=(text||"").split("/",2),s=_split[0],e=_split[1];if(s&&e){var start,startIsValid;try{start=DateTime.fromISO(s,opts),startIsValid=start.isValid}catch(e){startIsValid=!1}var end,endIsValid;try{end=DateTime.fromISO(e,opts),endIsValid=end.isValid}catch(e){endIsValid=!1}if(startIsValid&&endIsValid)return Interval.fromDateTimes(start,end);if(startIsValid){var dur=Duration.fromISO(e,opts);if(dur.isValid)return Interval.after(start,dur)}else if(endIsValid){var _dur=Duration.fromISO(s,opts);if(_dur.isValid)return Interval.before(end,_dur)}}return Interval.invalid("unparsable","the input \""+text+"\" can't be parsed as ISO 8601")},Interval.isInterval=function(o){return o&&o.isLuxonInterval||!1};var _proto=Interval.prototype;return _proto.length=function(unit){return void 0===unit&&(unit="milliseconds"),this.isValid?this.toDuration.apply(this,[unit]).get(unit):NaN},_proto.count=function(unit){if(void 0===unit&&(unit="milliseconds"),!this.isValid)return NaN;var start=this.start.startOf(unit),end=this.end.startOf(unit);return Math.floor(end.diff(start,unit).get(unit))+1},_proto.hasSame=function(unit){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,unit))},_proto.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},_proto.isAfter=function(dateTime){return!!this.isValid&&this.s>dateTime},_proto.isBefore=function(dateTime){return!!this.isValid&&this.e<=dateTime},_proto.contains=function(dateTime){return!!this.isValid&&this.s<=dateTime&&this.e>dateTime},_proto.set=function(_temp){var _ref=void 0===_temp?{}:_temp,start=_ref.start,end=_ref.end;return this.isValid?Interval.fromDateTimes(start||this.s,end||this.e):this},_proto.splitAt=function(){var _this=this;if(!this.isValid)return[];for(var _len=arguments.length,dateTimes=Array(_len),_key=0;_key<_len;_key++)dateTimes[_key]=arguments[_key];for(var sorted=dateTimes.map(friendlyDateTime).filter(function(d){return _this.contains(d)}).sort(),results=[],s=this.s,i=0;s<this.e;){var added=sorted[i]||this.e,next=+added>+this.e?this.e:added;results.push(Interval.fromDateTimes(s,next)),s=next,i+=1}return results},_proto.splitBy=function(duration){var dur=friendlyDuration(duration);if(!this.isValid||!dur.isValid||0===dur.as("milliseconds"))return[];for(var s=this.s,idx=1,results=[],next,added;s<this.e;)added=this.start.plus(dur.mapUnits(function(x){return x*idx})),next=+added>+this.e?this.e:added,results.push(Interval.fromDateTimes(s,next)),s=next,idx+=1;return results},_proto.divideEqually=function(numberOfParts){return this.isValid?this.splitBy(this.length()/numberOfParts).slice(0,numberOfParts):[]},_proto.overlaps=function(other){return this.e>other.s&&this.s<other.e},_proto.abutsStart=function(other){return!!this.isValid&&+this.e==+other.s},_proto.abutsEnd=function(other){return!!this.isValid&&+other.e==+this.s},_proto.engulfs=function(other){return!!this.isValid&&this.s<=other.s&&this.e>=other.e},_proto.equals=function(other){return!!(this.isValid&&other.isValid)&&this.s.equals(other.s)&&this.e.equals(other.e)},_proto.intersection=function(other){if(!this.isValid)return this;var s=this.s>other.s?this.s:other.s,e=this.e<other.e?this.e:other.e;return s>=e?null:Interval.fromDateTimes(s,e)},_proto.union=function(other){if(!this.isValid)return this;var s=this.s<other.s?this.s:other.s,e=this.e>other.e?this.e:other.e;return Interval.fromDateTimes(s,e)},Interval.merge=function(intervals){var _intervals$sort$reduc=intervals.sort(function(a,b){return a.s-b.s}).reduce(function(_ref2,item){var sofar=_ref2[0],current=_ref2[1];return current?current.overlaps(item)||current.abutsStart(item)?[sofar,current.union(item)]:[sofar.concat([current]),item]:[sofar,item]},[[],null]),found=_intervals$sort$reduc[0],final=_intervals$sort$reduc[1];return final&&found.push(final),found},Interval.xor=function(intervals){for(var start=null,currentCount=0,results=[],ends=intervals.map(function(i){return[{time:i.s,type:"s"},{time:i.e,type:"e"}]}),flattened=(_Array$prototype=Array.prototype).concat.apply(_Array$prototype,ends),arr=flattened.sort(function(a,b){return a.time-b.time}),_iterator=_createForOfIteratorHelperLoose(arr),_Array$prototype,_step,i;!(_step=_iterator()).done;)i=_step.value,currentCount+="s"===i.type?1:-1,1===currentCount?start=i.time:(start&&+start!=+i.time&&results.push(Interval.fromDateTimes(start,i.time)),start=null);return Interval.merge(results)},_proto.difference=function(){for(var _this2=this,_len2=arguments.length,intervals=Array(_len2),_key2=0;_key2<_len2;_key2++)intervals[_key2]=arguments[_key2];return Interval.xor([this].concat(intervals)).map(function(i){return _this2.intersection(i)}).filter(function(i){return i&&!i.isEmpty()})},_proto.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":INVALID$1},_proto.toISO=function(opts){return this.isValid?this.s.toISO(opts)+"/"+this.e.toISO(opts):INVALID$1},_proto.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():INVALID$1},_proto.toISOTime=function(opts){return this.isValid?this.s.toISOTime(opts)+"/"+this.e.toISOTime(opts):INVALID$1},_proto.toFormat=function(dateFormat,_temp2){var _ref3=void 0===_temp2?{}:_temp2,_ref3$separator=_ref3.separator,separator=void 0===_ref3$separator?" \u2013 ":_ref3$separator;return this.isValid?""+this.s.toFormat(dateFormat)+separator+this.e.toFormat(dateFormat):INVALID$1},_proto.toDuration=function(unit,opts){return this.isValid?this.e.diff(this.s,unit,opts):Duration.invalid(this.invalidReason)},_proto.mapEndpoints=function(mapFn){return Interval.fromDateTimes(mapFn(this.s),mapFn(this.e))},_createClass(Interval,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),Interval}(),Info=function(){function Info(){}return Info.hasDST=function(zone){void 0===zone&&(zone=Settings.defaultZone);var proto=DateTime.now().setZone(zone).set({month:12});return!zone.universal&&proto.offset!==proto.set({month:6}).offset},Info.isValidIANAZone=function(zone){return IANAZone.isValidSpecifier(zone)&&IANAZone.isValidZone(zone)},Info.normalizeZone=function(input){return normalizeZone(input,Settings.defaultZone)},Info.months=function(length,_temp){void 0===length&&(length="long");var _ref=void 0===_temp?{}:_temp,_ref$locale=_ref.locale,locale=void 0===_ref$locale?null:_ref$locale,_ref$numberingSystem=_ref.numberingSystem,numberingSystem=void 0===_ref$numberingSystem?null:_ref$numberingSystem,_ref$locObj=_ref.locObj,locObj=void 0===_ref$locObj?null:_ref$locObj,_ref$outputCalendar=_ref.outputCalendar,outputCalendar=void 0===_ref$outputCalendar?"gregory":_ref$outputCalendar;return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length)},Info.monthsFormat=function(length,_temp2){void 0===length&&(length="long");var _ref2=void 0===_temp2?{}:_temp2,_ref2$locale=_ref2.locale,locale=void 0===_ref2$locale?null:_ref2$locale,_ref2$numberingSystem=_ref2.numberingSystem,numberingSystem=void 0===_ref2$numberingSystem?null:_ref2$numberingSystem,_ref2$locObj=_ref2.locObj,locObj=void 0===_ref2$locObj?null:_ref2$locObj,_ref2$outputCalendar=_ref2.outputCalendar,outputCalendar=void 0===_ref2$outputCalendar?"gregory":_ref2$outputCalendar;return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length,!0)},Info.weekdays=function(length,_temp3){void 0===length&&(length="long");var _ref3=void 0===_temp3?{}:_temp3,_ref3$locale=_ref3.locale,locale=void 0===_ref3$locale?null:_ref3$locale,_ref3$numberingSystem=_ref3.numberingSystem,numberingSystem=void 0===_ref3$numberingSystem?null:_ref3$numberingSystem,_ref3$locObj=_ref3.locObj,locObj=void 0===_ref3$locObj?null:_ref3$locObj;return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length)},Info.weekdaysFormat=function(length,_temp4){void 0===length&&(length="long");var _ref4=void 0===_temp4?{}:_temp4,_ref4$locale=_ref4.locale,locale=void 0===_ref4$locale?null:_ref4$locale,_ref4$numberingSystem=_ref4.numberingSystem,numberingSystem=void 0===_ref4$numberingSystem?null:_ref4$numberingSystem,_ref4$locObj=_ref4.locObj,locObj=void 0===_ref4$locObj?null:_ref4$locObj;return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length,!0)},Info.meridiems=function(_temp5){var _ref5=void 0===_temp5?{}:_temp5,_ref5$locale=_ref5.locale,locale=void 0===_ref5$locale?null:_ref5$locale;return Locale.create(locale).meridiems()},Info.eras=function(length,_temp6){void 0===length&&(length="short");var _ref6=void 0===_temp6?{}:_temp6,_ref6$locale=_ref6.locale,locale=void 0===_ref6$locale?null:_ref6$locale;return Locale.create(locale,null,"gregory").eras(length)},Info.features=function(){var intl=!1,intlTokens=!1,zones=!1,relative=!1;if(hasIntl()){intl=!0,intlTokens=hasFormatToParts(),relative=hasRelative();try{zones="America/New_York"===new Intl.DateTimeFormat("en",{timeZone:"America/New_York"}).resolvedOptions().timeZone}catch(e){zones=!1}}return{intl:intl,intlTokens:intlTokens,zones:zones,relative:relative}},Info}(),numberingSystems={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split(""),NBSP=String.fromCharCode(160),spaceOrNBSPRegExp=new RegExp("( |"+NBSP+")","g"),partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},dummyDateTimeCache=null,nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335],INVALID$2="Invalid DateTime",MAX_DATE=864e13,defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits$1=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"],DateTime=function(){function DateTime(config){var zone=config.zone||Settings.defaultZone,invalid=config.invalid||(Number.isNaN(config.ts)?new Invalid("invalid input"):null)||(zone.isValid?null:unsupportedZone(zone));this.ts=isUndefined(config.ts)?Settings.now():config.ts;var c=null,o=null;if(!invalid){var unchanged=config.old&&config.old.ts===this.ts&&config.old.zone.equals(zone);if(unchanged){var _ref2=[config.old.c,config.old.o];c=_ref2[0],o=_ref2[1]}else{var ot=zone.offset(this.ts);c=tsToObj(this.ts,ot),invalid=Number.isNaN(c.year)?new Invalid("invalid input"):null,c=invalid?null:c,o=invalid?null:ot}}this._zone=zone,this.loc=config.loc||Locale.create(),this.invalid=invalid,this.weekData=null,this.c=c,this.o=o,this.isLuxonDateTime=!0}DateTime.now=function(){return new DateTime({})},DateTime.local=function(year,month,day,hour,minute,second,millisecond){return isUndefined(year)?DateTime.now():quickDT({year:year,month:month,day:day,hour:hour,minute:minute,second:second,millisecond:millisecond},Settings.defaultZone)},DateTime.utc=function(year,month,day,hour,minute,second,millisecond){return isUndefined(year)?new DateTime({ts:Settings.now(),zone:FixedOffsetZone.utcInstance}):quickDT({year:year,month:month,day:day,hour:hour,minute:minute,second:second,millisecond:millisecond},FixedOffsetZone.utcInstance)},DateTime.fromJSDate=function(date,options){void 0===options&&(options={});var ts=isDate(date)?date.valueOf():NaN;if(Number.isNaN(ts))return DateTime.invalid("invalid input");var zoneToUse=normalizeZone(options.zone,Settings.defaultZone);return zoneToUse.isValid?new DateTime({ts:ts,zone:zoneToUse,loc:Locale.fromObject(options)}):DateTime.invalid(unsupportedZone(zoneToUse))},DateTime.fromMillis=function(milliseconds,options){if(void 0===options&&(options={}),!isNumber(milliseconds))throw new InvalidArgumentError("fromMillis requires a numerical input, but received a "+typeof milliseconds+" with value "+milliseconds);else return milliseconds<-MAX_DATE||milliseconds>MAX_DATE?DateTime.invalid("Timestamp out of range"):new DateTime({ts:milliseconds,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)})},DateTime.fromSeconds=function(seconds,options){if(void 0===options&&(options={}),!isNumber(seconds))throw new InvalidArgumentError("fromSeconds requires a numerical input");else return new DateTime({ts:1e3*seconds,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)})},DateTime.fromObject=function(obj){var zoneToUse=normalizeZone(obj.zone,Settings.defaultZone);if(!zoneToUse.isValid)return DateTime.invalid(unsupportedZone(zoneToUse));var tsNow=Settings.now(),offsetProvis=zoneToUse.offset(tsNow),normalized=normalizeObject(obj,normalizeUnit,["zone","locale","outputCalendar","numberingSystem"]),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber,loc=Locale.fromObject(obj);if((containsGregor||containsOrdinal)&&definiteWeekDef)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(containsGregorMD&&containsOrdinal)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");var useWeekData=definiteWeekDef||normalized.weekday&&!containsGregor,objNow=tsToObj(tsNow,offsetProvis),units,defaultValues;useWeekData?(units=orderedWeekUnits,defaultValues=defaultWeekUnitValues,objNow=gregorianToWeek(objNow)):containsOrdinal?(units=orderedOrdinalUnits,defaultValues=defaultOrdinalUnitValues,objNow=gregorianToOrdinal(objNow)):(units=orderedUnits$1,defaultValues=defaultUnitValues);for(var foundFirst=!1,_iterator3=_createForOfIteratorHelperLoose(units),_step3;!(_step3=_iterator3()).done;){var u=_step3.value,v=normalized[u];isUndefined(v)?foundFirst?normalized[u]=defaultValues[u]:normalized[u]=objNow[u]:foundFirst=!0}var higherOrderInvalid=useWeekData?hasInvalidWeekData(normalized):containsOrdinal?hasInvalidOrdinalData(normalized):hasInvalidGregorianData(normalized),invalid=higherOrderInvalid||hasInvalidTimeData(normalized);if(invalid)return DateTime.invalid(invalid);var gregorian=useWeekData?weekToGregorian(normalized):containsOrdinal?ordinalToGregorian(normalized):normalized,_objToTS2=objToTS(gregorian,offsetProvis,zoneToUse),tsFinal=_objToTS2[0],offsetFinal=_objToTS2[1],inst=new DateTime({ts:tsFinal,zone:zoneToUse,o:offsetFinal,loc:loc});return normalized.weekday&&containsGregor&&obj.weekday!==inst.weekday?DateTime.invalid("mismatched weekday","you can't specify both a weekday of "+normalized.weekday+" and a date of "+inst.toISO()):inst},DateTime.fromISO=function(text,opts){void 0===opts&&(opts={});var _parseISODate=parseISODate(text),vals=_parseISODate[0],parsedZone=_parseISODate[1];return parseDataToDateTime(vals,parsedZone,opts,"ISO 8601",text)},DateTime.fromRFC2822=function(text,opts){void 0===opts&&(opts={});var _parseRFC2822Date=parseRFC2822Date(text),vals=_parseRFC2822Date[0],parsedZone=_parseRFC2822Date[1];return parseDataToDateTime(vals,parsedZone,opts,"RFC 2822",text)},DateTime.fromHTTP=function(text,opts){void 0===opts&&(opts={});var _parseHTTPDate=parseHTTPDate(text),vals=_parseHTTPDate[0],parsedZone=_parseHTTPDate[1];return parseDataToDateTime(vals,parsedZone,opts,"HTTP",opts)},DateTime.fromFormat=function(text,fmt,opts){if(void 0===opts&&(opts={}),isUndefined(text)||isUndefined(fmt))throw new InvalidArgumentError("fromFormat requires an input string and a format");var _opts=opts,_opts$locale=_opts.locale,locale=void 0===_opts$locale?null:_opts$locale,_opts$numberingSystem=_opts.numberingSystem,numberingSystem=void 0===_opts$numberingSystem?null:_opts$numberingSystem,localeToUse=Locale.fromOpts({locale:locale,numberingSystem:numberingSystem,defaultToEN:!0}),_parseFromTokens=parseFromTokens(localeToUse,text,fmt),vals=_parseFromTokens[0],parsedZone=_parseFromTokens[1],invalid=_parseFromTokens[2];return invalid?DateTime.invalid(invalid):parseDataToDateTime(vals,parsedZone,opts,"format "+fmt,text)},DateTime.fromString=function(text,fmt,opts){return void 0===opts&&(opts={}),DateTime.fromFormat(text,fmt,opts)},DateTime.fromSQL=function(text,opts){void 0===opts&&(opts={});var _parseSQL=parseSQL(text),vals=_parseSQL[0],parsedZone=_parseSQL[1];return parseDataToDateTime(vals,parsedZone,opts,"SQL",text)},DateTime.invalid=function invalid(reason,explanation){if(void 0===explanation&&(explanation=null),!reason)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");var invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(invalid);else return new DateTime({invalid:invalid})},DateTime.isDateTime=function(o){return o&&o.isLuxonDateTime||!1};var _proto=DateTime.prototype;return _proto.get=function(unit){return this[unit]},_proto.resolvedLocaleOpts=function(opts){void 0===opts&&(opts={});var _Formatter$create$res=Formatter.create(this.loc.clone(opts),opts).resolvedOptions(this),locale=_Formatter$create$res.locale,numberingSystem=_Formatter$create$res.numberingSystem,calendar=_Formatter$create$res.calendar;return{locale:locale,numberingSystem:numberingSystem,outputCalendar:calendar}},_proto.toUTC=function(offset,opts){return void 0===offset&&(offset=0),void 0===opts&&(opts={}),this.setZone(FixedOffsetZone.instance(offset),opts)},_proto.toLocal=function(){return this.setZone(Settings.defaultZone)},_proto.setZone=function(zone,_temp){var _ref3=void 0===_temp?{}:_temp,_ref3$keepLocalTime=_ref3.keepLocalTime,_ref3$keepCalendarTim=_ref3.keepCalendarTime;if(zone=normalizeZone(zone,Settings.defaultZone),zone.equals(this.zone))return this;if(!zone.isValid)return DateTime.invalid(unsupportedZone(zone));var newTS=this.ts;if(void 0!==_ref3$keepLocalTime&&_ref3$keepLocalTime||void 0!==_ref3$keepCalendarTim&&_ref3$keepCalendarTim){var offsetGuess=zone.offset(this.ts),asObj=this.toObject(),_objToTS3=objToTS(asObj,offsetGuess,zone);newTS=_objToTS3[0]}return clone$1(this,{ts:newTS,zone:zone})},_proto.reconfigure=function(_temp2){var _ref4=void 0===_temp2?{}:_temp2,locale=_ref4.locale,numberingSystem=_ref4.numberingSystem,outputCalendar=_ref4.outputCalendar,loc=this.loc.clone({locale:locale,numberingSystem:numberingSystem,outputCalendar:outputCalendar});return clone$1(this,{loc:loc})},_proto.setLocale=function(locale){return this.reconfigure({locale:locale})},_proto.set=function(values){if(!this.isValid)return this;var normalized=normalizeObject(values,normalizeUnit,[]),settingWeekStuff=!isUndefined(normalized.weekYear)||!isUndefined(normalized.weekNumber)||!isUndefined(normalized.weekday),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),definiteWeekDef=normalized.weekYear||normalized.weekNumber;if((containsGregorYear||containsGregorMD||containsOrdinal)&&definiteWeekDef)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(containsGregorMD&&containsOrdinal)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");var mixed;settingWeekStuff?mixed=weekToGregorian(Object.assign(gregorianToWeek(this.c),normalized)):isUndefined(normalized.ordinal)?(mixed=Object.assign(this.toObject(),normalized),isUndefined(normalized.day)&&(mixed.day=Math.min(daysInMonth(mixed.year,mixed.month),mixed.day))):mixed=ordinalToGregorian(Object.assign(gregorianToOrdinal(this.c),normalized));var _objToTS4=objToTS(mixed,this.o,this.zone),ts=_objToTS4[0],o=_objToTS4[1];return clone$1(this,{ts:ts,o:o})},_proto.plus=function(duration){if(!this.isValid)return this;var dur=friendlyDuration(duration);return clone$1(this,adjustTime(this,dur))},_proto.minus=function(duration){if(!this.isValid)return this;var dur=friendlyDuration(duration).negate();return clone$1(this,adjustTime(this,dur))},_proto.startOf=function(unit){if(!this.isValid)return this;var o={},normalizedUnit=Duration.normalizeUnit(unit);switch(normalizedUnit){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;}if("weeks"===normalizedUnit&&(o.weekday=1),"quarters"===normalizedUnit){var q=Math.ceil(this.month/3);o.month=3*(q-1)+1}return this.set(o)},_proto.endOf=function(unit){var _this$plus;return this.isValid?this.plus((_this$plus={},_this$plus[unit]=1,_this$plus)).startOf(unit).minus(1):this},_proto.toFormat=function(fmt,opts){return void 0===opts&&(opts={}),this.isValid?Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this,fmt):INVALID$2},_proto.toLocaleString=function(opts){return void 0===opts&&(opts=DATE_SHORT),this.isValid?Formatter.create(this.loc.clone(opts),opts).formatDateTime(this):INVALID$2},_proto.toLocaleParts=function(opts){return void 0===opts&&(opts={}),this.isValid?Formatter.create(this.loc.clone(opts),opts).formatDateTimeParts(this):[]},_proto.toISO=function(opts){return void 0===opts&&(opts={}),this.isValid?this.toISODate(opts)+"T"+this.toISOTime(opts):null},_proto.toISODate=function(_temp3){var _ref5=void 0===_temp3?{}:_temp3,_ref5$format=_ref5.format,format=void 0===_ref5$format?"extended":_ref5$format,fmt="basic"===format?"yyyyMMdd":"yyyy-MM-dd";return 9999<this.year&&(fmt="+"+fmt),toTechFormat(this,fmt)},_proto.toISOWeekDate=function(){return toTechFormat(this,"kkkk-'W'WW-c")},_proto.toISOTime=function(_temp4){var _ref6=void 0===_temp4?{}:_temp4,_ref6$suppressMillise=_ref6.suppressMilliseconds,_ref6$suppressSeconds=_ref6.suppressSeconds,_ref6$includeOffset=_ref6.includeOffset,_ref6$includePrefix=_ref6.includePrefix,_ref6$format=_ref6.format,format=void 0===_ref6$format?"extended":_ref6$format;return toTechTimeFormat(this,{suppressSeconds:void 0!==_ref6$suppressSeconds&&_ref6$suppressSeconds,suppressMilliseconds:void 0!==_ref6$suppressMillise&&_ref6$suppressMillise,includeOffset:void 0===_ref6$includeOffset||_ref6$includeOffset,includePrefix:void 0!==_ref6$includePrefix&&_ref6$includePrefix,format:format})},_proto.toRFC2822=function(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},_proto.toHTTP=function(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},_proto.toSQLDate=function(){return toTechFormat(this,"yyyy-MM-dd")},_proto.toSQLTime=function(_temp5){var _ref7=void 0===_temp5?{}:_temp5,_ref7$includeOffset=_ref7.includeOffset,_ref7$includeZone=_ref7.includeZone;return toTechTimeFormat(this,{includeOffset:void 0===_ref7$includeOffset||_ref7$includeOffset,includeZone:void 0!==_ref7$includeZone&&_ref7$includeZone,spaceZone:!0})},_proto.toSQL=function(opts){return void 0===opts&&(opts={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(opts):null},_proto.toString=function(){return this.isValid?this.toISO():INVALID$2},_proto.valueOf=function(){return this.toMillis()},_proto.toMillis=function(){return this.isValid?this.ts:NaN},_proto.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},_proto.toJSON=function(){return this.toISO()},_proto.toBSON=function(){return this.toJSDate()},_proto.toObject=function(opts){if(void 0===opts&&(opts={}),!this.isValid)return{};var base=Object.assign({},this.c);return opts.includeConfig&&(base.outputCalendar=this.outputCalendar,base.numberingSystem=this.loc.numberingSystem,base.locale=this.loc.locale),base},_proto.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},_proto.diff=function(otherDateTime,unit,opts){if(void 0===unit&&(unit="milliseconds"),void 0===opts&&(opts={}),!this.isValid||!otherDateTime.isValid)return Duration.invalid(this.invalid||otherDateTime.invalid,"created by diffing an invalid DateTime");var durOpts=Object.assign({locale:this.locale,numberingSystem:this.numberingSystem},opts),units=maybeArray(unit).map(Duration.normalizeUnit),otherIsLater=otherDateTime.valueOf()>this.valueOf(),earlier=otherIsLater?this:otherDateTime,later=otherIsLater?otherDateTime:this,diffed=_diff(earlier,later,units,durOpts);return otherIsLater?diffed.negate():diffed},_proto.diffNow=function(unit,opts){return void 0===unit&&(unit="milliseconds"),void 0===opts&&(opts={}),this.diff(DateTime.now(),unit,opts)},_proto.until=function(otherDateTime){return this.isValid?Interval.fromDateTimes(this,otherDateTime):this},_proto.hasSame=function(otherDateTime,unit){if(!this.isValid)return!1;var inputMs=otherDateTime.valueOf(),otherZoneDateTime=this.setZone(otherDateTime.zone,{keepLocalTime:!0});return otherZoneDateTime.startOf(unit)<=inputMs&&inputMs<=otherZoneDateTime.endOf(unit)},_proto.equals=function(other){return this.isValid&&other.isValid&&this.valueOf()===other.valueOf()&&this.zone.equals(other.zone)&&this.loc.equals(other.loc)},_proto.toRelative=function(options){if(void 0===options&&(options={}),!this.isValid)return null;var base=options.base||DateTime.fromObject({zone:this.zone}),padding=options.padding?this<base?-options.padding:options.padding:0,units=["years","months","days","hours","minutes","seconds"],unit=options.unit;return Array.isArray(options.unit)&&(units=options.unit,unit=void 0),diffRelative(base,this.plus(padding),Object.assign(options,{numeric:"always",units:units,unit:unit}))},_proto.toRelativeCalendar=function(options){return void 0===options&&(options={}),this.isValid?diffRelative(options.base||DateTime.fromObject({zone:this.zone}),this,Object.assign(options,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},DateTime.min=function(){for(var _len=arguments.length,dateTimes=Array(_len),_key=0;_key<_len;_key++)dateTimes[_key]=arguments[_key];if(!dateTimes.every(DateTime.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(dateTimes,function(i){return i.valueOf()},Math.min)},DateTime.max=function(){for(var _len2=arguments.length,dateTimes=Array(_len2),_key2=0;_key2<_len2;_key2++)dateTimes[_key2]=arguments[_key2];if(!dateTimes.every(DateTime.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(dateTimes,function(i){return i.valueOf()},Math.max)},DateTime.fromFormatExplain=function(text,fmt,options){void 0===options&&(options={});var _options=options,_options$locale=_options.locale,locale=void 0===_options$locale?null:_options$locale,_options$numberingSys=_options.numberingSystem,numberingSystem=void 0===_options$numberingSys?null:_options$numberingSys,localeToUse=Locale.fromOpts({locale:locale,numberingSystem:numberingSystem,defaultToEN:!0});return explainFromTokens(localeToUse,text,fmt)},DateTime.fromStringExplain=function(text,fmt,options){return void 0===options&&(options={}),DateTime.fromFormatExplain(text,fmt,options)},_createClass(DateTime,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.universal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return isLeapYear(this.year)}},{key:"daysInMonth",get:function(){return daysInMonth(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?daysInYear(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return DATE_SHORT}},{key:"DATE_MED",get:function(){return DATE_MED}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return DATE_MED_WITH_WEEKDAY}},{key:"DATE_FULL",get:function(){return DATE_FULL}},{key:"DATE_HUGE",get:function(){return DATE_HUGE}},{key:"TIME_SIMPLE",get:function(){return TIME_SIMPLE}},{key:"TIME_WITH_SECONDS",get:function(){return TIME_WITH_SECONDS}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return TIME_WITH_SHORT_OFFSET}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return TIME_WITH_LONG_OFFSET}},{key:"TIME_24_SIMPLE",get:function(){return TIME_24_SIMPLE}},{key:"TIME_24_WITH_SECONDS",get:function(){return TIME_24_WITH_SECONDS}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return TIME_24_WITH_SHORT_OFFSET}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return TIME_24_WITH_LONG_OFFSET}},{key:"DATETIME_SHORT",get:function(){return DATETIME_SHORT}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return DATETIME_SHORT_WITH_SECONDS}},{key:"DATETIME_MED",get:function(){return DATETIME_MED}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return DATETIME_MED_WITH_SECONDS}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return DATETIME_MED_WITH_WEEKDAY}},{key:"DATETIME_FULL",get:function(){return DATETIME_FULL}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return DATETIME_FULL_WITH_SECONDS}},{key:"DATETIME_HUGE",get:function(){return DATETIME_HUGE}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return DATETIME_HUGE_WITH_SECONDS}}]),DateTime}();exports.DateTime=DateTime,exports.Duration=Duration,exports.FixedOffsetZone=FixedOffsetZone,exports.IANAZone=IANAZone,exports.Info=Info,exports.Interval=Interval,exports.InvalidZone=InvalidZone,exports.LocalZone=LocalZone,exports.Settings=Settings,exports.VERSION="1.28.0",exports.Zone=Zone},{}],290:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rxjs_1=require("rxjs");exports.BehaviorSubject=rxjs_1.BehaviorSubject},{rxjs:299}],291:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rxjs_1=require("rxjs");exports.ReplaySubject=rxjs_1.ReplaySubject},{rxjs:299}],292:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rxjs_1=require("rxjs");exports.Subject=rxjs_1.Subject},{rxjs:299}],293:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rxjs_1=require("rxjs");exports.from=rxjs_1.from},{rxjs:299}],294:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var operators_1=require("rxjs/operators");exports.filter=operators_1.filter},{"rxjs/operators":500}],295:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var operators_1=require("rxjs/operators");exports.take=operators_1.take},{"rxjs/operators":500}],296:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(require("rxjs-compat/BehaviorSubject"))},{"rxjs-compat/BehaviorSubject":290}],297:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(require("rxjs-compat/ReplaySubject"))},{"rxjs-compat/ReplaySubject":291}],298:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(require("rxjs-compat/Subject"))},{"rxjs-compat/Subject":292}],299:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("./internal/Observable");exports.Observable=Observable_1.Observable;var ConnectableObservable_1=require("./internal/observable/ConnectableObservable");exports.ConnectableObservable=ConnectableObservable_1.ConnectableObservable;var groupBy_1=require("./internal/operators/groupBy");exports.GroupedObservable=groupBy_1.GroupedObservable;var observable_1=require("./internal/symbol/observable");exports.observable=observable_1.observable;var Subject_1=require("./internal/Subject");exports.Subject=Subject_1.Subject;var BehaviorSubject_1=require("./internal/BehaviorSubject");exports.BehaviorSubject=BehaviorSubject_1.BehaviorSubject;var ReplaySubject_1=require("./internal/ReplaySubject");exports.ReplaySubject=ReplaySubject_1.ReplaySubject;var AsyncSubject_1=require("./internal/AsyncSubject");exports.AsyncSubject=AsyncSubject_1.AsyncSubject;var asap_1=require("./internal/scheduler/asap");exports.asap=asap_1.asap,exports.asapScheduler=asap_1.asapScheduler;var async_1=require("./internal/scheduler/async");exports.async=async_1.async,exports.asyncScheduler=async_1.asyncScheduler;var queue_1=require("./internal/scheduler/queue");exports.queue=queue_1.queue,exports.queueScheduler=queue_1.queueScheduler;var animationFrame_1=require("./internal/scheduler/animationFrame");exports.animationFrame=animationFrame_1.animationFrame,exports.animationFrameScheduler=animationFrame_1.animationFrameScheduler;var VirtualTimeScheduler_1=require("./internal/scheduler/VirtualTimeScheduler");exports.VirtualTimeScheduler=VirtualTimeScheduler_1.VirtualTimeScheduler,exports.VirtualAction=VirtualTimeScheduler_1.VirtualAction;var Scheduler_1=require("./internal/Scheduler");exports.Scheduler=Scheduler_1.Scheduler;var Subscription_1=require("./internal/Subscription");exports.Subscription=Subscription_1.Subscription;var Subscriber_1=require("./internal/Subscriber");exports.Subscriber=Subscriber_1.Subscriber;var Notification_1=require("./internal/Notification");exports.Notification=Notification_1.Notification,exports.NotificationKind=Notification_1.NotificationKind;var pipe_1=require("./internal/util/pipe");exports.pipe=pipe_1.pipe;var noop_1=require("./internal/util/noop");exports.noop=noop_1.noop;var identity_1=require("./internal/util/identity");exports.identity=identity_1.identity;var isObservable_1=require("./internal/util/isObservable");exports.isObservable=isObservable_1.isObservable;var ArgumentOutOfRangeError_1=require("./internal/util/ArgumentOutOfRangeError");exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var EmptyError_1=require("./internal/util/EmptyError");exports.EmptyError=EmptyError_1.EmptyError;var ObjectUnsubscribedError_1=require("./internal/util/ObjectUnsubscribedError");exports.ObjectUnsubscribedError=ObjectUnsubscribedError_1.ObjectUnsubscribedError;var UnsubscriptionError_1=require("./internal/util/UnsubscriptionError");exports.UnsubscriptionError=UnsubscriptionError_1.UnsubscriptionError;var TimeoutError_1=require("./internal/util/TimeoutError");exports.TimeoutError=TimeoutError_1.TimeoutError;var bindCallback_1=require("./internal/observable/bindCallback");exports.bindCallback=bindCallback_1.bindCallback;var bindNodeCallback_1=require("./internal/observable/bindNodeCallback");exports.bindNodeCallback=bindNodeCallback_1.bindNodeCallback;var combineLatest_1=require("./internal/observable/combineLatest");exports.combineLatest=combineLatest_1.combineLatest;var concat_1=require("./internal/observable/concat");exports.concat=concat_1.concat;var defer_1=require("./internal/observable/defer");exports.defer=defer_1.defer;var empty_1=require("./internal/observable/empty");exports.empty=empty_1.empty;var forkJoin_1=require("./internal/observable/forkJoin");exports.forkJoin=forkJoin_1.forkJoin;var from_1=require("./internal/observable/from");exports.from=from_1.from;var fromEvent_1=require("./internal/observable/fromEvent");exports.fromEvent=fromEvent_1.fromEvent;var fromEventPattern_1=require("./internal/observable/fromEventPattern");exports.fromEventPattern=fromEventPattern_1.fromEventPattern;var generate_1=require("./internal/observable/generate");exports.generate=generate_1.generate;var iif_1=require("./internal/observable/iif");exports.iif=iif_1.iif;var interval_1=require("./internal/observable/interval");exports.interval=interval_1.interval;var merge_1=require("./internal/observable/merge");exports.merge=merge_1.merge;var never_1=require("./internal/observable/never");exports.never=never_1.never;var of_1=require("./internal/observable/of");exports.of=of_1.of;var onErrorResumeNext_1=require("./internal/observable/onErrorResumeNext");exports.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNext;var pairs_1=require("./internal/observable/pairs");exports.pairs=pairs_1.pairs;var partition_1=require("./internal/observable/partition");exports.partition=partition_1.partition;var race_1=require("./internal/observable/race");exports.race=race_1.race;var range_1=require("./internal/observable/range");exports.range=range_1.range;var throwError_1=require("./internal/observable/throwError");exports.throwError=throwError_1.throwError;var timer_1=require("./internal/observable/timer");exports.timer=timer_1.timer;var using_1=require("./internal/observable/using");exports.using=using_1.using;var zip_1=require("./internal/observable/zip");exports.zip=zip_1.zip;var scheduled_1=require("./internal/scheduled/scheduled");exports.scheduled=scheduled_1.scheduled;var empty_2=require("./internal/observable/empty");exports.EMPTY=empty_2.EMPTY;var never_2=require("./internal/observable/never");exports.NEVER=never_2.NEVER;var config_1=require("./internal/config");exports.config=config_1.config},{"./internal/AsyncSubject":300,"./internal/BehaviorSubject":301,"./internal/Notification":303,"./internal/Observable":304,"./internal/ReplaySubject":307,"./internal/Scheduler":308,"./internal/Subject":309,"./internal/Subscriber":311,"./internal/Subscription":312,"./internal/config":313,"./internal/observable/ConnectableObservable":315,"./internal/observable/bindCallback":317,"./internal/observable/bindNodeCallback":318,"./internal/observable/combineLatest":319,"./internal/observable/concat":320,"./internal/observable/defer":321,"./internal/observable/empty":322,"./internal/observable/forkJoin":323,"./internal/observable/from":324,"./internal/observable/fromEvent":326,"./internal/observable/fromEventPattern":327,"./internal/observable/generate":328,"./internal/observable/iif":329,"./internal/observable/interval":330,"./internal/observable/merge":331,"./internal/observable/never":332,"./internal/observable/of":333,"./internal/observable/onErrorResumeNext":334,"./internal/observable/pairs":335,"./internal/observable/partition":336,"./internal/observable/race":337,"./internal/observable/range":338,"./internal/observable/throwError":339,"./internal/observable/timer":340,"./internal/observable/using":341,"./internal/observable/zip":342,"./internal/operators/groupBy":378,"./internal/scheduled/scheduled":450,"./internal/scheduler/VirtualTimeScheduler":460,"./internal/scheduler/animationFrame":461,"./internal/scheduler/asap":462,"./internal/scheduler/async":463,"./internal/scheduler/queue":464,"./internal/symbol/observable":466,"./internal/util/ArgumentOutOfRangeError":468,"./internal/util/EmptyError":469,"./internal/util/ObjectUnsubscribedError":471,"./internal/util/TimeoutError":472,"./internal/util/UnsubscriptionError":473,"./internal/util/identity":476,"./internal/util/isObservable":485,"./internal/util/noop":488,"./internal/util/pipe":490}],300:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("./Subject"),Subscription_1=require("./Subscription"),AsyncSubject=function(_super){function AsyncSubject(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.value=null,_this.hasNext=!1,_this.hasCompleted=!1,_this}return __extends(AsyncSubject,_super),AsyncSubject.prototype._subscribe=function(subscriber){return this.hasError?(subscriber.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(subscriber.next(this.value),subscriber.complete(),Subscription_1.Subscription.EMPTY):_super.prototype._subscribe.call(this,subscriber)},AsyncSubject.prototype.next=function(value){this.hasCompleted||(this.value=value,this.hasNext=!0)},AsyncSubject.prototype.error=function(error){this.hasCompleted||_super.prototype.error.call(this,error)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&_super.prototype.next.call(this,this.value),_super.prototype.complete.call(this)},AsyncSubject}(Subject_1.Subject);exports.AsyncSubject=AsyncSubject},{"./Subject":309,"./Subscription":312}],301:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("./Subject"),ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError"),BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return __extends(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;else if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;else return this._value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(Subject_1.Subject);exports.BehaviorSubject=BehaviorSubject},{"./Subject":309,"./util/ObjectUnsubscribedError":471}],302:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("./Subscriber"),InnerSubscriber=function(_super){function InnerSubscriber(parent,outerValue,outerIndex){var _this=_super.call(this)||this;return _this.parent=parent,_this.outerValue=outerValue,_this.outerIndex=outerIndex,_this.index=0,_this}return __extends(InnerSubscriber,_super),InnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(error){this.parent.notifyError(error,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(Subscriber_1.Subscriber);exports.InnerSubscriber=InnerSubscriber},{"./Subscriber":311}],303:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var empty_1=require("./observable/empty"),of_1=require("./observable/of"),throwError_1=require("./observable/throwError"),NotificationKind;(function(NotificationKind){NotificationKind.NEXT="N",NotificationKind.ERROR="E",NotificationKind.COMPLETE="C"})(NotificationKind=exports.NotificationKind||(exports.NotificationKind={}));var Notification=function(){function Notification(kind,value,error){this.kind=kind,this.value=value,this.error=error,this.hasValue="N"===kind}return Notification.prototype.observe=function(observer){switch(this.kind){case"N":return observer.next&&observer.next(this.value);case"E":return observer.error&&observer.error(this.error);case"C":return observer.complete&&observer.complete();}},Notification.prototype.do=function(next,error,complete){var kind=this.kind;return"N"===kind?next&&next(this.value):"E"===kind?error&&error(this.error):"C"===kind?complete&&complete():void 0},Notification.prototype.accept=function(nextOrObserver,error,complete){return nextOrObserver&&"function"==typeof nextOrObserver.next?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)},Notification.prototype.toObservable=function(){var kind=this.kind;switch(kind){case"N":return of_1.of(this.value);case"E":return throwError_1.throwError(this.error);case"C":return empty_1.empty();}throw new Error("unexpected notification kind value")},Notification.createNext=function(value){return"undefined"==typeof value?Notification.undefinedValueNotification:new Notification("N",value)},Notification.createError=function(err){return new Notification("E",void 0,err)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}();exports.Notification=Notification},{"./observable/empty":322,"./observable/of":333,"./observable/throwError":339}],304:[function(require,module,exports){"use strict";function getPromiseCtor(promiseCtor){if(promiseCtor||(promiseCtor=config_1.config.Promise||Promise),!promiseCtor)throw new Error("no Promise impl found");return promiseCtor}Object.defineProperty(exports,"__esModule",{value:!0});var canReportError_1=require("./util/canReportError"),toSubscriber_1=require("./util/toSubscriber"),observable_1=require("./symbol/observable"),pipe_1=require("./util/pipe"),config_1=require("./config"),Observable=function(){function Observable(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator,sink=toSubscriber_1.toSubscriber(observerOrNext,error,complete);if(operator?sink.add(operator.call(sink,this.source)):sink.add(this.source||config_1.config.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink)),config_1.config.useDeprecatedSynchronousErrorHandling&&sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){config_1.config.useDeprecatedSynchronousErrorHandling&&(sink.syncErrorThrown=!0,sink.syncErrorValue=err),canReportError_1.canReportError(sink)?sink.error(err):console.warn(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return promiseCtor=getPromiseCtor(promiseCtor),new promiseCtor(function(resolve,reject){var subscription=_this.subscribe(function(value){try{next(value)}catch(err){reject(err),subscription&&subscription.unsubscribe()}},reject,resolve)})},Observable.prototype._subscribe=function(subscriber){var source=this.source;return source&&source.subscribe(subscriber)},Observable.prototype[observable_1.observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return 0===operations.length?this:pipe_1.pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return promiseCtor=getPromiseCtor(promiseCtor),new promiseCtor(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();exports.Observable=Observable},{"./config":313,"./symbol/observable":466,"./util/canReportError":474,"./util/pipe":490,"./util/toSubscriber":497}],305:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var config_1=require("./config"),hostReportError_1=require("./util/hostReportError");exports.empty={closed:!0,next:function(){},error:function(err){if(config_1.config.useDeprecatedSynchronousErrorHandling)throw err;else hostReportError_1.hostReportError(err)},complete:function(){}}},{"./config":313,"./util/hostReportError":475}],306:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("./Subscriber"),OuterSubscriber=function(_super){function OuterSubscriber(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(OuterSubscriber,_super),OuterSubscriber.prototype.notifyNext=function(outerValue,innerValue){this.destination.next(innerValue)},OuterSubscriber.prototype.notifyError=function(error){this.destination.error(error)},OuterSubscriber.prototype.notifyComplete=function(){this.destination.complete()},OuterSubscriber}(Subscriber_1.Subscriber);exports.OuterSubscriber=OuterSubscriber},{"./Subscriber":311}],307:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("./Subject"),queue_1=require("./scheduler/queue"),Subscription_1=require("./Subscription"),observeOn_1=require("./operators/observeOn"),ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError"),SubjectSubscription_1=require("./SubjectSubscription"),ReplaySubject=function(_super){function ReplaySubject(bufferSize,windowTime,scheduler){void 0===bufferSize&&(bufferSize=Number.POSITIVE_INFINITY),void 0===windowTime&&(windowTime=Number.POSITIVE_INFINITY);var _this=_super.call(this)||this;return _this.scheduler=scheduler,_this._events=[],_this._infiniteTimeWindow=!1,_this._bufferSize=1>bufferSize?1:bufferSize,_this._windowTime=1>windowTime?1:windowTime,windowTime===Number.POSITIVE_INFINITY?(_this._infiniteTimeWindow=!0,_this.next=_this.nextInfiniteTimeWindow):_this.next=_this.nextTimeWindow,_this}return __extends(ReplaySubject,_super),ReplaySubject.prototype.nextInfiniteTimeWindow=function(value){if(!this.isStopped){var _events=this._events;_events.push(value),_events.length>this._bufferSize&&_events.shift()}_super.prototype.next.call(this,value)},ReplaySubject.prototype.nextTimeWindow=function(value){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),value)),this._trimBufferThenGetEvents()),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){var _infiniteTimeWindow=this._infiniteTimeWindow,_events=_infiniteTimeWindow?this._events:this._trimBufferThenGetEvents(),scheduler=this.scheduler,len=_events.length,subscription;if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;else this.isStopped||this.hasError?subscription=Subscription_1.Subscription.EMPTY:(this.observers.push(subscriber),subscription=new SubjectSubscription_1.SubjectSubscription(this,subscriber));if(scheduler&&subscriber.add(subscriber=new observeOn_1.ObserveOnSubscriber(subscriber,scheduler)),_infiniteTimeWindow)for(var i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i]);else for(var i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i].value);return this.hasError?subscriber.error(this.thrownError):this.isStopped&&subscriber.complete(),subscription},ReplaySubject.prototype._getNow=function(){return(this.scheduler||queue_1.queue).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var now=this._getNow(),_bufferSize=this._bufferSize,_windowTime=this._windowTime,_events=this._events,eventsCount=_events.length,spliceCount=0;spliceCount<eventsCount&&!(now-_events[spliceCount].time<_windowTime);)spliceCount++;return eventsCount>_bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-_bufferSize)),0<spliceCount&&_events.splice(0,spliceCount),_events},ReplaySubject}(Subject_1.Subject);exports.ReplaySubject=ReplaySubject;var ReplayEvent=function(){return function(time,value){this.time=time,this.value=value}}()},{"./Subject":309,"./SubjectSubscription":310,"./Subscription":312,"./operators/observeOn":393,"./scheduler/queue":464,"./util/ObjectUnsubscribedError":471}],308:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Scheduler=function(){function Scheduler(SchedulerAction,now){void 0===now&&(now=Scheduler.now),this.SchedulerAction=SchedulerAction,this.now=now}return Scheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),new this.SchedulerAction(this,work).schedule(state,delay)},Scheduler.now=function(){return Date.now()},Scheduler}();exports.Scheduler=Scheduler},{}],309:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("./Observable"),Subscriber_1=require("./Subscriber"),Subscription_1=require("./Subscription"),ObjectUnsubscribedError_1=require("./util/ObjectUnsubscribedError"),SubjectSubscription_1=require("./SubjectSubscription"),rxSubscriber_1=require("../internal/symbol/rxSubscriber"),SubjectSubscriber=function(_super){function SubjectSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this}return __extends(SubjectSubscriber,_super),SubjectSubscriber}(Subscriber_1.Subscriber);exports.SubjectSubscriber=SubjectSubscriber;var Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.observers=[],_this.closed=!1,_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return __extends(Subject,_super),Subject.prototype[rxSubscriber_1.rxSubscriber]=function(){return new SubjectSubscriber(this)},Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype.next=function(value){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;if(!this.isStopped)for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].next(value)},Subject.prototype.error=function(err){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=err,this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].error(err);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;else return _super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;else return this.hasError?(subscriber.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.isStopped?(subscriber.complete(),Subscription_1.Subscription.EMPTY):(this.observers.push(subscriber),new SubjectSubscription_1.SubjectSubscription(this,subscriber))},Subject.prototype.asObservable=function(){var observable=new Observable_1.Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable_1.Observable);exports.Subject=Subject;var AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return __extends(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var destination=this.destination;destination&&destination.next&&destination.next(value)},AnonymousSubject.prototype.error=function(err){var destination=this.destination;destination&&destination.error&&this.destination.error(err)},AnonymousSubject.prototype.complete=function(){var destination=this.destination;destination&&destination.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(subscriber){var source=this.source;return source?this.source.subscribe(subscriber):Subscription_1.Subscription.EMPTY},AnonymousSubject}(Subject);exports.AnonymousSubject=AnonymousSubject},{"../internal/symbol/rxSubscriber":467,"./Observable":304,"./SubjectSubscription":310,"./Subscriber":311,"./Subscription":312,"./util/ObjectUnsubscribedError":471}],310:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscription_1=require("./Subscription"),SubjectSubscription=function(_super){function SubjectSubscription(subject,subscriber){var _this=_super.call(this)||this;return _this.subject=subject,_this.subscriber=subscriber,_this.closed=!1,_this}return __extends(SubjectSubscription,_super),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var subject=this.subject,observers=subject.observers;if(this.subject=null,!(!observers||0===observers.length||subject.isStopped||subject.closed)){var subscriberIndex=observers.indexOf(this.subscriber);-1!==subscriberIndex&&observers.splice(subscriberIndex,1)}}},SubjectSubscription}(Subscription_1.Subscription);exports.SubjectSubscription=SubjectSubscription},{"./Subscription":312}],311:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var isFunction_1=require("./util/isFunction"),Observer_1=require("./Observer"),Subscription_1=require("./Subscription"),rxSubscriber_1=require("../internal/symbol/rxSubscriber"),config_1=require("./config"),hostReportError_1=require("./util/hostReportError"),Subscriber=function(_super){function Subscriber(destinationOrNext,error,complete){var _this=_super.call(this)||this;switch(_this.syncErrorValue=null,_this.syncErrorThrown=!1,_this.syncErrorThrowable=!1,_this.isStopped=!1,arguments.length){case 0:_this.destination=Observer_1.empty;break;case 1:if(!destinationOrNext){_this.destination=Observer_1.empty;break}if("object"==typeof destinationOrNext){destinationOrNext instanceof Subscriber?(_this.syncErrorThrowable=destinationOrNext.syncErrorThrowable,_this.destination=destinationOrNext,destinationOrNext.add(_this)):(_this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext));break}default:_this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext,error,complete);}return _this}return __extends(Subscriber,_super),Subscriber.prototype[rxSubscriber_1.rxSubscriber]=function(){return this},Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){this.destination.error(err),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var _parentOrParents=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=_parentOrParents,this},Subscriber}(Subscription_1.Subscription);exports.Subscriber=Subscriber;var SafeSubscriber=function(_super){function SafeSubscriber(_parentSubscriber,observerOrNext,error,complete){var _this=_super.call(this)||this;_this._parentSubscriber=_parentSubscriber;var context=_this,next;return isFunction_1.isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,observerOrNext!==Observer_1.empty&&(context=Object.create(observerOrNext),isFunction_1.isFunction(context.unsubscribe)&&_this.add(context.unsubscribe.bind(context)),context.unsubscribe=_this.unsubscribe.bind(_this))),_this._context=context,_this._next=next,_this._error=error,_this._complete=complete,_this}return __extends(SafeSubscriber,_super),SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parentSubscriber=this._parentSubscriber;config_1.config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?this.__tryOrSetError(_parentSubscriber,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}},SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parentSubscriber=this._parentSubscriber,useDeprecatedSynchronousErrorHandling=config_1.config.useDeprecatedSynchronousErrorHandling;if(this._error)useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else if(!_parentSubscriber.syncErrorThrowable){if(this.unsubscribe(),useDeprecatedSynchronousErrorHandling)throw err;hostReportError_1.hostReportError(err)}else useDeprecatedSynchronousErrorHandling?(_parentSubscriber.syncErrorValue=err,_parentSubscriber.syncErrorThrown=!0):hostReportError_1.hostReportError(err),this.unsubscribe()}},SafeSubscriber.prototype.complete=function(){var _this=this;if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;if(this._complete){var wrappedComplete=function(){return _this._complete.call(_this._context)};config_1.config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value)}catch(err){if(this.unsubscribe(),config_1.config.useDeprecatedSynchronousErrorHandling)throw err;else hostReportError_1.hostReportError(err)}},SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){if(!config_1.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{fn.call(this._context,value)}catch(err){return config_1.config.useDeprecatedSynchronousErrorHandling?(parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0):(hostReportError_1.hostReportError(err),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var _parentSubscriber=this._parentSubscriber;this._context=null,this._parentSubscriber=null,_parentSubscriber.unsubscribe()},SafeSubscriber}(Subscriber);exports.SafeSubscriber=SafeSubscriber},{"../internal/symbol/rxSubscriber":467,"./Observer":305,"./Subscription":312,"./config":313,"./util/hostReportError":475,"./util/isFunction":480}],312:[function(require,module,exports){"use strict";function flattenUnsubscriptionErrors(errors){return errors.reduce(function(errs,err){return errs.concat(err instanceof UnsubscriptionError_1.UnsubscriptionError?err.errors:err)},[])}Object.defineProperty(exports,"__esModule",{value:!0});var isArray_1=require("./util/isArray"),isObject_1=require("./util/isObject"),isFunction_1=require("./util/isFunction"),UnsubscriptionError_1=require("./util/UnsubscriptionError"),Subscription=function(){function Subscription(unsubscribe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,unsubscribe&&(this._ctorUnsubscribe=!0,this._unsubscribe=unsubscribe)}return Subscription.prototype.unsubscribe=function(){var errors;if(!this.closed){var _a=this,_parentOrParents=_a._parentOrParents,_ctorUnsubscribe=_a._ctorUnsubscribe,_unsubscribe=_a._unsubscribe,_subscriptions=_a._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,_parentOrParents instanceof Subscription)_parentOrParents.remove(this);else if(null!==_parentOrParents)for(var index=0,parent_1;index<_parentOrParents.length;++index)parent_1=_parentOrParents[index],parent_1.remove(this);if(isFunction_1.isFunction(_unsubscribe)){_ctorUnsubscribe&&(this._unsubscribe=void 0);try{_unsubscribe.call(this)}catch(e){errors=e instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e]}}if(isArray_1.isArray(_subscriptions))for(var index=-1,len=_subscriptions.length,sub;++index<len;)if(sub=_subscriptions[index],isObject_1.isObject(sub))try{sub.unsubscribe()}catch(e){errors=errors||[],e instanceof UnsubscriptionError_1.UnsubscriptionError?errors=errors.concat(flattenUnsubscriptionErrors(e.errors)):errors.push(e)}if(errors)throw new UnsubscriptionError_1.UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){var subscription=teardown;if(!teardown)return Subscription.EMPTY;switch(typeof teardown){case"function":subscription=new Subscription(teardown);case"object":if(subscription===this||subscription.closed||"function"!=typeof subscription.unsubscribe)return subscription;if(this.closed)return subscription.unsubscribe(),subscription;if(!(subscription instanceof Subscription)){var tmp=subscription;subscription=new Subscription,subscription._subscriptions=[tmp]}break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.");}var _parentOrParents=subscription._parentOrParents;if(null===_parentOrParents)subscription._parentOrParents=this;else if(_parentOrParents instanceof Subscription){if(_parentOrParents===this)return subscription;subscription._parentOrParents=[_parentOrParents,this]}else if(-1===_parentOrParents.indexOf(this))_parentOrParents.push(this);else return subscription;var subscriptions=this._subscriptions;return null===subscriptions?this._subscriptions=[subscription]:subscriptions.push(subscription),subscription},Subscription.prototype.remove=function(subscription){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);-1!==subscriptionIndex&&subscriptions.splice(subscriptionIndex,1)}},Subscription.EMPTY=function(empty){return empty.closed=!0,empty}(new Subscription),Subscription}();exports.Subscription=Subscription},{"./util/UnsubscriptionError":473,"./util/isArray":477,"./util/isFunction":480,"./util/isObject":484}],313:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _enable_super_gross_mode_that_will_cause_bad_things=!1;exports.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(value){if(value){var error=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+error.stack)}else _enable_super_gross_mode_that_will_cause_bad_things&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_enable_super_gross_mode_that_will_cause_bad_things=value},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}}},{}],314:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("./Subscriber"),Observable_1=require("./Observable"),subscribeTo_1=require("./util/subscribeTo"),SimpleInnerSubscriber=function(_super){function SimpleInnerSubscriber(parent){var _this=_super.call(this)||this;return _this.parent=parent,_this}return __extends(SimpleInnerSubscriber,_super),SimpleInnerSubscriber.prototype._next=function(value){this.parent.notifyNext(value)},SimpleInnerSubscriber.prototype._error=function(error){this.parent.notifyError(error),this.unsubscribe()},SimpleInnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},SimpleInnerSubscriber}(Subscriber_1.Subscriber);exports.SimpleInnerSubscriber=SimpleInnerSubscriber;var ComplexInnerSubscriber=function(_super){function ComplexInnerSubscriber(parent,outerValue,outerIndex){var _this=_super.call(this)||this;return _this.parent=parent,_this.outerValue=outerValue,_this.outerIndex=outerIndex,_this}return __extends(ComplexInnerSubscriber,_super),ComplexInnerSubscriber.prototype._next=function(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this)},ComplexInnerSubscriber.prototype._error=function(error){this.parent.notifyError(error),this.unsubscribe()},ComplexInnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},ComplexInnerSubscriber}(Subscriber_1.Subscriber);exports.ComplexInnerSubscriber=ComplexInnerSubscriber;var SimpleOuterSubscriber=function(_super){function SimpleOuterSubscriber(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(SimpleOuterSubscriber,_super),SimpleOuterSubscriber.prototype.notifyNext=function(innerValue){this.destination.next(innerValue)},SimpleOuterSubscriber.prototype.notifyError=function(err){this.destination.error(err)},SimpleOuterSubscriber.prototype.notifyComplete=function(){this.destination.complete()},SimpleOuterSubscriber}(Subscriber_1.Subscriber);exports.SimpleOuterSubscriber=SimpleOuterSubscriber;var ComplexOuterSubscriber=function(_super){function ComplexOuterSubscriber(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ComplexOuterSubscriber,_super),ComplexOuterSubscriber.prototype.notifyNext=function(_outerValue,innerValue){this.destination.next(innerValue)},ComplexOuterSubscriber.prototype.notifyError=function(error){this.destination.error(error)},ComplexOuterSubscriber.prototype.notifyComplete=function(){this.destination.complete()},ComplexOuterSubscriber}(Subscriber_1.Subscriber);exports.ComplexOuterSubscriber=ComplexOuterSubscriber,exports.innerSubscribe=function(result,innerSubscriber){if(!innerSubscriber.closed){if(result instanceof Observable_1.Observable)return result.subscribe(innerSubscriber);var subscription;try{subscription=subscribeTo_1.subscribeTo(result)(innerSubscriber)}catch(error){innerSubscriber.error(error)}return subscription}}},{"./Observable":304,"./Subscriber":311,"./util/subscribeTo":491}],315:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),Observable_1=require("../Observable"),Subscriber_1=require("../Subscriber"),Subscription_1=require("../Subscription"),refCount_1=require("../operators/refCount"),ConnectableObservable=function(_super){function ConnectableObservable(source,subjectFactory){var _this=_super.call(this)||this;return _this.source=source,_this.subjectFactory=subjectFactory,_this._refCount=0,_this._isComplete=!1,_this}return __extends(ConnectableObservable,_super),ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)},ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;return(!subject||subject.isStopped)&&(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var connection=this._connection;return connection||(this._isComplete=!1,connection=this._connection=new Subscription_1.Subscription,connection.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),connection.closed&&(this._connection=null,connection=Subscription_1.Subscription.EMPTY)),connection},ConnectableObservable.prototype.refCount=function(){return refCount_1.refCount()(this)},ConnectableObservable}(Observable_1.Observable);exports.ConnectableObservable=ConnectableObservable,exports.connectableObservableDescriptor=function(){var connectableProto=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}}}();var ConnectableSubscriber=function(_super){function ConnectableSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;return _this.connectable=connectable,_this}return __extends(ConnectableSubscriber,_super),ConnectableSubscriber.prototype._error=function(err){this._unsubscribe(),_super.prototype._error.call(this,err)},ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),_super.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(connectable){this.connectable=null;var connection=connectable._connection;connectable._refCount=0,connectable._subject=null,connectable._connection=null,connection&&connection.unsubscribe()}},ConnectableSubscriber}(Subject_1.SubjectSubscriber),RefCountOperator=function(){function RefCountOperator(connectable){this.connectable=connectable}return RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable),subscription=source.subscribe(refCounter);return refCounter.closed||(refCounter.connection=connectable.connect()),subscription},RefCountOperator}(),RefCountSubscriber=function(_super){function RefCountSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;return _this.connectable=connectable,_this}return __extends(RefCountSubscriber,_super),RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(!connectable)return void(this.connection=null);this.connectable=null;var refCount=connectable._refCount;if(0>=refCount)return void(this.connection=null);if(connectable._refCount=refCount-1,1<refCount)return void(this.connection=null);var connection=this.connection,sharedConnection=connectable._connection;this.connection=null,sharedConnection&&(!connection||sharedConnection===connection)&&sharedConnection.unsubscribe()},RefCountSubscriber}(Subscriber_1.Subscriber)},{"../Observable":304,"../Subject":309,"../Subscriber":311,"../Subscription":312,"../operators/refCount":404}],316:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),asap_1=require("../scheduler/asap"),isNumeric_1=require("../util/isNumeric"),SubscribeOnObservable=function(_super){function SubscribeOnObservable(source,delayTime,scheduler){void 0===delayTime&&(delayTime=0),void 0===scheduler&&(scheduler=asap_1.asap);var _this=_super.call(this)||this;return _this.source=source,_this.delayTime=delayTime,_this.scheduler=scheduler,(!isNumeric_1.isNumeric(delayTime)||0>delayTime)&&(_this.delayTime=0),scheduler&&"function"==typeof scheduler.schedule||(_this.scheduler=asap_1.asap),_this}return __extends(SubscribeOnObservable,_super),SubscribeOnObservable.create=function(source,delay,scheduler){return void 0===delay&&(delay=0),void 0===scheduler&&(scheduler=asap_1.asap),new SubscribeOnObservable(source,delay,scheduler)},SubscribeOnObservable.dispatch=function(arg){var source=arg.source,subscriber=arg.subscriber;return this.add(source.subscribe(subscriber))},SubscribeOnObservable.prototype._subscribe=function(subscriber){var delay=this.delayTime,source=this.source,scheduler=this.scheduler;return scheduler.schedule(SubscribeOnObservable.dispatch,delay,{source:source,subscriber:subscriber})},SubscribeOnObservable}(Observable_1.Observable);exports.SubscribeOnObservable=SubscribeOnObservable},{"../Observable":304,"../scheduler/asap":462,"../util/isNumeric":483}],317:[function(require,module,exports){"use strict";function bindCallback(callbackFunc,resultSelector,scheduler){if(resultSelector)if(isScheduler_1.isScheduler(resultSelector))scheduler=resultSelector;else return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return bindCallback(callbackFunc,scheduler).apply(void 0,args).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args)}))};return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this,params={context:context,subject:subject,callbackFunc:callbackFunc,scheduler:scheduler},subject;return new Observable_1.Observable(function(subscriber){if(!scheduler){if(!subject){subject=new AsyncSubject_1.AsyncSubject;var handler=function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];subject.next(1>=innerArgs.length?innerArgs[0]:innerArgs),subject.complete()};try{callbackFunc.apply(context,args.concat([handler]))}catch(err){canReportError_1.canReportError(subject)?subject.error(err):console.warn(err)}}return subject.subscribe(subscriber)}return scheduler.schedule(dispatch,0,{args:args,subscriber:subscriber,params:params})})}}function dispatch(state){var _this=this,self=this,args=state.args,subscriber=state.subscriber,params=state.params,callbackFunc=params.callbackFunc,context=params.context,scheduler=params.scheduler,subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject_1.AsyncSubject;var handler=function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];var value=1>=innerArgs.length?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))};try{callbackFunc.apply(context,args.concat([handler]))}catch(err){subject.error(err)}}this.add(subject.subscribe(subscriber))}function dispatchNext(state){var value=state.value,subject=state.subject;subject.next(value),subject.complete()}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),AsyncSubject_1=require("../AsyncSubject"),map_1=require("../operators/map"),canReportError_1=require("../util/canReportError"),isArray_1=require("../util/isArray"),isScheduler_1=require("../util/isScheduler");exports.bindCallback=bindCallback},{"../AsyncSubject":300,"../Observable":304,"../operators/map":382,"../util/canReportError":474,"../util/isArray":477,"../util/isScheduler":487}],318:[function(require,module,exports){"use strict";function bindNodeCallback(callbackFunc,resultSelector,scheduler){if(resultSelector)if(isScheduler_1.isScheduler(resultSelector))scheduler=resultSelector;else return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return bindNodeCallback(callbackFunc,scheduler).apply(void 0,args).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args)}))};return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var params={subject:void 0,args:args,callbackFunc:callbackFunc,scheduler:scheduler,context:this};return new Observable_1.Observable(function(subscriber){var context=params.context,subject=params.subject;if(!scheduler){if(!subject){subject=params.subject=new AsyncSubject_1.AsyncSubject;var handler=function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];var err=innerArgs.shift();return err?void subject.error(err):void(subject.next(1>=innerArgs.length?innerArgs[0]:innerArgs),subject.complete())};try{callbackFunc.apply(context,args.concat([handler]))}catch(err){canReportError_1.canReportError(subject)?subject.error(err):console.warn(err)}}return subject.subscribe(subscriber)}return scheduler.schedule(dispatch,0,{params:params,subscriber:subscriber,context:context})})}}function dispatch(state){var _this=this,params=state.params,subscriber=state.subscriber,context=state.context,callbackFunc=params.callbackFunc,args=params.args,scheduler=params.scheduler,subject=params.subject;if(!subject){subject=params.subject=new AsyncSubject_1.AsyncSubject;var handler=function(){for(var innerArgs=[],_i=0;_i<arguments.length;_i++)innerArgs[_i]=arguments[_i];var err=innerArgs.shift();if(err)_this.add(scheduler.schedule(dispatchError,0,{err:err,subject:subject}));else{var value=1>=innerArgs.length?innerArgs[0]:innerArgs;_this.add(scheduler.schedule(dispatchNext,0,{value:value,subject:subject}))}};try{callbackFunc.apply(context,args.concat([handler]))}catch(err){this.add(scheduler.schedule(dispatchError,0,{err:err,subject:subject}))}}this.add(subject.subscribe(subscriber))}function dispatchNext(arg){var value=arg.value,subject=arg.subject;subject.next(value),subject.complete()}function dispatchError(arg){var err=arg.err,subject=arg.subject;subject.error(err)}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),AsyncSubject_1=require("../AsyncSubject"),map_1=require("../operators/map"),canReportError_1=require("../util/canReportError"),isScheduler_1=require("../util/isScheduler"),isArray_1=require("../util/isArray");exports.bindNodeCallback=bindNodeCallback},{"../AsyncSubject":300,"../Observable":304,"../operators/map":382,"../util/canReportError":474,"../util/isArray":477,"../util/isScheduler":487}],319:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var isScheduler_1=require("../util/isScheduler"),isArray_1=require("../util/isArray"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult"),fromArray_1=require("./fromArray"),NONE={};exports.combineLatest=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var resultSelector=void 0,scheduler=void 0;return isScheduler_1.isScheduler(observables[observables.length-1])&&(scheduler=observables.pop()),"function"==typeof observables[observables.length-1]&&(resultSelector=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),fromArray_1.fromArray(observables,scheduler).lift(new CombineLatestOperator(resultSelector))};var CombineLatestOperator=function(){function CombineLatestOperator(resultSelector){this.resultSelector=resultSelector}return CombineLatestOperator.prototype.call=function(subscriber,source){return source.subscribe(new CombineLatestSubscriber(subscriber,this.resultSelector))},CombineLatestOperator}();exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(_super){function CombineLatestSubscriber(destination,resultSelector){var _this=_super.call(this,destination)||this;return _this.resultSelector=resultSelector,_this.active=0,_this.values=[],_this.observables=[],_this}return __extends(CombineLatestSubscriber,_super),CombineLatestSubscriber.prototype._next=function(observable){this.values.push(NONE),this.observables.push(observable)},CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len,this.toRespond=len;for(var i=0,observable;i<len;i++)observable=observables[i],this.add(subscribeToResult_1.subscribeToResult(this,observable,void 0,i))}},CombineLatestSubscriber.prototype.notifyComplete=function(){0==(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(_outerValue,innerValue,outerIndex){var values=this.values,oldVal=values[outerIndex],toRespond=this.toRespond?oldVal===NONE?--this.toRespond:this.toRespond:0;values[outerIndex]=innerValue,0===toRespond&&(this.resultSelector?this._tryResultSelector(values):this.destination.next(values.slice()))},CombineLatestSubscriber.prototype._tryResultSelector=function(values){var result;try{result=this.resultSelector.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)},CombineLatestSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.CombineLatestSubscriber=CombineLatestSubscriber},{"../OuterSubscriber":306,"../util/isArray":477,"../util/isScheduler":487,"../util/subscribeToResult":496,"./fromArray":325}],320:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var of_1=require("./of"),concatAll_1=require("../operators/concatAll");exports.concat=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return concatAll_1.concatAll()(of_1.of.apply(void 0,observables))}},{"../operators/concatAll":354,"./of":333}],321:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),from_1=require("./from"),empty_1=require("./empty");exports.defer=function(observableFactory){return new Observable_1.Observable(function(subscriber){var input;try{input=observableFactory()}catch(err){return void subscriber.error(err)}var source=input?from_1.from(input):empty_1.empty();return source.subscribe(subscriber)})}},{"../Observable":304,"./empty":322,"./from":324}],322:[function(require,module,exports){"use strict";function emptyScheduled(scheduler){return new Observable_1.Observable(function(subscriber){return scheduler.schedule(function(){return subscriber.complete()})})}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable");exports.EMPTY=new Observable_1.Observable(function(subscriber){return subscriber.complete()}),exports.empty=function(scheduler){return scheduler?emptyScheduled(scheduler):exports.EMPTY}},{"../Observable":304}],323:[function(require,module,exports){"use strict";function forkJoinInternal(sources,keys){return new Observable_1.Observable(function(subscriber){var len=sources.length;if(0===len)return void subscriber.complete();for(var values=Array(len),completed=0,emitted=0,_loop_1=function(i){var source=from_1.from(sources[i]),hasValue=!1;subscriber.add(source.subscribe({next:function(value){hasValue||(hasValue=!0,emitted++),values[i]=value},error:function(err){return subscriber.error(err)},complete:function(){completed++,completed!==len&&hasValue||(emitted===len&&subscriber.next(keys?keys.reduce(function(result,key,i){return result[key]=values[i],result},{}):values),subscriber.complete())}}))},i=0;i<len;i++)_loop_1(i)})}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),isArray_1=require("../util/isArray"),map_1=require("../operators/map"),isObject_1=require("../util/isObject"),from_1=require("./from");exports.forkJoin=function(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];if(1===sources.length){var first_1=sources[0];if(isArray_1.isArray(first_1))return forkJoinInternal(first_1,null);if(isObject_1.isObject(first_1)&&Object.getPrototypeOf(first_1)===Object.prototype){var keys=Object.keys(first_1);return forkJoinInternal(keys.map(function(key){return first_1[key]}),keys)}}if("function"==typeof sources[sources.length-1]){var resultSelector_1=sources.pop();return sources=1===sources.length&&isArray_1.isArray(sources[0])?sources[0]:sources,forkJoinInternal(sources,null).pipe(map_1.map(function(args){return resultSelector_1.apply(void 0,args)}))}return forkJoinInternal(sources,null)}},{"../Observable":304,"../operators/map":382,"../util/isArray":477,"../util/isObject":484,"./from":324}],324:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),subscribeTo_1=require("../util/subscribeTo"),scheduled_1=require("../scheduled/scheduled");exports.from=function(input,scheduler){return scheduler?scheduled_1.scheduled(input,scheduler):input instanceof Observable_1.Observable?input:new Observable_1.Observable(subscribeTo_1.subscribeTo(input))}},{"../Observable":304,"../scheduled/scheduled":450,"../util/subscribeTo":491}],325:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),subscribeToArray_1=require("../util/subscribeToArray"),scheduleArray_1=require("../scheduled/scheduleArray");exports.fromArray=function(input,scheduler){return scheduler?scheduleArray_1.scheduleArray(input,scheduler):new Observable_1.Observable(subscribeToArray_1.subscribeToArray(input))}},{"../Observable":304,"../scheduled/scheduleArray":446,"../util/subscribeToArray":492}],326:[function(require,module,exports){"use strict";function fromEvent(target,eventName,options,resultSelector){return isFunction_1.isFunction(options)&&(resultSelector=options,options=void 0),resultSelector?fromEvent(target,eventName,options).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args)})):new Observable_1.Observable(function(subscriber){setupSubscription(target,eventName,function(e){1<arguments.length?subscriber.next(Array.prototype.slice.call(arguments)):subscriber.next(e)},subscriber,options)})}function setupSubscription(sourceObj,eventName,handler,subscriber,options){var unsubscribe;if(isEventTarget(sourceObj)){sourceObj.addEventListener(eventName,handler,options),unsubscribe=function(){return sourceObj.removeEventListener(eventName,handler,options)}}else if(isJQueryStyleEventEmitter(sourceObj)){sourceObj.on(eventName,handler),unsubscribe=function(){return sourceObj.off(eventName,handler)}}else if(isNodeStyleEventEmitter(sourceObj)){sourceObj.addListener(eventName,handler),unsubscribe=function(){return sourceObj.removeListener(eventName,handler)}}else if(sourceObj&&sourceObj.length)for(var i=0,len=sourceObj.length;i<len;i++)setupSubscription(sourceObj[i],eventName,handler,subscriber,options);else throw new TypeError("Invalid event target");subscriber.add(unsubscribe)}function isNodeStyleEventEmitter(sourceObj){return sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}function isJQueryStyleEventEmitter(sourceObj){return sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}function isEventTarget(sourceObj){return sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),isArray_1=require("../util/isArray"),isFunction_1=require("../util/isFunction"),map_1=require("../operators/map"),toString=function(){return Object.prototype.toString}();exports.fromEvent=fromEvent},{"../Observable":304,"../operators/map":382,"../util/isArray":477,"../util/isFunction":480}],327:[function(require,module,exports){"use strict";function fromEventPattern(addHandler,removeHandler,resultSelector){return resultSelector?fromEventPattern(addHandler,removeHandler).pipe(map_1.map(function(args){return isArray_1.isArray(args)?resultSelector.apply(void 0,args):resultSelector(args)})):new Observable_1.Observable(function(subscriber){var handler=function(){for(var e=[],_i=0;_i<arguments.length;_i++)e[_i]=arguments[_i];return subscriber.next(1===e.length?e[0]:e)},retValue;try{retValue=addHandler(handler)}catch(err){return void subscriber.error(err)}return isFunction_1.isFunction(removeHandler)?function(){return removeHandler(handler,retValue)}:void 0})}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),isArray_1=require("../util/isArray"),isFunction_1=require("../util/isFunction"),map_1=require("../operators/map");exports.fromEventPattern=fromEventPattern},{"../Observable":304,"../operators/map":382,"../util/isArray":477,"../util/isFunction":480}],328:[function(require,module,exports){"use strict";function dispatch(state){var subscriber=state.subscriber,condition=state.condition;if(!subscriber.closed){if(state.needIterate)try{state.state=state.iterate(state.state)}catch(err){return void subscriber.error(err)}else state.needIterate=!0;if(condition){var conditionResult;try{conditionResult=condition(state.state)}catch(err){return void subscriber.error(err)}if(!conditionResult)return void subscriber.complete();if(subscriber.closed)return}var value;try{value=state.resultSelector(state.state)}catch(err){return void subscriber.error(err)}if(!subscriber.closed)return subscriber.next(value),subscriber.closed?void 0:this.schedule(state)}}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),identity_1=require("../util/identity"),isScheduler_1=require("../util/isScheduler");exports.generate=function(initialStateOrOptions,condition,iterate,resultSelectorOrObservable,scheduler){var resultSelector,initialState;if(1==arguments.length){var options=initialStateOrOptions;initialState=options.initialState,condition=options.condition,iterate=options.iterate,resultSelector=options.resultSelector||identity_1.identity,scheduler=options.scheduler}else void 0===resultSelectorOrObservable||isScheduler_1.isScheduler(resultSelectorOrObservable)?(initialState=initialStateOrOptions,resultSelector=identity_1.identity,scheduler=resultSelectorOrObservable):(initialState=initialStateOrOptions,resultSelector=resultSelectorOrObservable);return new Observable_1.Observable(function(subscriber){var state=initialState;if(scheduler)return scheduler.schedule(dispatch,0,{subscriber:subscriber,iterate:iterate,condition:condition,resultSelector:resultSelector,state:state});do{if(condition){var conditionResult=void 0;try{conditionResult=condition(state)}catch(err){return void subscriber.error(err)}if(!conditionResult){subscriber.complete();break}}var value=void 0;try{value=resultSelector(state)}catch(err){return void subscriber.error(err)}if(subscriber.next(value),subscriber.closed)break;try{state=iterate(state)}catch(err){return void subscriber.error(err)}}while(!0)})}},{"../Observable":304,"../util/identity":476,"../util/isScheduler":487}],329:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defer_1=require("./defer"),empty_1=require("./empty");exports.iif=function(condition,trueResult,falseResult){return void 0===trueResult&&(trueResult=empty_1.EMPTY),void 0===falseResult&&(falseResult=empty_1.EMPTY),defer_1.defer(function(){return condition()?trueResult:falseResult})}},{"./defer":321,"./empty":322}],330:[function(require,module,exports){"use strict";function dispatch(state){var subscriber=state.subscriber,counter=state.counter,period=state.period;subscriber.next(counter),this.schedule({subscriber:subscriber,counter:counter+1,period:period},period)}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),async_1=require("../scheduler/async"),isNumeric_1=require("../util/isNumeric");exports.interval=function(period,scheduler){return void 0===period&&(period=0),void 0===scheduler&&(scheduler=async_1.async),(!isNumeric_1.isNumeric(period)||0>period)&&(period=0),scheduler&&"function"==typeof scheduler.schedule||(scheduler=async_1.async),new Observable_1.Observable(function(subscriber){return subscriber.add(scheduler.schedule(dispatch,period,{subscriber:subscriber,counter:0,period:period})),subscriber})}},{"../Observable":304,"../scheduler/async":463,"../util/isNumeric":483}],331:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),isScheduler_1=require("../util/isScheduler"),mergeAll_1=require("../operators/mergeAll"),fromArray_1=require("./fromArray");exports.merge=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return isScheduler_1.isScheduler(last)?(scheduler=observables.pop(),1<observables.length&&"number"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):"number"==typeof last&&(concurrent=observables.pop()),null===scheduler&&1===observables.length&&observables[0]instanceof Observable_1.Observable?observables[0]:mergeAll_1.mergeAll(concurrent)(fromArray_1.fromArray(observables,scheduler))}},{"../Observable":304,"../operators/mergeAll":387,"../util/isScheduler":487,"./fromArray":325}],332:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),noop_1=require("../util/noop");exports.NEVER=new Observable_1.Observable(noop_1.noop),exports.never=function(){return exports.NEVER}},{"../Observable":304,"../util/noop":488}],333:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isScheduler_1=require("../util/isScheduler"),fromArray_1=require("./fromArray"),scheduleArray_1=require("../scheduled/scheduleArray");exports.of=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=args[args.length-1];return isScheduler_1.isScheduler(scheduler)?(args.pop(),scheduleArray_1.scheduleArray(args,scheduler)):fromArray_1.fromArray(args)}},{"../scheduled/scheduleArray":446,"../util/isScheduler":487,"./fromArray":325}],334:[function(require,module,exports){"use strict";function onErrorResumeNext(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];if(0===sources.length)return empty_1.EMPTY;var first=sources[0],remainder=sources.slice(1);return 1===sources.length&&isArray_1.isArray(first)?onErrorResumeNext.apply(void 0,first):new Observable_1.Observable(function(subscriber){var subNext=function(){return subscriber.add(onErrorResumeNext.apply(void 0,remainder).subscribe(subscriber))};return from_1.from(first).subscribe({next:function(value){subscriber.next(value)},error:subNext,complete:subNext})})}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),from_1=require("./from"),isArray_1=require("../util/isArray"),empty_1=require("./empty");exports.onErrorResumeNext=onErrorResumeNext},{"../Observable":304,"../util/isArray":477,"./empty":322,"./from":324}],335:[function(require,module,exports){"use strict";function dispatch(state){var keys=state.keys,index=state.index,subscriber=state.subscriber,subscription=state.subscription,obj=state.obj;if(!subscriber.closed)if(index<keys.length){var key=keys[index];subscriber.next([key,obj[key]]),subscription.add(this.schedule({keys:keys,index:index+1,subscriber:subscriber,subscription:subscription,obj:obj}))}else subscriber.complete()}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),Subscription_1=require("../Subscription");exports.pairs=function(obj,scheduler){return scheduler?new Observable_1.Observable(function(subscriber){var keys=Object.keys(obj),subscription=new Subscription_1.Subscription;return subscription.add(scheduler.schedule(dispatch,0,{keys:keys,index:0,subscriber:subscriber,subscription:subscription,obj:obj})),subscription}):new Observable_1.Observable(function(subscriber){for(var keys=Object.keys(obj),i=0,key;i<keys.length&&!subscriber.closed;i++)key=keys[i],obj.hasOwnProperty(key)&&subscriber.next([key,obj[key]]);subscriber.complete()})},exports.dispatch=dispatch},{"../Observable":304,"../Subscription":312}],336:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var not_1=require("../util/not"),subscribeTo_1=require("../util/subscribeTo"),filter_1=require("../operators/filter"),Observable_1=require("../Observable");exports.partition=function(source,predicate,thisArg){return[filter_1.filter(predicate,thisArg)(new Observable_1.Observable(subscribeTo_1.subscribeTo(source))),filter_1.filter(not_1.not(predicate,thisArg))(new Observable_1.Observable(subscribeTo_1.subscribeTo(source)))]}},{"../Observable":304,"../operators/filter":373,"../util/not":489,"../util/subscribeTo":491}],337:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var isArray_1=require("../util/isArray"),fromArray_1=require("./fromArray"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.race=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];if(1===observables.length)if(isArray_1.isArray(observables[0]))observables=observables[0];else return observables[0];return fromArray_1.fromArray(observables,void 0).lift(new RaceOperator)};var RaceOperator=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(subscriber,source){return source.subscribe(new RaceSubscriber(subscriber))},RaceOperator}();exports.RaceOperator=RaceOperator;var RaceSubscriber=function(_super){function RaceSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.hasFirst=!1,_this.observables=[],_this.subscriptions=[],_this}return __extends(RaceSubscriber,_super),RaceSubscriber.prototype._next=function(observable){this.observables.push(observable)},RaceSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{for(var i=0;i<len&&!this.hasFirst;i++){var observable=observables[i],subscription=subscribeToResult_1.subscribeToResult(this,observable,void 0,i);this.subscriptions&&this.subscriptions.push(subscription),this.add(subscription)}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(_outerValue,innerValue,outerIndex){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==outerIndex){var subscription=this.subscriptions[i];subscription.unsubscribe(),this.remove(subscription)}this.subscriptions=null}this.destination.next(innerValue)},RaceSubscriber}(OuterSubscriber_1.OuterSubscriber);exports.RaceSubscriber=RaceSubscriber},{"../OuterSubscriber":306,"../util/isArray":477,"../util/subscribeToResult":496,"./fromArray":325}],338:[function(require,module,exports){"use strict";function dispatch(state){var start=state.start,index=state.index,count=state.count,subscriber=state.subscriber;if(index>=count)return void subscriber.complete();subscriber.next(start);subscriber.closed||(state.index=index+1,state.start=start+1,this.schedule(state))}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable");exports.range=function(start,count,scheduler){return void 0===start&&(start=0),new Observable_1.Observable(function(subscriber){void 0===count&&(count=start,start=0);var index=0,current=start;if(scheduler)return scheduler.schedule(dispatch,0,{index:index,count:count,start:start,subscriber:subscriber});do{if(index++>=count){subscriber.complete();break}if(subscriber.next(current++),subscriber.closed)break}while(!0)})},exports.dispatch=dispatch},{"../Observable":304}],339:[function(require,module,exports){"use strict";function dispatch(_a){var error=_a.error,subscriber=_a.subscriber;subscriber.error(error)}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable");exports.throwError=function(error,scheduler){return scheduler?new Observable_1.Observable(function(subscriber){return scheduler.schedule(dispatch,0,{error:error,subscriber:subscriber})}):new Observable_1.Observable(function(subscriber){return subscriber.error(error)})}},{"../Observable":304}],340:[function(require,module,exports){"use strict";function dispatch(state){var index=state.index,period=state.period,subscriber=state.subscriber;if(subscriber.next(index),!subscriber.closed)return-1===period?subscriber.complete():void(state.index=index+1,this.schedule(state,period))}Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),async_1=require("../scheduler/async"),isNumeric_1=require("../util/isNumeric"),isScheduler_1=require("../util/isScheduler");exports.timer=function(dueTime,periodOrScheduler,scheduler){void 0===dueTime&&(dueTime=0);var period=-1;return isNumeric_1.isNumeric(periodOrScheduler)?period=1>+periodOrScheduler&&1||+periodOrScheduler:isScheduler_1.isScheduler(periodOrScheduler)&&(scheduler=periodOrScheduler),isScheduler_1.isScheduler(scheduler)||(scheduler=async_1.async),new Observable_1.Observable(function(subscriber){var due=isNumeric_1.isNumeric(dueTime)?dueTime:+dueTime-scheduler.now();return scheduler.schedule(dispatch,due,{index:0,period:period,subscriber:subscriber})})}},{"../Observable":304,"../scheduler/async":463,"../util/isNumeric":483,"../util/isScheduler":487}],341:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),from_1=require("./from"),empty_1=require("./empty");exports.using=function(resourceFactory,observableFactory){return new Observable_1.Observable(function(subscriber){var resource;try{resource=resourceFactory()}catch(err){return void subscriber.error(err)}var result;try{result=observableFactory(resource)}catch(err){return void subscriber.error(err)}var source=result?from_1.from(result):empty_1.EMPTY,subscription=source.subscribe(subscriber);return function(){subscription.unsubscribe(),resource&&resource.unsubscribe()}})}},{"../Observable":304,"./empty":322,"./from":324}],342:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var fromArray_1=require("./fromArray"),isArray_1=require("../util/isArray"),Subscriber_1=require("../Subscriber"),iterator_1=require("../../internal/symbol/iterator"),innerSubscribe_1=require("../innerSubscribe");exports.zip=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var resultSelector=observables[observables.length-1];return"function"==typeof resultSelector&&observables.pop(),fromArray_1.fromArray(observables,void 0).lift(new ZipOperator(resultSelector))};var ZipOperator=function(){function ZipOperator(resultSelector){this.resultSelector=resultSelector}return ZipOperator.prototype.call=function(subscriber,source){return source.subscribe(new ZipSubscriber(subscriber,this.resultSelector))},ZipOperator}();exports.ZipOperator=ZipOperator;var ZipSubscriber=function(_super){function ZipSubscriber(destination,resultSelector,values){void 0===values&&(values=Object.create(null));var _this=_super.call(this,destination)||this;return _this.resultSelector=resultSelector,_this.iterators=[],_this.active=0,_this.resultSelector="function"==typeof resultSelector?resultSelector:void 0,_this}return __extends(ZipSubscriber,_super),ZipSubscriber.prototype._next=function(value){var iterators=this.iterators;isArray_1.isArray(value)?iterators.push(new StaticArrayIterator(value)):"function"==typeof value[iterator_1.iterator]?iterators.push(new StaticIterator(value[iterator_1.iterator]())):iterators.push(new ZipBufferIterator(this.destination,this,value))},ZipSubscriber.prototype._complete=function(){var iterators=this.iterators,len=iterators.length;if(this.unsubscribe(),0===len)return void this.destination.complete();this.active=len;for(var i=0,iterator;i<len;i++)if(iterator=iterators[i],iterator.stillUnsubscribed){var destination=this.destination;destination.add(iterator.subscribe())}else this.active--},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var iterators=this.iterators,len=iterators.length,destination=this.destination,i=0,iterator;i<len;i++)if(iterator=iterators[i],"function"==typeof iterator.hasValue&&!iterator.hasValue())return;for(var shouldComplete=!1,args=[],i=0;i<len;i++){var iterator=iterators[i],result=iterator.next();if(iterator.hasCompleted()&&(shouldComplete=!0),result.done)return void destination.complete();args.push(result.value)}this.resultSelector?this._tryresultSelector(args):destination.next(args),shouldComplete&&destination.complete()},ZipSubscriber.prototype._tryresultSelector=function(args){var result;try{result=this.resultSelector.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},ZipSubscriber}(Subscriber_1.Subscriber);exports.ZipSubscriber=ZipSubscriber;var StaticIterator=function(){function StaticIterator(iterator){this.iterator=iterator,this.nextResult=iterator.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var result=this.nextResult;return this.nextResult=this.iterator.next(),result},StaticIterator.prototype.hasCompleted=function(){var nextResult=this.nextResult;return!!(nextResult&&nextResult.done)},StaticIterator}(),StaticArrayIterator=function(){function StaticArrayIterator(array){this.array=array,this.index=0,this.length=0,this.length=array.length}return StaticArrayIterator.prototype[iterator_1.iterator]=function(){return this},StaticArrayIterator.prototype.next=function(){var i=this.index++,array=this.array;return i<this.length?{value:array[i],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),ZipBufferIterator=function(_super){function ZipBufferIterator(destination,parent,observable){var _this=_super.call(this,destination)||this;return _this.parent=parent,_this.observable=observable,_this.stillUnsubscribed=!0,_this.buffer=[],_this.isComplete=!1,_this}return __extends(ZipBufferIterator,_super),ZipBufferIterator.prototype[iterator_1.iterator]=function(){return this},ZipBufferIterator.prototype.next=function(){var buffer=this.buffer;return 0===buffer.length&&this.isComplete?{value:null,done:!0}:{value:buffer.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return 0<this.buffer.length},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(innerValue){this.buffer.push(innerValue),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(){return innerSubscribe_1.innerSubscribe(this.observable,new innerSubscribe_1.SimpleInnerSubscriber(this))},ZipBufferIterator}(innerSubscribe_1.SimpleOuterSubscriber)},{"../../internal/symbol/iterator":465,"../Subscriber":311,"../innerSubscribe":314,"../util/isArray":477,"./fromArray":325}],343:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.audit=function(durationSelector){return function(source){return source.lift(new AuditOperator(durationSelector))}};var AuditOperator=function(){function AuditOperator(durationSelector){this.durationSelector=durationSelector}return AuditOperator.prototype.call=function(subscriber,source){return source.subscribe(new AuditSubscriber(subscriber,this.durationSelector))},AuditOperator}(),AuditSubscriber=function(_super){function AuditSubscriber(destination,durationSelector){var _this=_super.call(this,destination)||this;return _this.durationSelector=durationSelector,_this.hasValue=!1,_this}return __extends(AuditSubscriber,_super),AuditSubscriber.prototype._next=function(value){if(this.value=value,this.hasValue=!0,!this.throttled){var duration;try{var durationSelector=this.durationSelector;duration=durationSelector(value)}catch(err){return this.destination.error(err)}var innerSubscription=innerSubscribe_1.innerSubscribe(duration,new innerSubscribe_1.SimpleInnerSubscriber(this));!innerSubscription||innerSubscription.closed?this.clearThrottle():this.add(this.throttled=innerSubscription)}},AuditSubscriber.prototype.clearThrottle=function(){var _a=this,value=_a.value,hasValue=_a.hasValue,throttled=_a.throttled;throttled&&(this.remove(throttled),this.throttled=void 0,throttled.unsubscribe()),hasValue&&(this.value=void 0,this.hasValue=!1,this.destination.next(value))},AuditSubscriber.prototype.notifyNext=function(){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],344:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),audit_1=require("./audit"),timer_1=require("../observable/timer");exports.auditTime=function(duration,scheduler){return void 0===scheduler&&(scheduler=async_1.async),audit_1.audit(function(){return timer_1.timer(duration,scheduler)})}},{"../observable/timer":340,"../scheduler/async":463,"./audit":343}],345:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.buffer=function(closingNotifier){return function(source){return source.lift(new BufferOperator(closingNotifier))}};var BufferOperator=function(){function BufferOperator(closingNotifier){this.closingNotifier=closingNotifier}return BufferOperator.prototype.call=function(subscriber,source){return source.subscribe(new BufferSubscriber(subscriber,this.closingNotifier))},BufferOperator}(),BufferSubscriber=function(_super){function BufferSubscriber(destination,closingNotifier){var _this=_super.call(this,destination)||this;return _this.buffer=[],_this.add(innerSubscribe_1.innerSubscribe(closingNotifier,new innerSubscribe_1.SimpleInnerSubscriber(_this))),_this}return __extends(BufferSubscriber,_super),BufferSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferSubscriber.prototype.notifyNext=function(){var buffer=this.buffer;this.buffer=[],this.destination.next(buffer)},BufferSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],346:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.bufferCount=function(bufferSize,startBufferEvery){return void 0===startBufferEvery&&(startBufferEvery=null),function(source){return source.lift(new BufferCountOperator(bufferSize,startBufferEvery))}};var BufferCountOperator=function(){function BufferCountOperator(bufferSize,startBufferEvery){this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.subscriberClass=startBufferEvery&&bufferSize!==startBufferEvery?BufferSkipCountSubscriber:BufferCountSubscriber}return BufferCountOperator.prototype.call=function(subscriber,source){return source.subscribe(new this.subscriberClass(subscriber,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),BufferCountSubscriber=function(_super){function BufferCountSubscriber(destination,bufferSize){var _this=_super.call(this,destination)||this;return _this.bufferSize=bufferSize,_this.buffer=[],_this}return __extends(BufferCountSubscriber,_super),BufferCountSubscriber.prototype._next=function(value){var buffer=this.buffer;buffer.push(value),buffer.length==this.bufferSize&&(this.destination.next(buffer),this.buffer=[])},BufferCountSubscriber.prototype._complete=function(){var buffer=this.buffer;0<buffer.length&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferCountSubscriber}(Subscriber_1.Subscriber),BufferSkipCountSubscriber=function(_super){function BufferSkipCountSubscriber(destination,bufferSize,startBufferEvery){var _this=_super.call(this,destination)||this;return _this.bufferSize=bufferSize,_this.startBufferEvery=startBufferEvery,_this.buffers=[],_this.count=0,_this}return __extends(BufferSkipCountSubscriber,_super),BufferSkipCountSubscriber.prototype._next=function(value){var _a=this,bufferSize=_a.bufferSize,startBufferEvery=_a.startBufferEvery,buffers=_a.buffers,count=_a.count;this.count++,0==count%startBufferEvery&&buffers.push([]);for(var i=buffers.length,buffer;i--;)buffer=buffers[i],buffer.push(value),buffer.length===bufferSize&&(buffers.splice(i,1),this.destination.next(buffer))},BufferSkipCountSubscriber.prototype._complete=function(){for(var _a=this,buffers=_a.buffers,destination=_a.destination,buffer;0<buffers.length;)buffer=buffers.shift(),0<buffer.length&&destination.next(buffer);_super.prototype._complete.call(this)},BufferSkipCountSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],347:[function(require,module,exports){"use strict";function dispatchBufferTimeSpanOnly(state){var subscriber=state.subscriber,prevContext=state.context;prevContext&&subscriber.closeContext(prevContext),subscriber.closed||(state.context=subscriber.openContext(),state.context.closeAction=this.schedule(state,state.bufferTimeSpan))}function dispatchBufferCreation(state){var bufferCreationInterval=state.bufferCreationInterval,bufferTimeSpan=state.bufferTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,context=subscriber.openContext(),action=this;subscriber.closed||(subscriber.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:subscriber,context:context})),action.schedule(state,bufferCreationInterval))}function dispatchBufferClose(arg){var subscriber=arg.subscriber,context=arg.context;subscriber.closeContext(context)}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),Subscriber_1=require("../Subscriber"),isScheduler_1=require("../util/isScheduler");exports.bufferTime=function(bufferTimeSpan){var length=arguments.length,scheduler=async_1.async;isScheduler_1.isScheduler(arguments[arguments.length-1])&&(scheduler=arguments[arguments.length-1],length--);var bufferCreationInterval=null;2<=length&&(bufferCreationInterval=arguments[1]);var maxBufferSize=Number.POSITIVE_INFINITY;return 3<=length&&(maxBufferSize=arguments[2]),function(source){return source.lift(new BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler))}};var BufferTimeOperator=function(){function BufferTimeOperator(bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){this.bufferTimeSpan=bufferTimeSpan,this.bufferCreationInterval=bufferCreationInterval,this.maxBufferSize=maxBufferSize,this.scheduler=scheduler}return BufferTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new BufferTimeSubscriber(subscriber,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),Context=function(){return function(){this.buffer=[]}}(),BufferTimeSubscriber=function(_super){function BufferTimeSubscriber(destination,bufferTimeSpan,bufferCreationInterval,maxBufferSize,scheduler){var _this=_super.call(this,destination)||this;_this.bufferTimeSpan=bufferTimeSpan,_this.bufferCreationInterval=bufferCreationInterval,_this.maxBufferSize=maxBufferSize,_this.scheduler=scheduler,_this.contexts=[];var context=_this.openContext();if(_this.timespanOnly=null==bufferCreationInterval||0>bufferCreationInterval,_this.timespanOnly){_this.add(context.closeAction=scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,{subscriber:_this,context:context,bufferTimeSpan:bufferTimeSpan}))}else{_this.add(context.closeAction=scheduler.schedule(dispatchBufferClose,bufferTimeSpan,{subscriber:_this,context:context})),_this.add(scheduler.schedule(dispatchBufferCreation,bufferCreationInterval,{bufferTimeSpan:bufferTimeSpan,bufferCreationInterval:bufferCreationInterval,subscriber:_this,scheduler:scheduler}))}return _this}return __extends(BufferTimeSubscriber,_super),BufferTimeSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0,filledBufferContext;i<len;i++){var context_1=contexts[i],buffer=context_1.buffer;buffer.push(value),buffer.length==this.maxBufferSize&&(filledBufferContext=context_1)}filledBufferContext&&this.onBufferFull(filledBufferContext)},BufferTimeSubscriber.prototype._error=function(err){this.contexts.length=0,_super.prototype._error.call(this,err)},BufferTimeSubscriber.prototype._complete=function(){for(var _a=this,contexts=_a.contexts,destination=_a.destination,context_2;0<contexts.length;)context_2=contexts.shift(),destination.next(context_2.buffer);_super.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(context){this.closeContext(context);var closeAction=context.closeAction;if(closeAction.unsubscribe(),this.remove(closeAction),!this.closed&&this.timespanOnly){context=this.openContext();var bufferTimeSpan=this.bufferTimeSpan,timeSpanOnlyState={subscriber:this,context:context,bufferTimeSpan:bufferTimeSpan};this.add(context.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,bufferTimeSpan,timeSpanOnlyState))}},BufferTimeSubscriber.prototype.openContext=function(){var context=new Context;return this.contexts.push(context),context},BufferTimeSubscriber.prototype.closeContext=function(context){this.destination.next(context.buffer);var contexts=this.contexts,spliceIndex=contexts?contexts.indexOf(context):-1;0<=spliceIndex&&contexts.splice(contexts.indexOf(context),1)},BufferTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../scheduler/async":463,"../util/isScheduler":487}],348:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscription_1=require("../Subscription"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber");exports.bufferToggle=function(openings,closingSelector){return function(source){return source.lift(new BufferToggleOperator(openings,closingSelector))}};var BufferToggleOperator=function(){function BufferToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return BufferToggleOperator.prototype.call=function(subscriber,source){return source.subscribe(new BufferToggleSubscriber(subscriber,this.openings,this.closingSelector))},BufferToggleOperator}(),BufferToggleSubscriber=function(_super){function BufferToggleSubscriber(destination,openings,closingSelector){var _this=_super.call(this,destination)||this;return _this.closingSelector=closingSelector,_this.contexts=[],_this.add(subscribeToResult_1.subscribeToResult(_this,openings)),_this}return __extends(BufferToggleSubscriber,_super),BufferToggleSubscriber.prototype._next=function(value){for(var contexts=this.contexts,len=contexts.length,i=0;i<len;i++)contexts[i].buffer.push(value)},BufferToggleSubscriber.prototype._error=function(err){for(var contexts=this.contexts,context_1;0<contexts.length;)context_1=contexts.shift(),context_1.subscription.unsubscribe(),context_1.buffer=null,context_1.subscription=null;this.contexts=null,_super.prototype._error.call(this,err)},BufferToggleSubscriber.prototype._complete=function(){for(var contexts=this.contexts,context_2;0<contexts.length;)context_2=contexts.shift(),this.destination.next(context_2.buffer),context_2.subscription.unsubscribe(),context_2.buffer=null,context_2.subscription=null;this.contexts=null,_super.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue){outerValue?this.closeBuffer(outerValue):this.openBuffer(innerValue)},BufferToggleSubscriber.prototype.notifyComplete=function(innerSub){this.closeBuffer(innerSub.context)},BufferToggleSubscriber.prototype.openBuffer=function(value){try{var closingSelector=this.closingSelector,closingNotifier=closingSelector.call(this,value);closingNotifier&&this.trySubscribe(closingNotifier)}catch(err){this._error(err)}},BufferToggleSubscriber.prototype.closeBuffer=function(context){var contexts=this.contexts;if(contexts&&context){var buffer=context.buffer,subscription=context.subscription;this.destination.next(buffer),contexts.splice(contexts.indexOf(context),1),this.remove(subscription),subscription.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(closingNotifier){var contexts=this.contexts,subscription=new Subscription_1.Subscription,context={buffer:[],subscription:subscription};contexts.push(context);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context);!innerSubscription||innerSubscription.closed?this.closeBuffer(context):(innerSubscription.context=context,this.add(innerSubscription),subscription.add(innerSubscription))},BufferToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":306,"../Subscription":312,"../util/subscribeToResult":496}],349:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscription_1=require("../Subscription"),innerSubscribe_1=require("../innerSubscribe");exports.bufferWhen=function(closingSelector){return function(source){return source.lift(new BufferWhenOperator(closingSelector))}};var BufferWhenOperator=function(){function BufferWhenOperator(closingSelector){this.closingSelector=closingSelector}return BufferWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new BufferWhenSubscriber(subscriber,this.closingSelector))},BufferWhenOperator}(),BufferWhenSubscriber=function(_super){function BufferWhenSubscriber(destination,closingSelector){var _this=_super.call(this,destination)||this;return _this.closingSelector=closingSelector,_this.subscribing=!1,_this.openBuffer(),_this}return __extends(BufferWhenSubscriber,_super),BufferWhenSubscriber.prototype._next=function(value){this.buffer.push(value)},BufferWhenSubscriber.prototype._complete=function(){var buffer=this.buffer;buffer&&this.destination.next(buffer),_super.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var closingSubscription=this.closingSubscription;closingSubscription&&(this.remove(closingSubscription),closingSubscription.unsubscribe());var buffer=this.buffer;this.buffer&&this.destination.next(buffer),this.buffer=[];var closingNotifier;try{var closingSelector=this.closingSelector;closingNotifier=closingSelector()}catch(err){return this.error(err)}closingSubscription=new Subscription_1.Subscription,this.closingSubscription=closingSubscription,this.add(closingSubscription),this.subscribing=!0,closingSubscription.add(innerSubscribe_1.innerSubscribe(closingNotifier,new innerSubscribe_1.SimpleInnerSubscriber(this))),this.subscribing=!1},BufferWhenSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../Subscription":312,"../innerSubscribe":314}],350:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.catchError=function(selector){return function(source){var operator=new CatchOperator(selector),caught=source.lift(operator);return operator.caught=caught}};var CatchOperator=function(){function CatchOperator(selector){this.selector=selector}return CatchOperator.prototype.call=function(subscriber,source){return source.subscribe(new CatchSubscriber(subscriber,this.selector,this.caught))},CatchOperator}(),CatchSubscriber=function(_super){function CatchSubscriber(destination,selector,caught){var _this=_super.call(this,destination)||this;return _this.selector=selector,_this.caught=caught,_this}return __extends(CatchSubscriber,_super),CatchSubscriber.prototype.error=function(err){if(!this.isStopped){var result;try{result=this.selector(err,this.caught)}catch(err2){return void _super.prototype.error.call(this,err2)}this._unsubscribeAndRecycle();var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(this);this.add(innerSubscriber);var innerSubscription=innerSubscribe_1.innerSubscribe(result,innerSubscriber);innerSubscription!==innerSubscriber&&this.add(innerSubscription)}},CatchSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],351:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var combineLatest_1=require("../observable/combineLatest");exports.combineAll=function(project){return function(source){return source.lift(new combineLatest_1.CombineLatestOperator(project))}}},{"../observable/combineLatest":319}],352:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isArray_1=require("../util/isArray"),combineLatest_1=require("../observable/combineLatest"),from_1=require("../observable/from");exports.combineLatest=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];var project=null;return"function"==typeof observables[observables.length-1]&&(project=observables.pop()),1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0].slice()),function(source){return source.lift.call(from_1.from([source].concat(observables)),new combineLatest_1.CombineLatestOperator(project))}}},{"../observable/combineLatest":319,"../observable/from":324,"../util/isArray":477}],353:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var concat_1=require("../observable/concat");exports.concat=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return source.lift.call(concat_1.concat.apply(void 0,[source].concat(observables)))}}},{"../observable/concat":320}],354:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mergeAll_1=require("./mergeAll");exports.concatAll=function(){return mergeAll_1.mergeAll(1)}},{"./mergeAll":387}],355:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mergeMap_1=require("./mergeMap");exports.concatMap=function(project,resultSelector){return mergeMap_1.mergeMap(project,resultSelector,1)}},{"./mergeMap":388}],356:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var concatMap_1=require("./concatMap");exports.concatMapTo=function(innerObservable,resultSelector){return concatMap_1.concatMap(function(){return innerObservable},resultSelector)}},{"./concatMap":355}],357:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.count=function(predicate){return function(source){return source.lift(new CountOperator(predicate,source))}};var CountOperator=function(){function CountOperator(predicate,source){this.predicate=predicate,this.source=source}return CountOperator.prototype.call=function(subscriber,source){return source.subscribe(new CountSubscriber(subscriber,this.predicate,this.source))},CountOperator}(),CountSubscriber=function(_super){function CountSubscriber(destination,predicate,source){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.source=source,_this.count=0,_this.index=0,_this}return __extends(CountSubscriber,_super),CountSubscriber.prototype._next=function(value){this.predicate?this._tryPredicate(value):this.count++},CountSubscriber.prototype._tryPredicate=function(value){var result;try{result=this.predicate(value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],358:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.debounce=function(durationSelector){return function(source){return source.lift(new DebounceOperator(durationSelector))}};var DebounceOperator=function(){function DebounceOperator(durationSelector){this.durationSelector=durationSelector}return DebounceOperator.prototype.call=function(subscriber,source){return source.subscribe(new DebounceSubscriber(subscriber,this.durationSelector))},DebounceOperator}(),DebounceSubscriber=function(_super){function DebounceSubscriber(destination,durationSelector){var _this=_super.call(this,destination)||this;return _this.durationSelector=durationSelector,_this.hasValue=!1,_this}return __extends(DebounceSubscriber,_super),DebounceSubscriber.prototype._next=function(value){try{var result=this.durationSelector.call(this,value);result&&this._tryNext(value,result)}catch(err){this.destination.error(err)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(value,duration){var subscription=this.durationSubscription;this.value=value,this.hasValue=!0,subscription&&(subscription.unsubscribe(),this.remove(subscription)),subscription=innerSubscribe_1.innerSubscribe(duration,new innerSubscribe_1.SimpleInnerSubscriber(this)),subscription&&!subscription.closed&&this.add(this.durationSubscription=subscription)},DebounceSubscriber.prototype.notifyNext=function(){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var value=this.value,subscription=this.durationSubscription;subscription&&(this.durationSubscription=void 0,subscription.unsubscribe(),this.remove(subscription)),this.value=void 0,this.hasValue=!1,_super.prototype._next.call(this,value)}},DebounceSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],359:[function(require,module,exports){"use strict";function dispatchNext(subscriber){subscriber.debouncedNext()}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.debounceTime=function(dueTime,scheduler){return void 0===scheduler&&(scheduler=async_1.async),function(source){return source.lift(new DebounceTimeOperator(dueTime,scheduler))}};var DebounceTimeOperator=function(){function DebounceTimeOperator(dueTime,scheduler){this.dueTime=dueTime,this.scheduler=scheduler}return DebounceTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new DebounceTimeSubscriber(subscriber,this.dueTime,this.scheduler))},DebounceTimeOperator}(),DebounceTimeSubscriber=function(_super){function DebounceTimeSubscriber(destination,dueTime,scheduler){var _this=_super.call(this,destination)||this;return _this.dueTime=dueTime,_this.scheduler=scheduler,_this.debouncedSubscription=null,_this.lastValue=null,_this.hasValue=!1,_this}return __extends(DebounceTimeSubscriber,_super),DebounceTimeSubscriber.prototype._next=function(value){this.clearDebounce(),this.lastValue=value,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var lastValue=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(lastValue)}},DebounceTimeSubscriber.prototype.clearDebounce=function(){var debouncedSubscription=this.debouncedSubscription;null!==debouncedSubscription&&(this.remove(debouncedSubscription),debouncedSubscription.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../scheduler/async":463}],360:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.defaultIfEmpty=function(defaultValue){return void 0===defaultValue&&(defaultValue=null),function(source){return source.lift(new DefaultIfEmptyOperator(defaultValue))}};var DefaultIfEmptyOperator=function(){function DefaultIfEmptyOperator(defaultValue){this.defaultValue=defaultValue}return DefaultIfEmptyOperator.prototype.call=function(subscriber,source){return source.subscribe(new DefaultIfEmptySubscriber(subscriber,this.defaultValue))},DefaultIfEmptyOperator}(),DefaultIfEmptySubscriber=function(_super){function DefaultIfEmptySubscriber(destination,defaultValue){var _this=_super.call(this,destination)||this;return _this.defaultValue=defaultValue,_this.isEmpty=!0,_this}return __extends(DefaultIfEmptySubscriber,_super),DefaultIfEmptySubscriber.prototype._next=function(value){this.isEmpty=!1,this.destination.next(value)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],361:[function(require,module,exports){"use strict";function delay(delay,scheduler){void 0===scheduler&&(scheduler=async_1.async);var absoluteDelay=isDate_1.isDate(delay),delayFor=absoluteDelay?+delay-scheduler.now():Math.abs(delay);return function(source){return source.lift(new DelayOperator(delayFor,scheduler))}}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),isDate_1=require("../util/isDate"),Subscriber_1=require("../Subscriber"),Notification_1=require("../Notification");exports.delay=delay;var DelayOperator=function(){function DelayOperator(delay,scheduler){this.delay=delay,this.scheduler=scheduler}return DelayOperator.prototype.call=function(subscriber,source){return source.subscribe(new DelaySubscriber(subscriber,this.delay,this.scheduler))},DelayOperator}(),DelaySubscriber=function(_super){function DelaySubscriber(destination,delay,scheduler){var _this=_super.call(this,destination)||this;return _this.delay=delay,_this.scheduler=scheduler,_this.queue=[],_this.active=!1,_this.errored=!1,_this}return __extends(DelaySubscriber,_super),DelaySubscriber.dispatch=function(state){for(var source=state.source,queue=source.queue,scheduler=state.scheduler,destination=state.destination;0<queue.length&&0>=queue[0].time-scheduler.now();)queue.shift().notification.observe(destination);if(0<queue.length){var delay_1=Math.max(0,queue[0].time-scheduler.now());this.schedule(state,delay_1)}else this.unsubscribe(),source.active=!1},DelaySubscriber.prototype._schedule=function(scheduler){this.active=!0;var destination=this.destination;destination.add(scheduler.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:scheduler}))},DelaySubscriber.prototype.scheduleNotification=function(notification){if(!0!==this.errored){var scheduler=this.scheduler,message=new DelayMessage(scheduler.now()+this.delay,notification);this.queue.push(message),!1===this.active&&this._schedule(scheduler)}},DelaySubscriber.prototype._next=function(value){this.scheduleNotification(Notification_1.Notification.createNext(value))},DelaySubscriber.prototype._error=function(err){this.errored=!0,this.queue=[],this.destination.error(err),this.unsubscribe()},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(Notification_1.Notification.createComplete()),this.unsubscribe()},DelaySubscriber}(Subscriber_1.Subscriber),DelayMessage=function(){return function(time,notification){this.time=time,this.notification=notification}}()},{"../Notification":303,"../Subscriber":311,"../scheduler/async":463,"../util/isDate":479}],362:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),Observable_1=require("../Observable"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.delayWhen=function(delayDurationSelector,subscriptionDelay){return subscriptionDelay?function(source){return new SubscriptionDelayObservable(source,subscriptionDelay).lift(new DelayWhenOperator(delayDurationSelector))}:function(source){return source.lift(new DelayWhenOperator(delayDurationSelector))}};var DelayWhenOperator=function(){function DelayWhenOperator(delayDurationSelector){this.delayDurationSelector=delayDurationSelector}return DelayWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new DelayWhenSubscriber(subscriber,this.delayDurationSelector))},DelayWhenOperator}(),DelayWhenSubscriber=function(_super){function DelayWhenSubscriber(destination,delayDurationSelector){var _this=_super.call(this,destination)||this;return _this.delayDurationSelector=delayDurationSelector,_this.completed=!1,_this.delayNotifierSubscriptions=[],_this.index=0,_this}return __extends(DelayWhenSubscriber,_super),DelayWhenSubscriber.prototype.notifyNext=function(outerValue,_innerValue,_outerIndex,_innerIndex,innerSub){this.destination.next(outerValue),this.removeSubscription(innerSub),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(error){this._error(error)},DelayWhenSubscriber.prototype.notifyComplete=function(innerSub){var value=this.removeSubscription(innerSub);value&&this.destination.next(value),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(value){var index=this.index++;try{var delayNotifier=this.delayDurationSelector(value,index);delayNotifier&&this.tryDelay(delayNotifier,value)}catch(err){this.destination.error(err)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},DelayWhenSubscriber.prototype.removeSubscription=function(subscription){subscription.unsubscribe();var subscriptionIdx=this.delayNotifierSubscriptions.indexOf(subscription);return-1!==subscriptionIdx&&this.delayNotifierSubscriptions.splice(subscriptionIdx,1),subscription.outerValue},DelayWhenSubscriber.prototype.tryDelay=function(delayNotifier,value){var notifierSubscription=subscribeToResult_1.subscribeToResult(this,delayNotifier,value);if(notifierSubscription&&!notifierSubscription.closed){var destination=this.destination;destination.add(notifierSubscription),this.delayNotifierSubscriptions.push(notifierSubscription)}},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(OuterSubscriber_1.OuterSubscriber),SubscriptionDelayObservable=function(_super){function SubscriptionDelayObservable(source,subscriptionDelay){var _this=_super.call(this)||this;return _this.source=source,_this.subscriptionDelay=subscriptionDelay,_this}return __extends(SubscriptionDelayObservable,_super),SubscriptionDelayObservable.prototype._subscribe=function(subscriber){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber,this.source))},SubscriptionDelayObservable}(Observable_1.Observable),SubscriptionDelaySubscriber=function(_super){function SubscriptionDelaySubscriber(parent,source){var _this=_super.call(this)||this;return _this.parent=parent,_this.source=source,_this.sourceSubscribed=!1,_this}return __extends(SubscriptionDelaySubscriber,_super),SubscriptionDelaySubscriber.prototype._next=function(){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(err){this.unsubscribe(),this.parent.error(err)},SubscriptionDelaySubscriber.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(Subscriber_1.Subscriber)},{"../Observable":304,"../OuterSubscriber":306,"../Subscriber":311,"../util/subscribeToResult":496}],363:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.dematerialize=function(){return function(source){return source.lift(new DeMaterializeOperator)}};var DeMaterializeOperator=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(subscriber,source){return source.subscribe(new DeMaterializeSubscriber(subscriber))},DeMaterializeOperator}(),DeMaterializeSubscriber=function(_super){function DeMaterializeSubscriber(destination){return _super.call(this,destination)||this}return __extends(DeMaterializeSubscriber,_super),DeMaterializeSubscriber.prototype._next=function(value){value.observe(this.destination)},DeMaterializeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],364:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.distinct=function(keySelector,flushes){return function(source){return source.lift(new DistinctOperator(keySelector,flushes))}};var DistinctOperator=function(){function DistinctOperator(keySelector,flushes){this.keySelector=keySelector,this.flushes=flushes}return DistinctOperator.prototype.call=function(subscriber,source){return source.subscribe(new DistinctSubscriber(subscriber,this.keySelector,this.flushes))},DistinctOperator}(),DistinctSubscriber=function(_super){function DistinctSubscriber(destination,keySelector,flushes){var _this=_super.call(this,destination)||this;return _this.keySelector=keySelector,_this.values=new Set,flushes&&_this.add(innerSubscribe_1.innerSubscribe(flushes,new innerSubscribe_1.SimpleInnerSubscriber(_this))),_this}return __extends(DistinctSubscriber,_super),DistinctSubscriber.prototype.notifyNext=function(){this.values.clear()},DistinctSubscriber.prototype.notifyError=function(error){this._error(error)},DistinctSubscriber.prototype._next=function(value){this.keySelector?this._useKeySelector(value):this._finalizeNext(value,value)},DistinctSubscriber.prototype._useKeySelector=function(value){var destination=this.destination,key;try{key=this.keySelector(value)}catch(err){return void destination.error(err)}this._finalizeNext(key,value)},DistinctSubscriber.prototype._finalizeNext=function(key,value){var values=this.values;values.has(key)||(values.add(key),this.destination.next(value))},DistinctSubscriber}(innerSubscribe_1.SimpleOuterSubscriber);exports.DistinctSubscriber=DistinctSubscriber},{"../innerSubscribe":314}],365:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.distinctUntilChanged=function(compare,keySelector){return function(source){return source.lift(new DistinctUntilChangedOperator(compare,keySelector))}};var DistinctUntilChangedOperator=function(){function DistinctUntilChangedOperator(compare,keySelector){this.compare=compare,this.keySelector=keySelector}return DistinctUntilChangedOperator.prototype.call=function(subscriber,source){return source.subscribe(new DistinctUntilChangedSubscriber(subscriber,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),DistinctUntilChangedSubscriber=function(_super){function DistinctUntilChangedSubscriber(destination,compare,keySelector){var _this=_super.call(this,destination)||this;return _this.keySelector=keySelector,_this.hasKey=!1,"function"==typeof compare&&(_this.compare=compare),_this}return __extends(DistinctUntilChangedSubscriber,_super),DistinctUntilChangedSubscriber.prototype.compare=function(x,y){return x===y},DistinctUntilChangedSubscriber.prototype._next=function(value){var key;try{var keySelector=this.keySelector;key=keySelector?keySelector(value):value}catch(err){return this.destination.error(err)}var result=!1;if(this.hasKey)try{var compare=this.compare;result=compare(this.key,key)}catch(err){return this.destination.error(err)}else this.hasKey=!0;result||(this.key=key,this.destination.next(value))},DistinctUntilChangedSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],366:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var distinctUntilChanged_1=require("./distinctUntilChanged");exports.distinctUntilKeyChanged=function(key,compare){return distinctUntilChanged_1.distinctUntilChanged(function(x,y){return compare?compare(x[key],y[key]):x[key]===y[key]})}},{"./distinctUntilChanged":365}],367:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),filter_1=require("./filter"),throwIfEmpty_1=require("./throwIfEmpty"),defaultIfEmpty_1=require("./defaultIfEmpty"),take_1=require("./take");exports.elementAt=function(index,defaultValue){if(0>index)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;var hasDefaultValue=2<=arguments.length;return function(source){return source.pipe(filter_1.filter(function(v,i){return i===index}),take_1.take(1),hasDefaultValue?defaultIfEmpty_1.defaultIfEmpty(defaultValue):throwIfEmpty_1.throwIfEmpty(function(){return new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}))}}},{"../util/ArgumentOutOfRangeError":468,"./defaultIfEmpty":360,"./filter":373,"./take":425,"./throwIfEmpty":432}],368:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var concat_1=require("../observable/concat"),of_1=require("../observable/of");exports.endWith=function(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i]=arguments[_i];return function(source){return concat_1.concat(source,of_1.of.apply(void 0,array))}}},{"../observable/concat":320,"../observable/of":333}],369:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.every=function(predicate,thisArg){return function(source){return source.lift(new EveryOperator(predicate,thisArg,source))}};var EveryOperator=function(){function EveryOperator(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}return EveryOperator.prototype.call=function(observer,source){return source.subscribe(new EverySubscriber(observer,this.predicate,this.thisArg,this.source))},EveryOperator}(),EverySubscriber=function(_super){function EverySubscriber(destination,predicate,thisArg,source){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.thisArg=thisArg,_this.source=source,_this.index=0,_this.thisArg=thisArg||_this,_this}return __extends(EverySubscriber,_super),EverySubscriber.prototype.notifyComplete=function(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()},EverySubscriber.prototype._next=function(value){var result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],370:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.exhaust=function(){return function(source){return source.lift(new SwitchFirstOperator)}};var SwitchFirstOperator=function(){function SwitchFirstOperator(){}return SwitchFirstOperator.prototype.call=function(subscriber,source){return source.subscribe(new SwitchFirstSubscriber(subscriber))},SwitchFirstOperator}(),SwitchFirstSubscriber=function(_super){function SwitchFirstSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.hasCompleted=!1,_this.hasSubscription=!1,_this}return __extends(SwitchFirstSubscriber,_super),SwitchFirstSubscriber.prototype._next=function(value){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe_1.innerSubscribe(value,new innerSubscribe_1.SimpleInnerSubscriber(this))))},SwitchFirstSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstSubscriber.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],371:[function(require,module,exports){"use strict";function exhaustMap(project,resultSelector){return resultSelector?function(source){return source.pipe(exhaustMap(function(a,i){return from_1.from(project(a,i)).pipe(map_1.map(function(b,ii){return resultSelector(a,b,i,ii)}))}))}:function(source){return source.lift(new ExhaustMapOperator(project))}}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var map_1=require("./map"),from_1=require("../observable/from"),innerSubscribe_1=require("../innerSubscribe");exports.exhaustMap=exhaustMap;var ExhaustMapOperator=function(){function ExhaustMapOperator(project){this.project=project}return ExhaustMapOperator.prototype.call=function(subscriber,source){return source.subscribe(new ExhaustMapSubscriber(subscriber,this.project))},ExhaustMapOperator}(),ExhaustMapSubscriber=function(_super){function ExhaustMapSubscriber(destination,project){var _this=_super.call(this,destination)||this;return _this.project=project,_this.hasSubscription=!1,_this.hasCompleted=!1,_this.index=0,_this}return __extends(ExhaustMapSubscriber,_super),ExhaustMapSubscriber.prototype._next=function(value){this.hasSubscription||this.tryNext(value)},ExhaustMapSubscriber.prototype.tryNext=function(value){var index=this.index++,result;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.hasSubscription=!0,this._innerSub(result)},ExhaustMapSubscriber.prototype._innerSub=function(result){var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(this),destination=this.destination;destination.add(innerSubscriber);var innerSubscription=innerSubscribe_1.innerSubscribe(result,innerSubscriber);innerSubscription!==innerSubscriber&&destination.add(innerSubscription)},ExhaustMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},ExhaustMapSubscriber.prototype.notifyNext=function(innerValue){this.destination.next(innerValue)},ExhaustMapSubscriber.prototype.notifyError=function(err){this.destination.error(err)},ExhaustMapSubscriber.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},ExhaustMapSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314,"../observable/from":324,"./map":382}],372:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.expand=function(project,concurrent,scheduler){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),concurrent=1>(concurrent||0)?Number.POSITIVE_INFINITY:concurrent,function(source){return source.lift(new ExpandOperator(project,concurrent,scheduler))}};var ExpandOperator=function(){function ExpandOperator(project,concurrent,scheduler){this.project=project,this.concurrent=concurrent,this.scheduler=scheduler}return ExpandOperator.prototype.call=function(subscriber,source){return source.subscribe(new ExpandSubscriber(subscriber,this.project,this.concurrent,this.scheduler))},ExpandOperator}();exports.ExpandOperator=ExpandOperator;var ExpandSubscriber=function(_super){function ExpandSubscriber(destination,project,concurrent,scheduler){var _this=_super.call(this,destination)||this;return _this.project=project,_this.concurrent=concurrent,_this.scheduler=scheduler,_this.index=0,_this.active=0,_this.hasCompleted=!1,concurrent<Number.POSITIVE_INFINITY&&(_this.buffer=[]),_this}return __extends(ExpandSubscriber,_super),ExpandSubscriber.dispatch=function(arg){var subscriber=arg.subscriber,result=arg.result,value=arg.value,index=arg.index;subscriber.subscribeToProjection(result,value,index)},ExpandSubscriber.prototype._next=function(value){var destination=this.destination;if(destination.closed)return void this._complete();var index=this.index++;if(this.active<this.concurrent){destination.next(value);try{var project=this.project,result=project(value,index);if(!this.scheduler)this.subscribeToProjection(result,value,index);else{var state={subscriber:this,result:result,value:value,index:index},destination_1=this.destination;destination_1.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,state))}}catch(e){destination.error(e)}}else this.buffer.push(value)},ExpandSubscriber.prototype.subscribeToProjection=function(result){this.active++;var destination=this.destination;destination.add(innerSubscribe_1.innerSubscribe(result,new innerSubscribe_1.SimpleInnerSubscriber(this)))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},ExpandSubscriber.prototype.notifyNext=function(innerValue){this._next(innerValue)},ExpandSubscriber.prototype.notifyComplete=function(){var buffer=this.buffer;this.active--,buffer&&0<buffer.length&&this._next(buffer.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(innerSubscribe_1.SimpleOuterSubscriber);exports.ExpandSubscriber=ExpandSubscriber},{"../innerSubscribe":314}],373:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.filter=function(predicate,thisArg){return function(source){return source.lift(new FilterOperator(predicate,thisArg))}};var FilterOperator=function(){function FilterOperator(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}return FilterOperator.prototype.call=function(subscriber,source){return source.subscribe(new FilterSubscriber(subscriber,this.predicate,this.thisArg))},FilterOperator}(),FilterSubscriber=function(_super){function FilterSubscriber(destination,predicate,thisArg){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.thisArg=thisArg,_this.count=0,_this}return __extends(FilterSubscriber,_super),FilterSubscriber.prototype._next=function(value){var result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)},FilterSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],374:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),Subscription_1=require("../Subscription");exports.finalize=function(callback){return function(source){return source.lift(new FinallyOperator(callback))}};var FinallyOperator=function(){function FinallyOperator(callback){this.callback=callback}return FinallyOperator.prototype.call=function(subscriber,source){return source.subscribe(new FinallySubscriber(subscriber,this.callback))},FinallyOperator}(),FinallySubscriber=function(_super){function FinallySubscriber(destination,callback){var _this=_super.call(this,destination)||this;return _this.add(new Subscription_1.Subscription(callback)),_this}return __extends(FinallySubscriber,_super),FinallySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../Subscription":312}],375:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.find=function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("predicate is not a function");return function(source){return source.lift(new FindValueOperator(predicate,source,!1,thisArg))}};var FindValueOperator=function(){function FindValueOperator(predicate,source,yieldIndex,thisArg){this.predicate=predicate,this.source=source,this.yieldIndex=yieldIndex,this.thisArg=thisArg}return FindValueOperator.prototype.call=function(observer,source){return source.subscribe(new FindValueSubscriber(observer,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}();exports.FindValueOperator=FindValueOperator;var FindValueSubscriber=function(_super){function FindValueSubscriber(destination,predicate,source,yieldIndex,thisArg){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.source=source,_this.yieldIndex=yieldIndex,_this.thisArg=thisArg,_this.index=0,_this}return __extends(FindValueSubscriber,_super),FindValueSubscriber.prototype.notifyComplete=function(value){var destination=this.destination;destination.next(value),destination.complete(),this.unsubscribe()},FindValueSubscriber.prototype._next=function(value){var _a=this,predicate=_a.predicate,thisArg=_a.thisArg,index=this.index++;try{var result=predicate.call(thisArg||this,value,index,this.source);result&&this.notifyComplete(this.yieldIndex?index:value)}catch(err){this.destination.error(err)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(Subscriber_1.Subscriber);exports.FindValueSubscriber=FindValueSubscriber},{"../Subscriber":311}],376:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var find_1=require("../operators/find");exports.findIndex=function(predicate,thisArg){return function(source){return source.lift(new find_1.FindValueOperator(predicate,source,!0,thisArg))}}},{"../operators/find":375}],377:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EmptyError_1=require("../util/EmptyError"),filter_1=require("./filter"),take_1=require("./take"),defaultIfEmpty_1=require("./defaultIfEmpty"),throwIfEmpty_1=require("./throwIfEmpty"),identity_1=require("../util/identity");exports.first=function(predicate,defaultValue){var hasDefaultValue=2<=arguments.length;return function(source){return source.pipe(predicate?filter_1.filter(function(v,i){return predicate(v,i,source)}):identity_1.identity,take_1.take(1),hasDefaultValue?defaultIfEmpty_1.defaultIfEmpty(defaultValue):throwIfEmpty_1.throwIfEmpty(function(){return new EmptyError_1.EmptyError}))}}},{"../util/EmptyError":469,"../util/identity":476,"./defaultIfEmpty":360,"./filter":373,"./take":425,"./throwIfEmpty":432}],378:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),Subscription_1=require("../Subscription"),Observable_1=require("../Observable"),Subject_1=require("../Subject");exports.groupBy=function(keySelector,elementSelector,durationSelector,subjectSelector){return function(source){return source.lift(new GroupByOperator(keySelector,elementSelector,durationSelector,subjectSelector))}};var GroupByOperator=function(){function GroupByOperator(keySelector,elementSelector,durationSelector,subjectSelector){this.keySelector=keySelector,this.elementSelector=elementSelector,this.durationSelector=durationSelector,this.subjectSelector=subjectSelector}return GroupByOperator.prototype.call=function(subscriber,source){return source.subscribe(new GroupBySubscriber(subscriber,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},GroupByOperator}(),GroupBySubscriber=function(_super){function GroupBySubscriber(destination,keySelector,elementSelector,durationSelector,subjectSelector){var _this=_super.call(this,destination)||this;return _this.keySelector=keySelector,_this.elementSelector=elementSelector,_this.durationSelector=durationSelector,_this.subjectSelector=subjectSelector,_this.groups=null,_this.attemptedToUnsubscribe=!1,_this.count=0,_this}return __extends(GroupBySubscriber,_super),GroupBySubscriber.prototype._next=function(value){var key;try{key=this.keySelector(value)}catch(err){return void this.error(err)}this._group(value,key)},GroupBySubscriber.prototype._group=function(value,key){var groups=this.groups;groups||(groups=this.groups=new Map);var group=groups.get(key),element;if(this.elementSelector)try{element=this.elementSelector(value)}catch(err){this.error(err)}else element=value;if(!group){group=this.subjectSelector?this.subjectSelector():new Subject_1.Subject,groups.set(key,group);var groupedObservable=new GroupedObservable(key,group,this);if(this.destination.next(groupedObservable),this.durationSelector){var duration;try{duration=this.durationSelector(new GroupedObservable(key,group))}catch(err){return void this.error(err)}this.add(duration.subscribe(new GroupDurationSubscriber(key,group,this)))}}group.closed||group.next(element)},GroupBySubscriber.prototype._error=function(err){var groups=this.groups;groups&&(groups.forEach(function(group){group.error(err)}),groups.clear()),this.destination.error(err)},GroupBySubscriber.prototype._complete=function(){var groups=this.groups;groups&&(groups.forEach(function(group){group.complete()}),groups.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(key){this.groups.delete(key)},GroupBySubscriber.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&_super.prototype.unsubscribe.call(this))},GroupBySubscriber}(Subscriber_1.Subscriber),GroupDurationSubscriber=function(_super){function GroupDurationSubscriber(key,group,parent){var _this=_super.call(this,group)||this;return _this.key=key,_this.group=group,_this.parent=parent,_this}return __extends(GroupDurationSubscriber,_super),GroupDurationSubscriber.prototype._next=function(){this.complete()},GroupDurationSubscriber.prototype._unsubscribe=function(){var _a=this,parent=_a.parent,key=_a.key;this.key=this.parent=null,parent&&parent.removeGroup(key)},GroupDurationSubscriber}(Subscriber_1.Subscriber),GroupedObservable=function(_super){function GroupedObservable(key,groupSubject,refCountSubscription){var _this=_super.call(this)||this;return _this.key=key,_this.groupSubject=groupSubject,_this.refCountSubscription=refCountSubscription,_this}return __extends(GroupedObservable,_super),GroupedObservable.prototype._subscribe=function(subscriber){var subscription=new Subscription_1.Subscription,_a=this,refCountSubscription=_a.refCountSubscription,groupSubject=_a.groupSubject;return refCountSubscription&&!refCountSubscription.closed&&subscription.add(new InnerRefCountSubscription(refCountSubscription)),subscription.add(groupSubject.subscribe(subscriber)),subscription},GroupedObservable}(Observable_1.Observable);exports.GroupedObservable=GroupedObservable;var InnerRefCountSubscription=function(_super){function InnerRefCountSubscription(parent){var _this=_super.call(this)||this;return _this.parent=parent,parent.count++,_this}return __extends(InnerRefCountSubscription,_super),InnerRefCountSubscription.prototype.unsubscribe=function(){var parent=this.parent;parent.closed||this.closed||(_super.prototype.unsubscribe.call(this),parent.count-=1,0===parent.count&&parent.attemptedToUnsubscribe&&parent.unsubscribe())},InnerRefCountSubscription}(Subscription_1.Subscription)},{"../Observable":304,"../Subject":309,"../Subscriber":311,"../Subscription":312}],379:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.ignoreElements=function(){return function(source){return source.lift(new IgnoreElementsOperator)}};var IgnoreElementsOperator=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(subscriber,source){return source.subscribe(new IgnoreElementsSubscriber(subscriber))},IgnoreElementsOperator}(),IgnoreElementsSubscriber=function(_super){function IgnoreElementsSubscriber(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(IgnoreElementsSubscriber,_super),IgnoreElementsSubscriber.prototype._next=function(){},IgnoreElementsSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],380:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.isEmpty=function(){return function(source){return source.lift(new IsEmptyOperator)}};var IsEmptyOperator=function(){function IsEmptyOperator(){}return IsEmptyOperator.prototype.call=function(observer,source){return source.subscribe(new IsEmptySubscriber(observer))},IsEmptyOperator}(),IsEmptySubscriber=function(_super){function IsEmptySubscriber(destination){return _super.call(this,destination)||this}return __extends(IsEmptySubscriber,_super),IsEmptySubscriber.prototype.notifyComplete=function(isEmpty){var destination=this.destination;destination.next(isEmpty),destination.complete()},IsEmptySubscriber.prototype._next=function(){this.notifyComplete(!1)},IsEmptySubscriber.prototype._complete=function(){this.notifyComplete(!0)},IsEmptySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],381:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EmptyError_1=require("../util/EmptyError"),filter_1=require("./filter"),takeLast_1=require("./takeLast"),throwIfEmpty_1=require("./throwIfEmpty"),defaultIfEmpty_1=require("./defaultIfEmpty"),identity_1=require("../util/identity");exports.last=function(predicate,defaultValue){var hasDefaultValue=2<=arguments.length;return function(source){return source.pipe(predicate?filter_1.filter(function(v,i){return predicate(v,i,source)}):identity_1.identity,takeLast_1.takeLast(1),hasDefaultValue?defaultIfEmpty_1.defaultIfEmpty(defaultValue):throwIfEmpty_1.throwIfEmpty(function(){return new EmptyError_1.EmptyError}))}}},{"../util/EmptyError":469,"../util/identity":476,"./defaultIfEmpty":360,"./filter":373,"./takeLast":426,"./throwIfEmpty":432}],382:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.map=function(project,thisArg){return function(source){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return source.lift(new MapOperator(project,thisArg))}};var MapOperator=function(){function MapOperator(project,thisArg){this.project=project,this.thisArg=thisArg}return MapOperator.prototype.call=function(subscriber,source){return source.subscribe(new MapSubscriber(subscriber,this.project,this.thisArg))},MapOperator}();exports.MapOperator=MapOperator;var MapSubscriber=function(_super){function MapSubscriber(destination,project,thisArg){var _this=_super.call(this,destination)||this;return _this.project=project,_this.count=0,_this.thisArg=thisArg||_this,_this}return __extends(MapSubscriber,_super),MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MapSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],383:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.mapTo=function(value){return function(source){return source.lift(new MapToOperator(value))}};var MapToOperator=function(){function MapToOperator(value){this.value=value}return MapToOperator.prototype.call=function(subscriber,source){return source.subscribe(new MapToSubscriber(subscriber,this.value))},MapToOperator}(),MapToSubscriber=function(_super){function MapToSubscriber(destination,value){var _this=_super.call(this,destination)||this;return _this.value=value,_this}return __extends(MapToSubscriber,_super),MapToSubscriber.prototype._next=function(){this.destination.next(this.value)},MapToSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],384:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),Notification_1=require("../Notification");exports.materialize=function(){return function(source){return source.lift(new MaterializeOperator)}};var MaterializeOperator=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(subscriber,source){return source.subscribe(new MaterializeSubscriber(subscriber))},MaterializeOperator}(),MaterializeSubscriber=function(_super){function MaterializeSubscriber(destination){return _super.call(this,destination)||this}return __extends(MaterializeSubscriber,_super),MaterializeSubscriber.prototype._next=function(value){this.destination.next(Notification_1.Notification.createNext(value))},MaterializeSubscriber.prototype._error=function(err){var destination=this.destination;destination.next(Notification_1.Notification.createError(err)),destination.complete()},MaterializeSubscriber.prototype._complete=function(){var destination=this.destination;destination.next(Notification_1.Notification.createComplete()),destination.complete()},MaterializeSubscriber}(Subscriber_1.Subscriber)},{"../Notification":303,"../Subscriber":311}],385:[function(require,module,exports){"use strict";function max(comparer){var max="function"==typeof comparer?function(x,y){return 0<comparer(x,y)?x:y}:function(x,y){return x>y?x:y};return reduce_1.reduce(max)}Object.defineProperty(exports,"__esModule",{value:!0});var reduce_1=require("./reduce");exports.max=max},{"./reduce":403}],386:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var merge_1=require("../observable/merge");exports.merge=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return source.lift.call(merge_1.merge.apply(void 0,[source].concat(observables)))}}},{"../observable/merge":331}],387:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mergeMap_1=require("./mergeMap"),identity_1=require("../util/identity");exports.mergeAll=function(concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),mergeMap_1.mergeMap(identity_1.identity,concurrent)}},{"../util/identity":476,"./mergeMap":388}],388:[function(require,module,exports){"use strict";function mergeMap(project,resultSelector,concurrent){return(void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"function"==typeof resultSelector)?function(source){return source.pipe(mergeMap(function(a,i){return from_1.from(project(a,i)).pipe(map_1.map(function(b,ii){return resultSelector(a,b,i,ii)}))},concurrent))}:("number"==typeof resultSelector&&(concurrent=resultSelector),function(source){return source.lift(new MergeMapOperator(project,concurrent))})}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var map_1=require("./map"),from_1=require("../observable/from"),innerSubscribe_1=require("../innerSubscribe");exports.mergeMap=mergeMap;var MergeMapOperator=function(){function MergeMapOperator(project,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),this.project=project,this.concurrent=concurrent}return MergeMapOperator.prototype.call=function(observer,source){return source.subscribe(new MergeMapSubscriber(observer,this.project,this.concurrent))},MergeMapOperator}();exports.MergeMapOperator=MergeMapOperator;var MergeMapSubscriber=function(_super){function MergeMapSubscriber(destination,project,concurrent){void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY);var _this=_super.call(this,destination)||this;return _this.project=project,_this.concurrent=concurrent,_this.hasCompleted=!1,_this.buffer=[],_this.active=0,_this.index=0,_this}return __extends(MergeMapSubscriber,_super),MergeMapSubscriber.prototype._next=function(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)},MergeMapSubscriber.prototype._tryNext=function(value){var index=this.index++,result;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result)},MergeMapSubscriber.prototype._innerSub=function(ish){var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(this),destination=this.destination;destination.add(innerSubscriber);var innerSubscription=innerSubscribe_1.innerSubscribe(ish,innerSubscriber);innerSubscription!==innerSubscriber&&destination.add(innerSubscription)},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},MergeMapSubscriber.prototype.notifyNext=function(innerValue){this.destination.next(innerValue)},MergeMapSubscriber.prototype.notifyComplete=function(){var buffer=this.buffer;this.active--,0<buffer.length?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(innerSubscribe_1.SimpleOuterSubscriber);exports.MergeMapSubscriber=MergeMapSubscriber,exports.flatMap=mergeMap},{"../innerSubscribe":314,"../observable/from":324,"./map":382}],389:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mergeMap_1=require("./mergeMap");exports.mergeMapTo=function(innerObservable,resultSelector,concurrent){return(void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),"function"==typeof resultSelector)?mergeMap_1.mergeMap(function(){return innerObservable},resultSelector,concurrent):("number"==typeof resultSelector&&(concurrent=resultSelector),mergeMap_1.mergeMap(function(){return innerObservable},concurrent))}},{"./mergeMap":388}],390:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.mergeScan=function(accumulator,seed,concurrent){return void 0===concurrent&&(concurrent=Number.POSITIVE_INFINITY),function(source){return source.lift(new MergeScanOperator(accumulator,seed,concurrent))}};var MergeScanOperator=function(){function MergeScanOperator(accumulator,seed,concurrent){this.accumulator=accumulator,this.seed=seed,this.concurrent=concurrent}return MergeScanOperator.prototype.call=function(subscriber,source){return source.subscribe(new MergeScanSubscriber(subscriber,this.accumulator,this.seed,this.concurrent))},MergeScanOperator}();exports.MergeScanOperator=MergeScanOperator;var MergeScanSubscriber=function(_super){function MergeScanSubscriber(destination,accumulator,acc,concurrent){var _this=_super.call(this,destination)||this;return _this.accumulator=accumulator,_this.acc=acc,_this.concurrent=concurrent,_this.hasValue=!1,_this.hasCompleted=!1,_this.buffer=[],_this.active=0,_this.index=0,_this}return __extends(MergeScanSubscriber,_super),MergeScanSubscriber.prototype._next=function(value){if(this.active<this.concurrent){var index=this.index++,destination=this.destination,ish=void 0;try{var accumulator=this.accumulator;ish=accumulator(this.acc,value,index)}catch(e){return destination.error(e)}this.active++,this._innerSub(ish)}else this.buffer.push(value)},MergeScanSubscriber.prototype._innerSub=function(ish){var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(this),destination=this.destination;destination.add(innerSubscriber);var innerSubscription=innerSubscribe_1.innerSubscribe(ish,innerSubscriber);innerSubscription!==innerSubscriber&&destination.add(innerSubscription)},MergeScanSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},MergeScanSubscriber.prototype.notifyNext=function(innerValue){var destination=this.destination;this.acc=innerValue,this.hasValue=!0,destination.next(innerValue)},MergeScanSubscriber.prototype.notifyComplete=function(){var buffer=this.buffer;this.active--,0<buffer.length?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber}(innerSubscribe_1.SimpleOuterSubscriber);exports.MergeScanSubscriber=MergeScanSubscriber},{"../innerSubscribe":314}],391:[function(require,module,exports){"use strict";function min(comparer){var min="function"==typeof comparer?function(x,y){return 0>comparer(x,y)?x:y}:function(x,y){return x<y?x:y};return reduce_1.reduce(min)}Object.defineProperty(exports,"__esModule",{value:!0});var reduce_1=require("./reduce");exports.min=min},{"./reduce":403}],392:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ConnectableObservable_1=require("../observable/ConnectableObservable");exports.multicast=function(subjectOrSubjectFactory,selector){return function(source){var subjectFactory;if(subjectFactory="function"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory},"function"==typeof selector)return source.lift(new MulticastOperator(subjectFactory,selector));var connectable=Object.create(source,ConnectableObservable_1.connectableObservableDescriptor);return connectable.source=source,connectable.subjectFactory=subjectFactory,connectable}};var MulticastOperator=function(){function MulticastOperator(subjectFactory,selector){this.subjectFactory=subjectFactory,this.selector=selector}return MulticastOperator.prototype.call=function(subscriber,source){var selector=this.selector,subject=this.subjectFactory(),subscription=selector(subject).subscribe(subscriber);return subscription.add(source.subscribe(subject)),subscription},MulticastOperator}();exports.MulticastOperator=MulticastOperator},{"../observable/ConnectableObservable":315}],393:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),Notification_1=require("../Notification");exports.observeOn=function(scheduler,delay){return void 0===delay&&(delay=0),function(source){return source.lift(new ObserveOnOperator(scheduler,delay))}};var ObserveOnOperator=function(){function ObserveOnOperator(scheduler,delay){void 0===delay&&(delay=0),this.scheduler=scheduler,this.delay=delay}return ObserveOnOperator.prototype.call=function(subscriber,source){return source.subscribe(new ObserveOnSubscriber(subscriber,this.scheduler,this.delay))},ObserveOnOperator}();exports.ObserveOnOperator=ObserveOnOperator;var ObserveOnSubscriber=function(_super){function ObserveOnSubscriber(destination,scheduler,delay){void 0===delay&&(delay=0);var _this=_super.call(this,destination)||this;return _this.scheduler=scheduler,_this.delay=delay,_this}return __extends(ObserveOnSubscriber,_super),ObserveOnSubscriber.dispatch=function(arg){var notification=arg.notification,destination=arg.destination;notification.observe(destination),this.unsubscribe()},ObserveOnSubscriber.prototype.scheduleMessage=function(notification){var destination=this.destination;destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))},ObserveOnSubscriber.prototype._next=function(value){this.scheduleMessage(Notification_1.Notification.createNext(value))},ObserveOnSubscriber.prototype._error=function(err){this.scheduleMessage(Notification_1.Notification.createError(err)),this.unsubscribe()},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(Notification_1.Notification.createComplete()),this.unsubscribe()},ObserveOnSubscriber}(Subscriber_1.Subscriber);exports.ObserveOnSubscriber=ObserveOnSubscriber;var ObserveOnMessage=function(){return function(notification,destination){this.notification=notification,this.destination=destination}}();exports.ObserveOnMessage=ObserveOnMessage},{"../Notification":303,"../Subscriber":311}],394:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var from_1=require("../observable/from"),isArray_1=require("../util/isArray"),innerSubscribe_1=require("../innerSubscribe");exports.onErrorResumeNext=function(){for(var nextSources=[],_i=0;_i<arguments.length;_i++)nextSources[_i]=arguments[_i];return 1===nextSources.length&&isArray_1.isArray(nextSources[0])&&(nextSources=nextSources[0]),function(source){return source.lift(new OnErrorResumeNextOperator(nextSources))}},exports.onErrorResumeNextStatic=function(){for(var nextSources=[],_i=0;_i<arguments.length;_i++)nextSources[_i]=arguments[_i];var source;return 1===nextSources.length&&isArray_1.isArray(nextSources[0])&&(nextSources=nextSources[0]),source=nextSources.shift(),from_1.from(source).lift(new OnErrorResumeNextOperator(nextSources))};var OnErrorResumeNextOperator=function(){function OnErrorResumeNextOperator(nextSources){this.nextSources=nextSources}return OnErrorResumeNextOperator.prototype.call=function(subscriber,source){return source.subscribe(new OnErrorResumeNextSubscriber(subscriber,this.nextSources))},OnErrorResumeNextOperator}(),OnErrorResumeNextSubscriber=function(_super){function OnErrorResumeNextSubscriber(destination,nextSources){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.nextSources=nextSources,_this}return __extends(OnErrorResumeNextSubscriber,_super),OnErrorResumeNextSubscriber.prototype.notifyError=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.notifyComplete=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._error=function(){this.subscribeToNextSource(),this.unsubscribe()},OnErrorResumeNextSubscriber.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},OnErrorResumeNextSubscriber.prototype.subscribeToNextSource=function(){var next=this.nextSources.shift();if(!!next){var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(this),destination=this.destination;destination.add(innerSubscriber);var innerSubscription=innerSubscribe_1.innerSubscribe(next,innerSubscriber);innerSubscription!==innerSubscriber&&destination.add(innerSubscription)}else this.destination.complete()},OnErrorResumeNextSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314,"../observable/from":324,"../util/isArray":477}],395:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.pairwise=function(){return function(source){return source.lift(new PairwiseOperator)}};var PairwiseOperator=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(subscriber,source){return source.subscribe(new PairwiseSubscriber(subscriber))},PairwiseOperator}(),PairwiseSubscriber=function(_super){function PairwiseSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.hasPrev=!1,_this}return __extends(PairwiseSubscriber,_super),PairwiseSubscriber.prototype._next=function(value){var pair;this.hasPrev?pair=[this.prev,value]:this.hasPrev=!0,this.prev=value,pair&&this.destination.next(pair)},PairwiseSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],396:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var not_1=require("../util/not"),filter_1=require("./filter");exports.partition=function(predicate,thisArg){return function(source){return[filter_1.filter(predicate,thisArg)(source),filter_1.filter(not_1.not(predicate,thisArg))(source)]}}},{"../util/not":489,"./filter":373}],397:[function(require,module,exports){"use strict";function plucker(props,length){return function(x){for(var currentProp=x,i=0,p;i<length;i++)if(p=null==currentProp?void 0:currentProp[props[i]],void 0!==p)currentProp=p;else return;return currentProp}}Object.defineProperty(exports,"__esModule",{value:!0});var map_1=require("./map");exports.pluck=function(){for(var properties=[],_i=0;_i<arguments.length;_i++)properties[_i]=arguments[_i];var length=properties.length;if(0===length)throw new Error("list of properties cannot be empty.");return function(source){return map_1.map(plucker(properties,length))(source)}}},{"./map":382}],398:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),multicast_1=require("./multicast");exports.publish=function(selector){return selector?multicast_1.multicast(function(){return new Subject_1.Subject},selector):multicast_1.multicast(new Subject_1.Subject)}},{"../Subject":309,"./multicast":392}],399:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BehaviorSubject_1=require("../BehaviorSubject"),multicast_1=require("./multicast");exports.publishBehavior=function(value){return function(source){return multicast_1.multicast(new BehaviorSubject_1.BehaviorSubject(value))(source)}}},{"../BehaviorSubject":301,"./multicast":392}],400:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AsyncSubject_1=require("../AsyncSubject"),multicast_1=require("./multicast");exports.publishLast=function(){return function(source){return multicast_1.multicast(new AsyncSubject_1.AsyncSubject)(source)}}},{"../AsyncSubject":300,"./multicast":392}],401:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ReplaySubject_1=require("../ReplaySubject"),multicast_1=require("./multicast");exports.publishReplay=function(bufferSize,windowTime,selectorOrScheduler,scheduler){selectorOrScheduler&&"function"!=typeof selectorOrScheduler&&(scheduler=selectorOrScheduler);var selector="function"==typeof selectorOrScheduler?selectorOrScheduler:void 0,subject=new ReplaySubject_1.ReplaySubject(bufferSize,windowTime,scheduler);return function(source){return multicast_1.multicast(function(){return subject},selector)(source)}}},{"../ReplaySubject":307,"./multicast":392}],402:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isArray_1=require("../util/isArray"),race_1=require("../observable/race");exports.race=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return 1===observables.length&&isArray_1.isArray(observables[0])&&(observables=observables[0]),source.lift.call(race_1.race.apply(void 0,[source].concat(observables)))}}},{"../observable/race":337,"../util/isArray":477}],403:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var scan_1=require("./scan"),takeLast_1=require("./takeLast"),defaultIfEmpty_1=require("./defaultIfEmpty"),pipe_1=require("../util/pipe");exports.reduce=function(accumulator,seed){return 2<=arguments.length?function(source){return pipe_1.pipe(scan_1.scan(accumulator,seed),takeLast_1.takeLast(1),defaultIfEmpty_1.defaultIfEmpty(seed))(source)}:function(source){return pipe_1.pipe(scan_1.scan(function(acc,value,index){return accumulator(acc,value,index+1)}),takeLast_1.takeLast(1))(source)}}},{"../util/pipe":490,"./defaultIfEmpty":360,"./scan":411,"./takeLast":426}],404:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.refCount=function(){return function(source){return source.lift(new RefCountOperator(source))}};var RefCountOperator=function(){function RefCountOperator(connectable){this.connectable=connectable}return RefCountOperator.prototype.call=function(subscriber,source){var connectable=this.connectable;connectable._refCount++;var refCounter=new RefCountSubscriber(subscriber,connectable),subscription=source.subscribe(refCounter);return refCounter.closed||(refCounter.connection=connectable.connect()),subscription},RefCountOperator}(),RefCountSubscriber=function(_super){function RefCountSubscriber(destination,connectable){var _this=_super.call(this,destination)||this;return _this.connectable=connectable,_this}return __extends(RefCountSubscriber,_super),RefCountSubscriber.prototype._unsubscribe=function(){var connectable=this.connectable;if(!connectable)return void(this.connection=null);this.connectable=null;var refCount=connectable._refCount;if(0>=refCount)return void(this.connection=null);if(connectable._refCount=refCount-1,1<refCount)return void(this.connection=null);var connection=this.connection,sharedConnection=connectable._connection;this.connection=null,sharedConnection&&(!connection||sharedConnection===connection)&&sharedConnection.unsubscribe()},RefCountSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],405:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),empty_1=require("../observable/empty");exports.repeat=function(count){return void 0===count&&(count=-1),function(source){return 0===count?empty_1.empty():0>count?source.lift(new RepeatOperator(-1,source)):source.lift(new RepeatOperator(count-1,source))}};var RepeatOperator=function(){function RepeatOperator(count,source){this.count=count,this.source=source}return RepeatOperator.prototype.call=function(subscriber,source){return source.subscribe(new RepeatSubscriber(subscriber,this.count,this.source))},RepeatOperator}(),RepeatSubscriber=function(_super){function RepeatSubscriber(destination,count,source){var _this=_super.call(this,destination)||this;return _this.count=count,_this.source=source,_this}return __extends(RepeatSubscriber,_super),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.complete.call(this);-1<count&&(this.count=count-1),source.subscribe(this._unsubscribeAndRecycle())}},RepeatSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../observable/empty":322}],406:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),innerSubscribe_1=require("../innerSubscribe");exports.repeatWhen=function(notifier){return function(source){return source.lift(new RepeatWhenOperator(notifier))}};var RepeatWhenOperator=function(){function RepeatWhenOperator(notifier){this.notifier=notifier}return RepeatWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new RepeatWhenSubscriber(subscriber,this.notifier,source))},RepeatWhenOperator}(),RepeatWhenSubscriber=function(_super){function RepeatWhenSubscriber(destination,notifier,source){var _this=_super.call(this,destination)||this;return _this.notifier=notifier,_this.source=source,_this.sourceIsBeingSubscribedTo=!0,_this}return __extends(RepeatWhenSubscriber,_super),RepeatWhenSubscriber.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},RepeatWhenSubscriber.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return _super.prototype.complete.call(this)},RepeatWhenSubscriber.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return _super.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},RepeatWhenSubscriber.prototype._unsubscribe=function(){var _a=this,notifications=_a.notifications,retriesSubscription=_a.retriesSubscription;notifications&&(notifications.unsubscribe(),this.notifications=void 0),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},RepeatWhenSubscriber.prototype._unsubscribeAndRecycle=function(){var _unsubscribe=this._unsubscribe;return this._unsubscribe=null,_super.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=_unsubscribe,this},RepeatWhenSubscriber.prototype.subscribeToRetries=function(){this.notifications=new Subject_1.Subject;var retries;try{var notifier=this.notifier;retries=notifier(this.notifications)}catch(e){return _super.prototype.complete.call(this)}this.retries=retries,this.retriesSubscription=innerSubscribe_1.innerSubscribe(retries,new innerSubscribe_1.SimpleInnerSubscriber(this))},RepeatWhenSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../Subject":309,"../innerSubscribe":314}],407:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.retry=function(count){return void 0===count&&(count=-1),function(source){return source.lift(new RetryOperator(count,source))}};var RetryOperator=function(){function RetryOperator(count,source){this.count=count,this.source=source}return RetryOperator.prototype.call=function(subscriber,source){return source.subscribe(new RetrySubscriber(subscriber,this.count,this.source))},RetryOperator}(),RetrySubscriber=function(_super){function RetrySubscriber(destination,count,source){var _this=_super.call(this,destination)||this;return _this.count=count,_this.source=source,_this}return __extends(RetrySubscriber,_super),RetrySubscriber.prototype.error=function(err){if(!this.isStopped){var _a=this,source=_a.source,count=_a.count;if(0===count)return _super.prototype.error.call(this,err);-1<count&&(this.count=count-1),source.subscribe(this._unsubscribeAndRecycle())}},RetrySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],408:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),innerSubscribe_1=require("../innerSubscribe");exports.retryWhen=function(notifier){return function(source){return source.lift(new RetryWhenOperator(notifier,source))}};var RetryWhenOperator=function(){function RetryWhenOperator(notifier,source){this.notifier=notifier,this.source=source}return RetryWhenOperator.prototype.call=function(subscriber,source){return source.subscribe(new RetryWhenSubscriber(subscriber,this.notifier,this.source))},RetryWhenOperator}(),RetryWhenSubscriber=function(_super){function RetryWhenSubscriber(destination,notifier,source){var _this=_super.call(this,destination)||this;return _this.notifier=notifier,_this.source=source,_this}return __extends(RetryWhenSubscriber,_super),RetryWhenSubscriber.prototype.error=function(err){if(!this.isStopped){var errors=this.errors,retries=this.retries,retriesSubscription=this.retriesSubscription;if(!retries){errors=new Subject_1.Subject;try{var notifier=this.notifier;retries=notifier(errors)}catch(e){return _super.prototype.error.call(this,e)}retriesSubscription=innerSubscribe_1.innerSubscribe(retries,new innerSubscribe_1.SimpleInnerSubscriber(this))}else this.errors=void 0,this.retriesSubscription=void 0;this._unsubscribeAndRecycle(),this.errors=errors,this.retries=retries,this.retriesSubscription=retriesSubscription,errors.next(err)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var _a=this,errors=_a.errors,retriesSubscription=_a.retriesSubscription;errors&&(errors.unsubscribe(),this.errors=void 0),retriesSubscription&&(retriesSubscription.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},RetryWhenSubscriber.prototype.notifyNext=function(){var _unsubscribe=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=_unsubscribe,this.source.subscribe(this)},RetryWhenSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../Subject":309,"../innerSubscribe":314}],409:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.sample=function(notifier){return function(source){return source.lift(new SampleOperator(notifier))}};var SampleOperator=function(){function SampleOperator(notifier){this.notifier=notifier}return SampleOperator.prototype.call=function(subscriber,source){var sampleSubscriber=new SampleSubscriber(subscriber),subscription=source.subscribe(sampleSubscriber);return subscription.add(innerSubscribe_1.innerSubscribe(this.notifier,new innerSubscribe_1.SimpleInnerSubscriber(sampleSubscriber))),subscription},SampleOperator}(),SampleSubscriber=function(_super){function SampleSubscriber(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.hasValue=!1,_this}return __extends(SampleSubscriber,_super),SampleSubscriber.prototype._next=function(value){this.value=value,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],410:[function(require,module,exports){"use strict";function dispatchNotification(state){var subscriber=state.subscriber,period=state.period;subscriber.notifyNext(),this.schedule(state,period)}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async");exports.sampleTime=function(period,scheduler){return void 0===scheduler&&(scheduler=async_1.async),function(source){return source.lift(new SampleTimeOperator(period,scheduler))}};var SampleTimeOperator=function(){function SampleTimeOperator(period,scheduler){this.period=period,this.scheduler=scheduler}return SampleTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new SampleTimeSubscriber(subscriber,this.period,this.scheduler))},SampleTimeOperator}(),SampleTimeSubscriber=function(_super){function SampleTimeSubscriber(destination,period,scheduler){var _this=_super.call(this,destination)||this;return _this.period=period,_this.scheduler=scheduler,_this.hasValue=!1,_this.add(scheduler.schedule(dispatchNotification,period,{subscriber:_this,period:period})),_this}return __extends(SampleTimeSubscriber,_super),SampleTimeSubscriber.prototype._next=function(value){this.lastValue=value,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../scheduler/async":463}],411:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.scan=function(accumulator,seed){var hasSeed=!1;return 2<=arguments.length&&(hasSeed=!0),function(source){return source.lift(new ScanOperator(accumulator,seed,hasSeed))}};var ScanOperator=function(){function ScanOperator(accumulator,seed,hasSeed){void 0===hasSeed&&(hasSeed=!1),this.accumulator=accumulator,this.seed=seed,this.hasSeed=hasSeed}return ScanOperator.prototype.call=function(subscriber,source){return source.subscribe(new ScanSubscriber(subscriber,this.accumulator,this.seed,this.hasSeed))},ScanOperator}(),ScanSubscriber=function(_super){function ScanSubscriber(destination,accumulator,_seed,hasSeed){var _this=_super.call(this,destination)||this;return _this.accumulator=accumulator,_this._seed=_seed,_this.hasSeed=hasSeed,_this.index=0,_this}return __extends(ScanSubscriber,_super),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(value){this.hasSeed=!0,this._seed=value},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(value){return this.hasSeed?this._tryNext(value):void(this.seed=value,this.destination.next(value))},ScanSubscriber.prototype._tryNext=function(value){var index=this.index++,result;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)},ScanSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],412:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.sequenceEqual=function(compareTo,comparator){return function(source){return source.lift(new SequenceEqualOperator(compareTo,comparator))}};var SequenceEqualOperator=function(){function SequenceEqualOperator(compareTo,comparator){this.compareTo=compareTo,this.comparator=comparator}return SequenceEqualOperator.prototype.call=function(subscriber,source){return source.subscribe(new SequenceEqualSubscriber(subscriber,this.compareTo,this.comparator))},SequenceEqualOperator}();exports.SequenceEqualOperator=SequenceEqualOperator;var SequenceEqualSubscriber=function(_super){function SequenceEqualSubscriber(destination,compareTo,comparator){var _this=_super.call(this,destination)||this;return _this.compareTo=compareTo,_this.comparator=comparator,_this._a=[],_this._b=[],_this._oneComplete=!1,_this.destination.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination,_this))),_this}return __extends(SequenceEqualSubscriber,_super),SequenceEqualSubscriber.prototype._next=function(value){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(value),this.checkValues())},SequenceEqualSubscriber.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},SequenceEqualSubscriber.prototype.checkValues=function(){for(var _c=this,_a=_c._a,_b=_c._b,comparator=_c.comparator;0<_a.length&&0<_b.length;){var a=_a.shift(),b=_b.shift(),areEqual=!1;try{areEqual=comparator?comparator(a,b):a===b}catch(e){this.destination.error(e)}areEqual||this.emit(!1)}},SequenceEqualSubscriber.prototype.emit=function(value){var destination=this.destination;destination.next(value),destination.complete()},SequenceEqualSubscriber.prototype.nextB=function(value){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(value),this.checkValues())},SequenceEqualSubscriber.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},SequenceEqualSubscriber}(Subscriber_1.Subscriber);exports.SequenceEqualSubscriber=SequenceEqualSubscriber;var SequenceEqualCompareToSubscriber=function(_super){function SequenceEqualCompareToSubscriber(destination,parent){var _this=_super.call(this,destination)||this;return _this.parent=parent,_this}return __extends(SequenceEqualCompareToSubscriber,_super),SequenceEqualCompareToSubscriber.prototype._next=function(value){this.parent.nextB(value)},SequenceEqualCompareToSubscriber.prototype._error=function(err){this.parent.error(err),this.unsubscribe()},SequenceEqualCompareToSubscriber.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},SequenceEqualCompareToSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],413:[function(require,module,exports){"use strict";function shareSubjectFactory(){return new Subject_1.Subject}Object.defineProperty(exports,"__esModule",{value:!0});var multicast_1=require("./multicast"),refCount_1=require("./refCount"),Subject_1=require("../Subject");exports.share=function(){return function(source){return refCount_1.refCount()(multicast_1.multicast(shareSubjectFactory)(source))}}},{"../Subject":309,"./multicast":392,"./refCount":404}],414:[function(require,module,exports){"use strict";function shareReplayOperator(_a){var _b=_a.bufferSize,bufferSize=void 0===_b?Number.POSITIVE_INFINITY:_b,_c=_a.windowTime,windowTime=void 0===_c?Number.POSITIVE_INFINITY:_c,useRefCount=_a.refCount,scheduler=_a.scheduler,refCount=0,hasError=!1,isComplete=!1,subject,subscription;return function(source){refCount++;var innerSub;!subject||hasError?(hasError=!1,subject=new ReplaySubject_1.ReplaySubject(bufferSize,windowTime,scheduler),innerSub=subject.subscribe(this),subscription=source.subscribe({next:function(value){subject.next(value)},error:function(err){hasError=!0,subject.error(err)},complete:function(){isComplete=!0,subscription=void 0,subject.complete()}}),isComplete&&(subscription=void 0)):innerSub=subject.subscribe(this),this.add(function(){refCount--,innerSub.unsubscribe(),innerSub=void 0,subscription&&!isComplete&&useRefCount&&0===refCount&&(subscription.unsubscribe(),subscription=void 0,subject=void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0});var ReplaySubject_1=require("../ReplaySubject");exports.shareReplay=function(configOrBufferSize,windowTime,scheduler){var config;return config=configOrBufferSize&&"object"==typeof configOrBufferSize?configOrBufferSize:{bufferSize:configOrBufferSize,windowTime:windowTime,refCount:!1,scheduler:scheduler},function(source){return source.lift(shareReplayOperator(config))}}},{"../ReplaySubject":307}],415:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),EmptyError_1=require("../util/EmptyError");exports.single=function(predicate){return function(source){return source.lift(new SingleOperator(predicate,source))}};var SingleOperator=function(){function SingleOperator(predicate,source){this.predicate=predicate,this.source=source}return SingleOperator.prototype.call=function(subscriber,source){return source.subscribe(new SingleSubscriber(subscriber,this.predicate,this.source))},SingleOperator}(),SingleSubscriber=function(_super){function SingleSubscriber(destination,predicate,source){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.source=source,_this.seenValue=!1,_this.index=0,_this}return __extends(SingleSubscriber,_super),SingleSubscriber.prototype.applySingleValue=function(value){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=value)},SingleSubscriber.prototype._next=function(value){var index=this.index++;this.predicate?this.tryNext(value,index):this.applySingleValue(value)},SingleSubscriber.prototype.tryNext=function(value,index){try{this.predicate(value,index,this.source)&&this.applySingleValue(value)}catch(err){this.destination.error(err)}},SingleSubscriber.prototype._complete=function(){var destination=this.destination;0<this.index?(destination.next(this.seenValue?this.singleValue:void 0),destination.complete()):destination.error(new EmptyError_1.EmptyError)},SingleSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../util/EmptyError":469}],416:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.skip=function(count){return function(source){return source.lift(new SkipOperator(count))}};var SkipOperator=function(){function SkipOperator(total){this.total=total}return SkipOperator.prototype.call=function(subscriber,source){return source.subscribe(new SkipSubscriber(subscriber,this.total))},SkipOperator}(),SkipSubscriber=function(_super){function SkipSubscriber(destination,total){var _this=_super.call(this,destination)||this;return _this.total=total,_this.count=0,_this}return __extends(SkipSubscriber,_super),SkipSubscriber.prototype._next=function(x){++this.count>this.total&&this.destination.next(x)},SkipSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],417:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError");exports.skipLast=function(count){return function(source){return source.lift(new SkipLastOperator(count))}};var SkipLastOperator=function(){function SkipLastOperator(_skipCount){if(this._skipCount=_skipCount,0>this._skipCount)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return SkipLastOperator.prototype.call=function(subscriber,source){return 0===this._skipCount?source.subscribe(new Subscriber_1.Subscriber(subscriber)):source.subscribe(new SkipLastSubscriber(subscriber,this._skipCount))},SkipLastOperator}(),SkipLastSubscriber=function(_super){function SkipLastSubscriber(destination,_skipCount){var _this=_super.call(this,destination)||this;return _this._skipCount=_skipCount,_this._count=0,_this._ring=Array(_skipCount),_this}return __extends(SkipLastSubscriber,_super),SkipLastSubscriber.prototype._next=function(value){var skipCount=this._skipCount,count=this._count++;if(count<skipCount)this._ring[count]=value;else{var currentIndex=count%skipCount,ring=this._ring,oldValue=ring[currentIndex];ring[currentIndex]=value,this.destination.next(oldValue)}},SkipLastSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../util/ArgumentOutOfRangeError":468}],418:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.skipUntil=function(notifier){return function(source){return source.lift(new SkipUntilOperator(notifier))}};var SkipUntilOperator=function(){function SkipUntilOperator(notifier){this.notifier=notifier}return SkipUntilOperator.prototype.call=function(destination,source){return source.subscribe(new SkipUntilSubscriber(destination,this.notifier))},SkipUntilOperator}(),SkipUntilSubscriber=function(_super){function SkipUntilSubscriber(destination,notifier){var _this=_super.call(this,destination)||this;_this.hasValue=!1;var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(_this);_this.add(innerSubscriber),_this.innerSubscription=innerSubscriber;var innerSubscription=innerSubscribe_1.innerSubscribe(notifier,innerSubscriber);return innerSubscription!==innerSubscriber&&(_this.add(innerSubscription),_this.innerSubscription=innerSubscription),_this}return __extends(SkipUntilSubscriber,_super),SkipUntilSubscriber.prototype._next=function(value){this.hasValue&&_super.prototype._next.call(this,value)},SkipUntilSubscriber.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},SkipUntilSubscriber.prototype.notifyComplete=function(){},SkipUntilSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],419:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.skipWhile=function(predicate){return function(source){return source.lift(new SkipWhileOperator(predicate))}};var SkipWhileOperator=function(){function SkipWhileOperator(predicate){this.predicate=predicate}return SkipWhileOperator.prototype.call=function(subscriber,source){return source.subscribe(new SkipWhileSubscriber(subscriber,this.predicate))},SkipWhileOperator}(),SkipWhileSubscriber=function(_super){function SkipWhileSubscriber(destination,predicate){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.skipping=!0,_this.index=0,_this}return __extends(SkipWhileSubscriber,_super),SkipWhileSubscriber.prototype._next=function(value){var destination=this.destination;this.skipping&&this.tryCallPredicate(value),this.skipping||destination.next(value)},SkipWhileSubscriber.prototype.tryCallPredicate=function(value){try{var result=this.predicate(value,this.index++);this.skipping=!!result}catch(err){this.destination.error(err)}},SkipWhileSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],420:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var concat_1=require("../observable/concat"),isScheduler_1=require("../util/isScheduler");exports.startWith=function(){for(var array=[],_i=0;_i<arguments.length;_i++)array[_i]=arguments[_i];var scheduler=array[array.length-1];return isScheduler_1.isScheduler(scheduler)?(array.pop(),function(source){return concat_1.concat(array,source,scheduler)}):function(source){return concat_1.concat(array,source)}}},{"../observable/concat":320,"../util/isScheduler":487}],421:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SubscribeOnObservable_1=require("../observable/SubscribeOnObservable");exports.subscribeOn=function(scheduler,delay){return void 0===delay&&(delay=0),function(source){return source.lift(new SubscribeOnOperator(scheduler,delay))}};var SubscribeOnOperator=function(){function SubscribeOnOperator(scheduler,delay){this.scheduler=scheduler,this.delay=delay}return SubscribeOnOperator.prototype.call=function(subscriber,source){return new SubscribeOnObservable_1.SubscribeOnObservable(source,this.delay,this.scheduler).subscribe(subscriber)},SubscribeOnOperator}()},{"../observable/SubscribeOnObservable":316}],422:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var switchMap_1=require("./switchMap"),identity_1=require("../util/identity");exports.switchAll=function(){return switchMap_1.switchMap(identity_1.identity)}},{"../util/identity":476,"./switchMap":423}],423:[function(require,module,exports){"use strict";function switchMap(project,resultSelector){return"function"==typeof resultSelector?function(source){return source.pipe(switchMap(function(a,i){return from_1.from(project(a,i)).pipe(map_1.map(function(b,ii){return resultSelector(a,b,i,ii)}))}))}:function(source){return source.lift(new SwitchMapOperator(project))}}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var map_1=require("./map"),from_1=require("../observable/from"),innerSubscribe_1=require("../innerSubscribe");exports.switchMap=switchMap;var SwitchMapOperator=function(){function SwitchMapOperator(project){this.project=project}return SwitchMapOperator.prototype.call=function(subscriber,source){return source.subscribe(new SwitchMapSubscriber(subscriber,this.project))},SwitchMapOperator}(),SwitchMapSubscriber=function(_super){function SwitchMapSubscriber(destination,project){var _this=_super.call(this,destination)||this;return _this.project=project,_this.index=0,_this}return __extends(SwitchMapSubscriber,_super),SwitchMapSubscriber.prototype._next=function(value){var index=this.index++,result;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result)},SwitchMapSubscriber.prototype._innerSub=function(result){var innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe();var innerSubscriber=new innerSubscribe_1.SimpleInnerSubscriber(this),destination=this.destination;destination.add(innerSubscriber),this.innerSubscription=innerSubscribe_1.innerSubscribe(result,innerSubscriber),this.innerSubscription!==innerSubscriber&&destination.add(this.innerSubscription)},SwitchMapSubscriber.prototype._complete=function(){var innerSubscription=this.innerSubscription;(!innerSubscription||innerSubscription.closed)&&_super.prototype._complete.call(this),this.unsubscribe()},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=void 0},SwitchMapSubscriber.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&_super.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(innerValue){this.destination.next(innerValue)},SwitchMapSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314,"../observable/from":324,"./map":382}],424:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var switchMap_1=require("./switchMap");exports.switchMapTo=function(innerObservable,resultSelector){return resultSelector?switchMap_1.switchMap(function(){return innerObservable},resultSelector):switchMap_1.switchMap(function(){return innerObservable})}},{"./switchMap":423}],425:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),empty_1=require("../observable/empty");exports.take=function(count){return function(source){return 0===count?empty_1.empty():source.lift(new TakeOperator(count))}};var TakeOperator=function(){function TakeOperator(total){if(this.total=total,0>this.total)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeOperator.prototype.call=function(subscriber,source){return source.subscribe(new TakeSubscriber(subscriber,this.total))},TakeOperator}(),TakeSubscriber=function(_super){function TakeSubscriber(destination,total){var _this=_super.call(this,destination)||this;return _this.total=total,_this.count=0,_this}return __extends(TakeSubscriber,_super),TakeSubscriber.prototype._next=function(value){var total=this.total,count=++this.count;count<=total&&(this.destination.next(value),count===total&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../observable/empty":322,"../util/ArgumentOutOfRangeError":468}],426:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),ArgumentOutOfRangeError_1=require("../util/ArgumentOutOfRangeError"),empty_1=require("../observable/empty");exports.takeLast=function(count){return function(source){return 0===count?empty_1.empty():source.lift(new TakeLastOperator(count))}};var TakeLastOperator=function(){function TakeLastOperator(total){if(this.total=total,0>this.total)throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError}return TakeLastOperator.prototype.call=function(subscriber,source){return source.subscribe(new TakeLastSubscriber(subscriber,this.total))},TakeLastOperator}(),TakeLastSubscriber=function(_super){function TakeLastSubscriber(destination,total){var _this=_super.call(this,destination)||this;return _this.total=total,_this.ring=[],_this.count=0,_this}return __extends(TakeLastSubscriber,_super),TakeLastSubscriber.prototype._next=function(value){var ring=this.ring,total=this.total,count=this.count++;if(ring.length<total)ring.push(value);else{ring[count%total]=value}},TakeLastSubscriber.prototype._complete=function(){var destination=this.destination,count=this.count;if(0<count)for(var total=this.count>=this.total?this.total:this.count,ring=this.ring,i=0,idx;i<total;i++)idx=count++%total,destination.next(ring[idx]);destination.complete()},TakeLastSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../observable/empty":322,"../util/ArgumentOutOfRangeError":468}],427:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.takeUntil=function(notifier){return function(source){return source.lift(new TakeUntilOperator(notifier))}};var TakeUntilOperator=function(){function TakeUntilOperator(notifier){this.notifier=notifier}return TakeUntilOperator.prototype.call=function(subscriber,source){var takeUntilSubscriber=new TakeUntilSubscriber(subscriber),notifierSubscription=innerSubscribe_1.innerSubscribe(this.notifier,new innerSubscribe_1.SimpleInnerSubscriber(takeUntilSubscriber));return notifierSubscription&&!takeUntilSubscriber.seenValue?(takeUntilSubscriber.add(notifierSubscription),source.subscribe(takeUntilSubscriber)):takeUntilSubscriber},TakeUntilOperator}(),TakeUntilSubscriber=function(_super){function TakeUntilSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.seenValue=!1,_this}return __extends(TakeUntilSubscriber,_super),TakeUntilSubscriber.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],428:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.takeWhile=function(predicate,inclusive){return void 0===inclusive&&(inclusive=!1),function(source){return source.lift(new TakeWhileOperator(predicate,inclusive))}};var TakeWhileOperator=function(){function TakeWhileOperator(predicate,inclusive){this.predicate=predicate,this.inclusive=inclusive}return TakeWhileOperator.prototype.call=function(subscriber,source){return source.subscribe(new TakeWhileSubscriber(subscriber,this.predicate,this.inclusive))},TakeWhileOperator}(),TakeWhileSubscriber=function(_super){function TakeWhileSubscriber(destination,predicate,inclusive){var _this=_super.call(this,destination)||this;return _this.predicate=predicate,_this.inclusive=inclusive,_this.index=0,_this}return __extends(TakeWhileSubscriber,_super),TakeWhileSubscriber.prototype._next=function(value){var destination=this.destination,result;try{result=this.predicate(value,this.index++)}catch(err){return void destination.error(err)}this.nextOrComplete(value,result)},TakeWhileSubscriber.prototype.nextOrComplete=function(value,predicateResult){var destination=this.destination;predicateResult?destination.next(value):(this.inclusive&&destination.next(value),destination.complete())},TakeWhileSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311}],429:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),noop_1=require("../util/noop"),isFunction_1=require("../util/isFunction");exports.tap=function(nextOrObserver,error,complete){return function(source){return source.lift(new DoOperator(nextOrObserver,error,complete))}};var DoOperator=function(){function DoOperator(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}return DoOperator.prototype.call=function(subscriber,source){return source.subscribe(new TapSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))},DoOperator}(),TapSubscriber=function(_super){function TapSubscriber(destination,observerOrNext,error,complete){var _this=_super.call(this,destination)||this;return _this._tapNext=noop_1.noop,_this._tapError=noop_1.noop,_this._tapComplete=noop_1.noop,_this._tapError=error||noop_1.noop,_this._tapComplete=complete||noop_1.noop,isFunction_1.isFunction(observerOrNext)?(_this._context=_this,_this._tapNext=observerOrNext):observerOrNext&&(_this._context=observerOrNext,_this._tapNext=observerOrNext.next||noop_1.noop,_this._tapError=observerOrNext.error||noop_1.noop,_this._tapComplete=observerOrNext.complete||noop_1.noop),_this}return __extends(TapSubscriber,_super),TapSubscriber.prototype._next=function(value){try{this._tapNext.call(this._context,value)}catch(err){return void this.destination.error(err)}this.destination.next(value)},TapSubscriber.prototype._error=function(err){try{this._tapError.call(this._context,err)}catch(err){return void this.destination.error(err)}this.destination.error(err)},TapSubscriber.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(err){return void this.destination.error(err)}return this.destination.complete()},TapSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../util/isFunction":480,"../util/noop":488}],430:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var innerSubscribe_1=require("../innerSubscribe");exports.defaultThrottleConfig={leading:!0,trailing:!1},exports.throttle=function(durationSelector,config){return void 0===config&&(config=exports.defaultThrottleConfig),function(source){return source.lift(new ThrottleOperator(durationSelector,!!config.leading,!!config.trailing))}};var ThrottleOperator=function(){function ThrottleOperator(durationSelector,leading,trailing){this.durationSelector=durationSelector,this.leading=leading,this.trailing=trailing}return ThrottleOperator.prototype.call=function(subscriber,source){return source.subscribe(new ThrottleSubscriber(subscriber,this.durationSelector,this.leading,this.trailing))},ThrottleOperator}(),ThrottleSubscriber=function(_super){function ThrottleSubscriber(destination,durationSelector,_leading,_trailing){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.durationSelector=durationSelector,_this._leading=_leading,_this._trailing=_trailing,_this._hasValue=!1,_this}return __extends(ThrottleSubscriber,_super),ThrottleSubscriber.prototype._next=function(value){this._hasValue=!0,this._sendValue=value,this._throttled||(this._leading?this.send():this.throttle(value))},ThrottleSubscriber.prototype.send=function(){var _a=this,_hasValue=_a._hasValue,_sendValue=_a._sendValue;_hasValue&&(this.destination.next(_sendValue),this.throttle(_sendValue)),this._hasValue=!1,this._sendValue=void 0},ThrottleSubscriber.prototype.throttle=function(value){var duration=this.tryDurationSelector(value);!duration||this.add(this._throttled=innerSubscribe_1.innerSubscribe(duration,new innerSubscribe_1.SimpleInnerSubscriber(this)))},ThrottleSubscriber.prototype.tryDurationSelector=function(value){try{return this.durationSelector(value)}catch(err){return this.destination.error(err),null}},ThrottleSubscriber.prototype.throttlingDone=function(){var _a=this,_throttled=_a._throttled,_trailing=_a._trailing;_throttled&&_throttled.unsubscribe(),this._throttled=void 0,_trailing&&this.send()},ThrottleSubscriber.prototype.notifyNext=function(){this.throttlingDone()},ThrottleSubscriber.prototype.notifyComplete=function(){this.throttlingDone()},ThrottleSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314}],431:[function(require,module,exports){"use strict";function dispatchNext(arg){var subscriber=arg.subscriber;subscriber.clearThrottle()}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),async_1=require("../scheduler/async"),throttle_1=require("./throttle");exports.throttleTime=function(duration,scheduler,config){return void 0===scheduler&&(scheduler=async_1.async),void 0===config&&(config=throttle_1.defaultThrottleConfig),function(source){return source.lift(new ThrottleTimeOperator(duration,scheduler,config.leading,config.trailing))}};var ThrottleTimeOperator=function(){function ThrottleTimeOperator(duration,scheduler,leading,trailing){this.duration=duration,this.scheduler=scheduler,this.leading=leading,this.trailing=trailing}return ThrottleTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new ThrottleTimeSubscriber(subscriber,this.duration,this.scheduler,this.leading,this.trailing))},ThrottleTimeOperator}(),ThrottleTimeSubscriber=function(_super){function ThrottleTimeSubscriber(destination,duration,scheduler,leading,trailing){var _this=_super.call(this,destination)||this;return _this.duration=duration,_this.scheduler=scheduler,_this.leading=leading,_this.trailing=trailing,_this._hasTrailingValue=!1,_this._trailingValue=null,_this}return __extends(ThrottleTimeSubscriber,_super),ThrottleTimeSubscriber.prototype._next=function(value){this.throttled?this.trailing&&(this._trailingValue=value,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(value):this.trailing&&(this._trailingValue=value,this._hasTrailingValue=!0))},ThrottleTimeSubscriber.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var throttled=this.throttled;throttled&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),throttled.unsubscribe(),this.remove(throttled),this.throttled=null)},ThrottleTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../scheduler/async":463,"./throttle":430}],432:[function(require,module,exports){"use strict";function defaultErrorFactory(){return new EmptyError_1.EmptyError}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var EmptyError_1=require("../util/EmptyError"),Subscriber_1=require("../Subscriber");exports.throwIfEmpty=function(errorFactory){return void 0===errorFactory&&(errorFactory=defaultErrorFactory),function(source){return source.lift(new ThrowIfEmptyOperator(errorFactory))}};var ThrowIfEmptyOperator=function(){function ThrowIfEmptyOperator(errorFactory){this.errorFactory=errorFactory}return ThrowIfEmptyOperator.prototype.call=function(subscriber,source){return source.subscribe(new ThrowIfEmptySubscriber(subscriber,this.errorFactory))},ThrowIfEmptyOperator}(),ThrowIfEmptySubscriber=function(_super){function ThrowIfEmptySubscriber(destination,errorFactory){var _this=_super.call(this,destination)||this;return _this.errorFactory=errorFactory,_this.hasValue=!1,_this}return __extends(ThrowIfEmptySubscriber,_super),ThrowIfEmptySubscriber.prototype._next=function(value){this.hasValue=!0,this.destination.next(value)},ThrowIfEmptySubscriber.prototype._complete=function(){if(!this.hasValue){var err;try{err=this.errorFactory()}catch(e){err=e}this.destination.error(err)}else return this.destination.complete()},ThrowIfEmptySubscriber}(Subscriber_1.Subscriber)},{"../Subscriber":311,"../util/EmptyError":469}],433:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),scan_1=require("./scan"),defer_1=require("../observable/defer"),map_1=require("./map");exports.timeInterval=function(scheduler){return void 0===scheduler&&(scheduler=async_1.async),function(source){return defer_1.defer(function(){return source.pipe(scan_1.scan(function(_a,value){var current=_a.current;return{value:value,current:scheduler.now(),last:current}},{current:scheduler.now(),value:void 0,last:void 0}),map_1.map(function(_a){var current=_a.current,last=_a.last,value=_a.value;return new TimeInterval(value,current-last)}))})}};var TimeInterval=function(){return function(value,interval){this.value=value,this.interval=interval}}();exports.TimeInterval=TimeInterval},{"../observable/defer":321,"../scheduler/async":463,"./map":382,"./scan":411}],434:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),TimeoutError_1=require("../util/TimeoutError"),timeoutWith_1=require("./timeoutWith"),throwError_1=require("../observable/throwError");exports.timeout=function(due,scheduler){return void 0===scheduler&&(scheduler=async_1.async),timeoutWith_1.timeoutWith(due,throwError_1.throwError(new TimeoutError_1.TimeoutError),scheduler)}},{"../observable/throwError":339,"../scheduler/async":463,"../util/TimeoutError":472,"./timeoutWith":435}],435:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),isDate_1=require("../util/isDate"),innerSubscribe_1=require("../innerSubscribe");exports.timeoutWith=function(due,withObservable,scheduler){return void 0===scheduler&&(scheduler=async_1.async),function(source){var absoluteTimeout=isDate_1.isDate(due),waitFor=absoluteTimeout?+due-scheduler.now():Math.abs(due);return source.lift(new TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler))}};var TimeoutWithOperator=function(){function TimeoutWithOperator(waitFor,absoluteTimeout,withObservable,scheduler){this.waitFor=waitFor,this.absoluteTimeout=absoluteTimeout,this.withObservable=withObservable,this.scheduler=scheduler}return TimeoutWithOperator.prototype.call=function(subscriber,source){return source.subscribe(new TimeoutWithSubscriber(subscriber,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),TimeoutWithSubscriber=function(_super){function TimeoutWithSubscriber(destination,absoluteTimeout,waitFor,withObservable,scheduler){var _this=_super.call(this,destination)||this;return _this.absoluteTimeout=absoluteTimeout,_this.waitFor=waitFor,_this.withObservable=withObservable,_this.scheduler=scheduler,_this.scheduleTimeout(),_this}return __extends(TimeoutWithSubscriber,_super),TimeoutWithSubscriber.dispatchTimeout=function(subscriber){var withObservable=subscriber.withObservable;subscriber._unsubscribeAndRecycle(),subscriber.add(innerSubscribe_1.innerSubscribe(withObservable,new innerSubscribe_1.SimpleInnerSubscriber(subscriber)))},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var action=this.action;action?this.action=action.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,this))},TimeoutWithSubscriber.prototype._next=function(value){this.absoluteTimeout||this.scheduleTimeout(),_super.prototype._next.call(this,value)},TimeoutWithSubscriber.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},TimeoutWithSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../innerSubscribe":314,"../scheduler/async":463,"../util/isDate":479}],436:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var async_1=require("../scheduler/async"),map_1=require("./map");exports.timestamp=function(scheduler){return void 0===scheduler&&(scheduler=async_1.async),map_1.map(function(value){return new Timestamp(value,scheduler.now())})};var Timestamp=function(){return function(value,timestamp){this.value=value,this.timestamp=timestamp}}();exports.Timestamp=Timestamp},{"../scheduler/async":463,"./map":382}],437:[function(require,module,exports){"use strict";function toArrayReducer(arr,item,index){return 0===index?[item]:(arr.push(item),arr)}Object.defineProperty(exports,"__esModule",{value:!0});var reduce_1=require("./reduce");exports.toArray=function(){return reduce_1.reduce(toArrayReducer,[])}},{"./reduce":403}],438:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),innerSubscribe_1=require("../innerSubscribe");exports.window=function(windowBoundaries){return function(source){return source.lift(new WindowOperator(windowBoundaries))}};var WindowOperator=function(){function WindowOperator(windowBoundaries){this.windowBoundaries=windowBoundaries}return WindowOperator.prototype.call=function(subscriber,source){var windowSubscriber=new WindowSubscriber(subscriber),sourceSubscription=source.subscribe(windowSubscriber);return sourceSubscription.closed||windowSubscriber.add(innerSubscribe_1.innerSubscribe(this.windowBoundaries,new innerSubscribe_1.SimpleInnerSubscriber(windowSubscriber))),sourceSubscription},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.window=new Subject_1.Subject,destination.next(_this.window),_this}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(){this.openWindow()},WindowSubscriber.prototype.notifyError=function(error){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(){this._complete()},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype._unsubscribe=function(){this.window=null},WindowSubscriber.prototype.openWindow=function(){var prevWindow=this.window;prevWindow&&prevWindow.complete();var destination=this.destination,newWindow=this.window=new Subject_1.Subject;destination.next(newWindow)},WindowSubscriber}(innerSubscribe_1.SimpleOuterSubscriber)},{"../Subject":309,"../innerSubscribe":314}],439:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),Subject_1=require("../Subject");exports.windowCount=function(windowSize,startWindowEvery){return void 0===startWindowEvery&&(startWindowEvery=0),function(source){return source.lift(new WindowCountOperator(windowSize,startWindowEvery))}};var WindowCountOperator=function(){function WindowCountOperator(windowSize,startWindowEvery){this.windowSize=windowSize,this.startWindowEvery=startWindowEvery}return WindowCountOperator.prototype.call=function(subscriber,source){return source.subscribe(new WindowCountSubscriber(subscriber,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),WindowCountSubscriber=function(_super){function WindowCountSubscriber(destination,windowSize,startWindowEvery){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.windowSize=windowSize,_this.startWindowEvery=startWindowEvery,_this.windows=[new Subject_1.Subject],_this.count=0,destination.next(_this.windows[0]),_this}return __extends(WindowCountSubscriber,_super),WindowCountSubscriber.prototype._next=function(value){for(var startWindowEvery=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,destination=this.destination,windowSize=this.windowSize,windows=this.windows,len=windows.length,i=0;i<len&&!this.closed;i++)windows[i].next(value);var c=this.count-windowSize+1;if(0<=c&&0==c%startWindowEvery&&!this.closed&&windows.shift().complete(),0==++this.count%startWindowEvery&&!this.closed){var window_1=new Subject_1.Subject;windows.push(window_1),destination.next(window_1)}},WindowCountSubscriber.prototype._error=function(err){var windows=this.windows;if(windows)for(;0<windows.length&&!this.closed;)windows.shift().error(err);this.destination.error(err)},WindowCountSubscriber.prototype._complete=function(){var windows=this.windows;if(windows)for(;0<windows.length&&!this.closed;)windows.shift().complete();this.destination.complete()},WindowCountSubscriber.prototype._unsubscribe=function(){this.count=0,this.windows=null},WindowCountSubscriber}(Subscriber_1.Subscriber)},{"../Subject":309,"../Subscriber":311}],440:[function(require,module,exports){"use strict";function dispatchWindowTimeSpanOnly(state){var subscriber=state.subscriber,windowTimeSpan=state.windowTimeSpan,window=state.window;window&&subscriber.closeWindow(window),state.window=subscriber.openWindow(),this.schedule(state,windowTimeSpan)}function dispatchWindowCreation(state){var windowTimeSpan=state.windowTimeSpan,subscriber=state.subscriber,scheduler=state.scheduler,windowCreationInterval=state.windowCreationInterval,window=subscriber.openWindow(),action=this,context={action:action,subscription:null};context.subscription=scheduler.schedule(dispatchWindowClose,windowTimeSpan,{subscriber:subscriber,window:window,context:context}),action.add(context.subscription),action.schedule(state,windowCreationInterval)}function dispatchWindowClose(state){var subscriber=state.subscriber,window=state.window,context=state.context;context&&context.action&&context.subscription&&context.action.remove(context.subscription),subscriber.closeWindow(window)}var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),async_1=require("../scheduler/async"),Subscriber_1=require("../Subscriber"),isNumeric_1=require("../util/isNumeric"),isScheduler_1=require("../util/isScheduler");exports.windowTime=function(windowTimeSpan){var scheduler=async_1.async,windowCreationInterval=null,maxWindowSize=Number.POSITIVE_INFINITY;return isScheduler_1.isScheduler(arguments[3])&&(scheduler=arguments[3]),isScheduler_1.isScheduler(arguments[2])?scheduler=arguments[2]:isNumeric_1.isNumeric(arguments[2])&&(maxWindowSize=+arguments[2]),isScheduler_1.isScheduler(arguments[1])?scheduler=arguments[1]:isNumeric_1.isNumeric(arguments[1])&&(windowCreationInterval=+arguments[1]),function(source){return source.lift(new WindowTimeOperator(windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler))}};var WindowTimeOperator=function(){function WindowTimeOperator(windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler){this.windowTimeSpan=windowTimeSpan,this.windowCreationInterval=windowCreationInterval,this.maxWindowSize=maxWindowSize,this.scheduler=scheduler}return WindowTimeOperator.prototype.call=function(subscriber,source){return source.subscribe(new WindowTimeSubscriber(subscriber,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},WindowTimeOperator}(),CountedSubject=function(_super){function CountedSubject(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._numberOfNextedValues=0,_this}return __extends(CountedSubject,_super),CountedSubject.prototype.next=function(value){this._numberOfNextedValues++,_super.prototype.next.call(this,value)},Object.defineProperty(CountedSubject.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),CountedSubject}(Subject_1.Subject),WindowTimeSubscriber=function(_super){function WindowTimeSubscriber(destination,windowTimeSpan,windowCreationInterval,maxWindowSize,scheduler){var _this=_super.call(this,destination)||this;_this.destination=destination,_this.windowTimeSpan=windowTimeSpan,_this.windowCreationInterval=windowCreationInterval,_this.maxWindowSize=maxWindowSize,_this.scheduler=scheduler,_this.windows=[];var window=_this.openWindow();if(null!==windowCreationInterval&&0<=windowCreationInterval){_this.add(scheduler.schedule(dispatchWindowClose,windowTimeSpan,{subscriber:_this,window:window,context:null})),_this.add(scheduler.schedule(dispatchWindowCreation,windowCreationInterval,{windowTimeSpan:windowTimeSpan,windowCreationInterval:windowCreationInterval,subscriber:_this,scheduler:scheduler}))}else{_this.add(scheduler.schedule(dispatchWindowTimeSpanOnly,windowTimeSpan,{subscriber:_this,window:window,windowTimeSpan:windowTimeSpan}))}return _this}return __extends(WindowTimeSubscriber,_super),WindowTimeSubscriber.prototype._next=function(value){for(var windows=this.windows,len=windows.length,i=0,window_1;i<len;i++)window_1=windows[i],window_1.closed||(window_1.next(value),window_1.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(window_1))},WindowTimeSubscriber.prototype._error=function(err){for(var windows=this.windows;0<windows.length;)windows.shift().error(err);this.destination.error(err)},WindowTimeSubscriber.prototype._complete=function(){for(var windows=this.windows,window_2;0<windows.length;)window_2=windows.shift(),window_2.closed||window_2.complete();this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var window=new CountedSubject;this.windows.push(window);var destination=this.destination;return destination.next(window),window},WindowTimeSubscriber.prototype.closeWindow=function(window){window.complete();var windows=this.windows;windows.splice(windows.indexOf(window),1)},WindowTimeSubscriber}(Subscriber_1.Subscriber)},{"../Subject":309,"../Subscriber":311,"../scheduler/async":463,"../util/isNumeric":483,"../util/isScheduler":487}],441:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),Subscription_1=require("../Subscription"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.windowToggle=function(openings,closingSelector){return function(source){return source.lift(new WindowToggleOperator(openings,closingSelector))}};var WindowToggleOperator=function(){function WindowToggleOperator(openings,closingSelector){this.openings=openings,this.closingSelector=closingSelector}return WindowToggleOperator.prototype.call=function(subscriber,source){return source.subscribe(new WindowToggleSubscriber(subscriber,this.openings,this.closingSelector))},WindowToggleOperator}(),WindowToggleSubscriber=function(_super){function WindowToggleSubscriber(destination,openings,closingSelector){var _this=_super.call(this,destination)||this;return _this.openings=openings,_this.closingSelector=closingSelector,_this.contexts=[],_this.add(_this.openSubscription=subscribeToResult_1.subscribeToResult(_this,openings,openings)),_this}return __extends(WindowToggleSubscriber,_super),WindowToggleSubscriber.prototype._next=function(value){var contexts=this.contexts;if(contexts)for(var len=contexts.length,i=0;i<len;i++)contexts[i].window.next(value)},WindowToggleSubscriber.prototype._error=function(err){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1,context_1;++index<len;)context_1=contexts[index],context_1.window.error(err),context_1.subscription.unsubscribe();_super.prototype._error.call(this,err)},WindowToggleSubscriber.prototype._complete=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1,context_2;++index<len;)context_2=contexts[index],context_2.window.complete(),context_2.subscription.unsubscribe();_super.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var contexts=this.contexts;if(this.contexts=null,contexts)for(var len=contexts.length,index=-1,context_3;++index<len;)context_3=contexts[index],context_3.window.unsubscribe(),context_3.subscription.unsubscribe()},WindowToggleSubscriber.prototype.notifyNext=function(outerValue,innerValue){if(outerValue===this.openings){var closingNotifier;try{var closingSelector=this.closingSelector;closingNotifier=closingSelector(innerValue)}catch(e){return this.error(e)}var window_1=new Subject_1.Subject,subscription=new Subscription_1.Subscription,context_4={window:window_1,subscription:subscription};this.contexts.push(context_4);var innerSubscription=subscribeToResult_1.subscribeToResult(this,closingNotifier,context_4);innerSubscription.closed?this.closeWindow(this.contexts.length-1):(innerSubscription.context=context_4,subscription.add(innerSubscription)),this.destination.next(window_1)}else this.closeWindow(this.contexts.indexOf(outerValue))},WindowToggleSubscriber.prototype.notifyError=function(err){this.error(err)},WindowToggleSubscriber.prototype.notifyComplete=function(inner){inner!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(inner.context))},WindowToggleSubscriber.prototype.closeWindow=function(index){if(-1!==index){var contexts=this.contexts,context=contexts[index],window=context.window,subscription=context.subscription;contexts.splice(index,1),window.complete(),subscription.unsubscribe()}},WindowToggleSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":306,"../Subject":309,"../Subscription":312,"../util/subscribeToResult":496}],442:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subject_1=require("../Subject"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.windowWhen=function(closingSelector){return function(source){return source.lift(new WindowOperator(closingSelector))}};var WindowOperator=function(){function WindowOperator(closingSelector){this.closingSelector=closingSelector}return WindowOperator.prototype.call=function(subscriber,source){return source.subscribe(new WindowSubscriber(subscriber,this.closingSelector))},WindowOperator}(),WindowSubscriber=function(_super){function WindowSubscriber(destination,closingSelector){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this.closingSelector=closingSelector,_this.openWindow(),_this}return __extends(WindowSubscriber,_super),WindowSubscriber.prototype.notifyNext=function(_outerValue,_innerValue,_outerIndex,_innerIndex,innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype.notifyError=function(error){this._error(error)},WindowSubscriber.prototype.notifyComplete=function(innerSub){this.openWindow(innerSub)},WindowSubscriber.prototype._next=function(value){this.window.next(value)},WindowSubscriber.prototype._error=function(err){this.window.error(err),this.destination.error(err),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(innerSub){void 0===innerSub&&(innerSub=null),innerSub&&(this.remove(innerSub),innerSub.unsubscribe());var prevWindow=this.window;prevWindow&&prevWindow.complete();var window=this.window=new Subject_1.Subject;this.destination.next(window);var closingNotifier;try{var closingSelector=this.closingSelector;closingNotifier=closingSelector()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=subscribeToResult_1.subscribeToResult(this,closingNotifier))},WindowSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":306,"../Subject":309,"../util/subscribeToResult":496}],443:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.withLatestFrom=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return function(source){var project;"function"==typeof args[args.length-1]&&(project=args.pop());return source.lift(new WithLatestFromOperator(args,project))}};var WithLatestFromOperator=function(){function WithLatestFromOperator(observables,project){this.observables=observables,this.project=project}return WithLatestFromOperator.prototype.call=function(subscriber,source){return source.subscribe(new WithLatestFromSubscriber(subscriber,this.observables,this.project))},WithLatestFromOperator}(),WithLatestFromSubscriber=function(_super){function WithLatestFromSubscriber(destination,observables,project){var _this=_super.call(this,destination)||this;_this.observables=observables,_this.project=project,_this.toRespond=[];var len=observables.length;_this.values=Array(len);for(var i=0;i<len;i++)_this.toRespond.push(i);for(var i=0,observable;i<len;i++)observable=observables[i],_this.add(subscribeToResult_1.subscribeToResult(_this,observable,void 0,i));return _this}return __extends(WithLatestFromSubscriber,_super),WithLatestFromSubscriber.prototype.notifyNext=function(_outerValue,innerValue,outerIndex){this.values[outerIndex]=innerValue;var toRespond=this.toRespond;if(0<toRespond.length){var found=toRespond.indexOf(outerIndex);-1!==found&&toRespond.splice(found,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(value){if(0===this.toRespond.length){var args=[value].concat(this.values);this.project?this._tryProject(args):this.destination.next(args)}},WithLatestFromSubscriber.prototype._tryProject=function(args){var result;try{result=this.project.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)},WithLatestFromSubscriber}(OuterSubscriber_1.OuterSubscriber)},{"../OuterSubscriber":306,"../util/subscribeToResult":496}],444:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var zip_1=require("../observable/zip");exports.zip=function(){for(var observables=[],_i=0;_i<arguments.length;_i++)observables[_i]=arguments[_i];return function(source){return source.lift.call(zip_1.zip.apply(void 0,[source].concat(observables)))}}},{"../observable/zip":342}],445:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var zip_1=require("../observable/zip");exports.zipAll=function(project){return function(source){return source.lift(new zip_1.ZipOperator(project))}}},{"../observable/zip":342}],446:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),Subscription_1=require("../Subscription");exports.scheduleArray=function(input,scheduler){return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription,i=0;return sub.add(scheduler.schedule(function(){return i===input.length?void subscriber.complete():void(subscriber.next(input[i++]),!subscriber.closed&&sub.add(this.schedule()))})),sub})}},{"../Observable":304,"../Subscription":312}],447:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),Subscription_1=require("../Subscription"),iterator_1=require("../symbol/iterator");exports.scheduleIterable=function(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription,iterator;return sub.add(function(){iterator&&"function"==typeof iterator.return&&iterator.return()}),sub.add(scheduler.schedule(function(){iterator=input[iterator_1.iterator](),sub.add(scheduler.schedule(function(){if(!subscriber.closed){var value,done;try{var result=iterator.next();value=result.value,done=result.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():(subscriber.next(value),this.schedule())}}))})),sub})}},{"../Observable":304,"../Subscription":312,"../symbol/iterator":465}],448:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),Subscription_1=require("../Subscription"),observable_1=require("../symbol/observable");exports.scheduleObservable=function(input,scheduler){return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription;return sub.add(scheduler.schedule(function(){var observable=input[observable_1.observable]();sub.add(observable.subscribe({next:function(value){sub.add(scheduler.schedule(function(){return subscriber.next(value)}))},error:function(err){sub.add(scheduler.schedule(function(){return subscriber.error(err)}))},complete:function(){sub.add(scheduler.schedule(function(){return subscriber.complete()}))}}))})),sub})}},{"../Observable":304,"../Subscription":312,"../symbol/observable":466}],449:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable"),Subscription_1=require("../Subscription");exports.schedulePromise=function(input,scheduler){return new Observable_1.Observable(function(subscriber){var sub=new Subscription_1.Subscription;return sub.add(scheduler.schedule(function(){return input.then(function(value){sub.add(scheduler.schedule(function(){subscriber.next(value),sub.add(scheduler.schedule(function(){return subscriber.complete()}))}))},function(err){sub.add(scheduler.schedule(function(){return subscriber.error(err)}))})})),sub})}},{"../Observable":304,"../Subscription":312}],450:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var scheduleObservable_1=require("./scheduleObservable"),schedulePromise_1=require("./schedulePromise"),scheduleArray_1=require("./scheduleArray"),scheduleIterable_1=require("./scheduleIterable"),isInteropObservable_1=require("../util/isInteropObservable"),isPromise_1=require("../util/isPromise"),isArrayLike_1=require("../util/isArrayLike"),isIterable_1=require("../util/isIterable");exports.scheduled=function(input,scheduler){if(null!=input){if(isInteropObservable_1.isInteropObservable(input))return scheduleObservable_1.scheduleObservable(input,scheduler);if(isPromise_1.isPromise(input))return schedulePromise_1.schedulePromise(input,scheduler);if(isArrayLike_1.isArrayLike(input))return scheduleArray_1.scheduleArray(input,scheduler);if(isIterable_1.isIterable(input)||"string"==typeof input)return scheduleIterable_1.scheduleIterable(input,scheduler)}throw new TypeError((null!==input&&typeof input||input)+" is not observable")}},{"../util/isArrayLike":478,"../util/isInteropObservable":481,"../util/isIterable":482,"../util/isPromise":486,"./scheduleArray":446,"./scheduleIterable":447,"./scheduleObservable":448,"./schedulePromise":449}],451:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Subscription_1=require("../Subscription"),Action=function(_super){function Action(){return _super.call(this)||this}return __extends(Action,_super),Action.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this},Action}(Subscription_1.Subscription);exports.Action=Action},{"../Subscription":312}],452:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AsyncAction_1=require("./AsyncAction"),AnimationFrameAction=function(_super){function AnimationFrameAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this}return __extends(AnimationFrameAction,_super),AnimationFrameAction.prototype.requestAsyncId=function(scheduler,id,delay){return(void 0===delay&&(delay=0),null!==delay&&0<delay)?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=requestAnimationFrame(function(){return scheduler.flush(null)})))},AnimationFrameAction.prototype.recycleAsyncId=function(scheduler,id,delay){return(void 0===delay&&(delay=0),null!==delay&&0<delay||null===delay&&0<this.delay)?_super.prototype.recycleAsyncId.call(this,scheduler,id,delay):void(0===scheduler.actions.length&&(cancelAnimationFrame(id),scheduler.scheduled=void 0))},AnimationFrameAction}(AsyncAction_1.AsyncAction);exports.AnimationFrameAction=AnimationFrameAction},{"./AsyncAction":456}],453:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AsyncScheduler_1=require("./AsyncScheduler"),AnimationFrameScheduler=function(_super){function AnimationFrameScheduler(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(AnimationFrameScheduler,_super),AnimationFrameScheduler.prototype.flush=function(action){this.active=!0,this.scheduled=void 0;var actions=this.actions,index=-1,count=actions.length,error;action=action||actions.shift();do if(error=action.execute(action.state,action.delay))break;while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}},AnimationFrameScheduler}(AsyncScheduler_1.AsyncScheduler);exports.AnimationFrameScheduler=AnimationFrameScheduler},{"./AsyncScheduler":457}],454:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Immediate_1=require("../util/Immediate"),AsyncAction_1=require("./AsyncAction"),AsapAction=function(_super){function AsapAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this}return __extends(AsapAction,_super),AsapAction.prototype.requestAsyncId=function(scheduler,id,delay){return(void 0===delay&&(delay=0),null!==delay&&0<delay)?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=Immediate_1.Immediate.setImmediate(scheduler.flush.bind(scheduler,null))))},AsapAction.prototype.recycleAsyncId=function(scheduler,id,delay){return(void 0===delay&&(delay=0),null!==delay&&0<delay||null===delay&&0<this.delay)?_super.prototype.recycleAsyncId.call(this,scheduler,id,delay):void(0===scheduler.actions.length&&(Immediate_1.Immediate.clearImmediate(id),scheduler.scheduled=void 0))},AsapAction}(AsyncAction_1.AsyncAction);exports.AsapAction=AsapAction},{"../util/Immediate":470,"./AsyncAction":456}],455:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AsyncScheduler_1=require("./AsyncScheduler"),AsapScheduler=function(_super){function AsapScheduler(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(AsapScheduler,_super),AsapScheduler.prototype.flush=function(action){this.active=!0,this.scheduled=void 0;var actions=this.actions,index=-1,count=actions.length,error;action=action||actions.shift();do if(error=action.execute(action.state,action.delay))break;while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}},AsapScheduler}(AsyncScheduler_1.AsyncScheduler);exports.AsapScheduler=AsapScheduler},{"./AsyncScheduler":457}],456:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Action_1=require("./Action"),AsyncAction=function(_super){function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.pending=!1,_this}return __extends(AsyncAction,_super),AsyncAction.prototype.schedule=function(state,delay){if(void 0===delay&&(delay=0),this.closed)return this;this.state=state;var id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=this.id||this.requestAsyncId(scheduler,this.id,delay),this},AsyncAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),setInterval(scheduler.flush.bind(scheduler,this),delay)},AsyncAction.prototype.recycleAsyncId=function(scheduler,id,delay){return(void 0===delay&&(delay=0),null!==delay&&this.delay===delay&&!1===this.pending)?id:void clearInterval(id)},AsyncAction.prototype.execute=function(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var error=this._execute(state,delay);return error?error:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},AsyncAction.prototype._execute=function(state){var errored=!1,errorValue=void 0;try{this.work(state)}catch(e){errored=!0,errorValue=!!e&&e||new Error(e)}if(errored)return this.unsubscribe(),errorValue},AsyncAction.prototype._unsubscribe=function(){var id=this.id,scheduler=this.scheduler,actions=scheduler.actions,index=actions.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==index&&actions.splice(index,1),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null},AsyncAction}(Action_1.Action);exports.AsyncAction=AsyncAction},{"./Action":451}],457:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Scheduler_1=require("../Scheduler"),AsyncScheduler=function(_super){function AsyncScheduler(SchedulerAction,now){void 0===now&&(now=Scheduler_1.Scheduler.now);var _this=_super.call(this,SchedulerAction,function(){return AsyncScheduler.delegate&&AsyncScheduler.delegate!==_this?AsyncScheduler.delegate.now():now()})||this;return _this.actions=[],_this.active=!1,_this.scheduled=void 0,_this}return __extends(AsyncScheduler,_super),AsyncScheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),AsyncScheduler.delegate&&AsyncScheduler.delegate!==this?AsyncScheduler.delegate.schedule(work,delay,state):_super.prototype.schedule.call(this,work,delay,state)},AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this.active)return void actions.push(action);var error;this.active=!0;do if(error=action.execute(action.state,action.delay))break;while(action=actions.shift());if(this.active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}},AsyncScheduler}(Scheduler_1.Scheduler);exports.AsyncScheduler=AsyncScheduler},{"../Scheduler":308}],458:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AsyncAction_1=require("./AsyncAction"),QueueAction=function(_super){function QueueAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this}return __extends(QueueAction,_super),QueueAction.prototype.schedule=function(state,delay){return(void 0===delay&&(delay=0),0<delay)?_super.prototype.schedule.call(this,state,delay):(this.delay=delay,this.state=state,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(state,delay){return 0<delay||this.closed?_super.prototype.execute.call(this,state,delay):this._execute(state,delay)},QueueAction.prototype.requestAsyncId=function(scheduler,id,delay){return void 0===delay&&(delay=0),null!==delay&&0<delay||null===delay&&0<this.delay?_super.prototype.requestAsyncId.call(this,scheduler,id,delay):scheduler.flush(this)},QueueAction}(AsyncAction_1.AsyncAction);exports.QueueAction=QueueAction},{"./AsyncAction":456}],459:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AsyncScheduler_1=require("./AsyncScheduler"),QueueScheduler=function(_super){function QueueScheduler(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(QueueScheduler,_super),QueueScheduler}(AsyncScheduler_1.AsyncScheduler);exports.QueueScheduler=QueueScheduler},{"./AsyncScheduler":457}],460:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AsyncAction_1=require("./AsyncAction"),AsyncScheduler_1=require("./AsyncScheduler"),VirtualTimeScheduler=function(_super){function VirtualTimeScheduler(SchedulerAction,maxFrames){void 0===SchedulerAction&&(SchedulerAction=VirtualAction),void 0===maxFrames&&(maxFrames=Number.POSITIVE_INFINITY);var _this=_super.call(this,SchedulerAction,function(){return _this.frame})||this;return _this.maxFrames=maxFrames,_this.frame=0,_this.index=-1,_this}return __extends(VirtualTimeScheduler,_super),VirtualTimeScheduler.prototype.flush=function(){for(var _a=this,actions=_a.actions,maxFrames=_a.maxFrames,error,action;(action=actions[0])&&action.delay<=maxFrames&&(actions.shift(),this.frame=action.delay,!(error=action.execute(action.state,action.delay))););if(error){for(;action=actions.shift();)action.unsubscribe();throw error}},VirtualTimeScheduler.frameTimeFactor=10,VirtualTimeScheduler}(AsyncScheduler_1.AsyncScheduler);exports.VirtualTimeScheduler=VirtualTimeScheduler;var VirtualAction=function(_super){function VirtualAction(scheduler,work,index){void 0===index&&(index=scheduler.index+=1);var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.index=index,_this.active=!0,_this.index=scheduler.index=index,_this}return __extends(VirtualAction,_super),VirtualAction.prototype.schedule=function(state,delay){if(void 0===delay&&(delay=0),!this.id)return _super.prototype.schedule.call(this,state,delay);this.active=!1;var action=new VirtualAction(this.scheduler,this.work);return this.add(action),action.schedule(state,delay)},VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){void 0===delay&&(delay=0),this.delay=scheduler.frame+delay;var actions=scheduler.actions;return actions.push(this),actions.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){void 0===delay&&(delay=0)},VirtualAction.prototype._execute=function(state,delay){if(!0===this.active)return _super.prototype._execute.call(this,state,delay)},VirtualAction.sortActions=function(a,b){return a.delay===b.delay?a.index===b.index?0:a.index>b.index?1:-1:a.delay>b.delay?1:-1},VirtualAction}(AsyncAction_1.AsyncAction);exports.VirtualAction=VirtualAction},{"./AsyncAction":456,"./AsyncScheduler":457}],461:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AnimationFrameAction_1=require("./AnimationFrameAction"),AnimationFrameScheduler_1=require("./AnimationFrameScheduler");exports.animationFrameScheduler=new AnimationFrameScheduler_1.AnimationFrameScheduler(AnimationFrameAction_1.AnimationFrameAction),exports.animationFrame=exports.animationFrameScheduler},{"./AnimationFrameAction":452,"./AnimationFrameScheduler":453}],462:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AsapAction_1=require("./AsapAction"),AsapScheduler_1=require("./AsapScheduler");exports.asapScheduler=new AsapScheduler_1.AsapScheduler(AsapAction_1.AsapAction),exports.asap=exports.asapScheduler},{"./AsapAction":454,"./AsapScheduler":455}],463:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AsyncAction_1=require("./AsyncAction"),AsyncScheduler_1=require("./AsyncScheduler");exports.asyncScheduler=new AsyncScheduler_1.AsyncScheduler(AsyncAction_1.AsyncAction),exports.async=exports.asyncScheduler},{"./AsyncAction":456,"./AsyncScheduler":457}],464:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var QueueAction_1=require("./QueueAction"),QueueScheduler_1=require("./QueueScheduler");exports.queueScheduler=new QueueScheduler_1.QueueScheduler(QueueAction_1.QueueAction),exports.queue=exports.queueScheduler},{"./QueueAction":458,"./QueueScheduler":459}],465:[function(require,module,exports){"use strict";function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSymbolIterator=getSymbolIterator,exports.iterator=getSymbolIterator(),exports.$$iterator=exports.iterator},{}],466:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},{}],467:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),exports.$$rxSubscriber=exports.rxSubscriber},{}],468:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ArgumentOutOfRangeErrorImpl=function(){function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),ArgumentOutOfRangeErrorImpl}();exports.ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl},{}],469:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EmptyErrorImpl=function(){function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return EmptyErrorImpl.prototype=Object.create(Error.prototype),EmptyErrorImpl}();exports.EmptyError=EmptyErrorImpl},{}],470:[function(require,module,exports){"use strict";function findAndClearHandle(handle){return!!(handle in activeHandles)&&(delete activeHandles[handle],!0)}Object.defineProperty(exports,"__esModule",{value:!0});var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};exports.Immediate={setImmediate:function(cb){var handle=nextHandle++;return activeHandles[handle]=!0,RESOLVED.then(function(){return findAndClearHandle(handle)&&cb()}),handle},clearImmediate:function(handle){findAndClearHandle(handle)}},exports.TestTools={pending:function(){return Object.keys(activeHandles).length}}},{}],471:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ObjectUnsubscribedErrorImpl=function(){function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl}();exports.ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl},{}],472:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TimeoutErrorImpl=function(){function TimeoutErrorImpl(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return TimeoutErrorImpl.prototype=Object.create(Error.prototype),TimeoutErrorImpl}();exports.TimeoutError=TimeoutErrorImpl},{}],473:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UnsubscriptionErrorImpl=function(){function UnsubscriptionErrorImpl(errors){return Error.call(this),this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=errors,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl}();exports.UnsubscriptionError=UnsubscriptionErrorImpl},{}],474:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber");exports.canReportError=function(observer){for(;observer;){var _a=observer,closed_1=_a.closed,destination=_a.destination,isStopped=_a.isStopped;if(closed_1||isStopped)return!1;observer=destination&&destination instanceof Subscriber_1.Subscriber?destination:null}return!0}},{"../Subscriber":311}],475:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hostReportError=function(err){setTimeout(function(){throw err},0)}},{}],476:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=function(x){return x}},{}],477:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArray=function(){return Array.isArray||function(x){return x&&"number"==typeof x.length}}()},{}],478:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrayLike=function(x){return x&&"number"==typeof x.length&&"function"!=typeof x}},{}],479:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDate=function(value){return value instanceof Date&&!isNaN(+value)}},{}],480:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFunction=function(x){return"function"==typeof x}},{}],481:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var observable_1=require("../symbol/observable");exports.isInteropObservable=function(input){return input&&"function"==typeof input[observable_1.observable]}},{"../symbol/observable":466}],482:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var iterator_1=require("../symbol/iterator");exports.isIterable=function(input){return input&&"function"==typeof input[iterator_1.iterator]}},{"../symbol/iterator":465}],483:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isArray_1=require("./isArray");exports.isNumeric=function(val){return!isArray_1.isArray(val)&&0<=val-parseFloat(val)+1}},{"./isArray":477}],484:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObject=function(x){return null!==x&&"object"==typeof x}},{}],485:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Observable_1=require("../Observable");exports.isObservable=function(obj){return!!obj&&(obj instanceof Observable_1.Observable||"function"==typeof obj.lift&&"function"==typeof obj.subscribe)}},{"../Observable":304}],486:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPromise=function(value){return!!value&&"function"!=typeof value.subscribe&&"function"==typeof value.then}},{}],487:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isScheduler=function(value){return value&&"function"==typeof value.schedule}},{}],488:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noop=function(){}},{}],489:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.not=function(pred,thisArg){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=pred,notPred.thisArg=thisArg,notPred}},{}],490:[function(require,module,exports){"use strict";function pipeFromArray(fns){return 0===fns.length?identity_1.identity:1===fns.length?fns[0]:function(input){return fns.reduce(function(prev,fn){return fn(prev)},input)}}Object.defineProperty(exports,"__esModule",{value:!0});var identity_1=require("./identity");exports.pipe=function(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return pipeFromArray(fns)},exports.pipeFromArray=pipeFromArray},{"./identity":476}],491:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var subscribeToArray_1=require("./subscribeToArray"),subscribeToPromise_1=require("./subscribeToPromise"),subscribeToIterable_1=require("./subscribeToIterable"),subscribeToObservable_1=require("./subscribeToObservable"),isArrayLike_1=require("./isArrayLike"),isPromise_1=require("./isPromise"),isObject_1=require("./isObject"),iterator_1=require("../symbol/iterator"),observable_1=require("../symbol/observable");exports.subscribeTo=function(result){if(!!result&&"function"==typeof result[observable_1.observable])return subscribeToObservable_1.subscribeToObservable(result);if(isArrayLike_1.isArrayLike(result))return subscribeToArray_1.subscribeToArray(result);if(isPromise_1.isPromise(result))return subscribeToPromise_1.subscribeToPromise(result);if(!!result&&"function"==typeof result[iterator_1.iterator])return subscribeToIterable_1.subscribeToIterable(result);var value=isObject_1.isObject(result)?"an invalid object":"'"+result+"'";throw new TypeError("You provided "+value+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},{"../symbol/iterator":465,"../symbol/observable":466,"./isArrayLike":478,"./isObject":484,"./isPromise":486,"./subscribeToArray":492,"./subscribeToIterable":493,"./subscribeToObservable":494,"./subscribeToPromise":495}],492:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subscribeToArray=function(array){return function(subscriber){for(var i=0,len=array.length;i<len&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()}}},{}],493:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var iterator_1=require("../symbol/iterator");exports.subscribeToIterable=function(iterable){return function(subscriber){var iterator=iterable[iterator_1.iterator]();do{var item=void 0;try{item=iterator.next()}catch(err){return subscriber.error(err),subscriber}if(item.done){subscriber.complete();break}if(subscriber.next(item.value),subscriber.closed)break}while(!0);return"function"==typeof iterator.return&&subscriber.add(function(){iterator.return&&iterator.return()}),subscriber}}},{"../symbol/iterator":465}],494:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var observable_1=require("../symbol/observable");exports.subscribeToObservable=function(obj){return function(subscriber){var obs=obj[observable_1.observable]();if("function"!=typeof obs.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");else return obs.subscribe(subscriber)}}},{"../symbol/observable":466}],495:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var hostReportError_1=require("./hostReportError");exports.subscribeToPromise=function(promise){return function(subscriber){return promise.then(function(value){subscriber.closed||(subscriber.next(value),subscriber.complete())},function(err){return subscriber.error(err)}).then(null,hostReportError_1.hostReportError),subscriber}}},{"./hostReportError":475}],496:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var InnerSubscriber_1=require("../InnerSubscriber"),subscribeTo_1=require("./subscribeTo"),Observable_1=require("../Observable");exports.subscribeToResult=function(outerSubscriber,result,outerValue,outerIndex,innerSubscriber){return void 0===innerSubscriber&&(innerSubscriber=new InnerSubscriber_1.InnerSubscriber(outerSubscriber,outerValue,outerIndex)),innerSubscriber.closed?void 0:result instanceof Observable_1.Observable?result.subscribe(innerSubscriber):subscribeTo_1.subscribeTo(result)(innerSubscriber)}},{"../InnerSubscriber":302,"../Observable":304,"./subscribeTo":491}],497:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Subscriber_1=require("../Subscriber"),rxSubscriber_1=require("../symbol/rxSubscriber"),Observer_1=require("../Observer");exports.toSubscriber=function(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber_1.Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber_1.rxSubscriber])return nextOrObserver[rxSubscriber_1.rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber_1.Subscriber(nextOrObserver,error,complete):new Subscriber_1.Subscriber(Observer_1.empty)}},{"../Observer":305,"../Subscriber":311,"../symbol/rxSubscriber":467}],498:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(require("rxjs-compat/observable/from"))},{"rxjs-compat/observable/from":293}],499:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(require("rxjs-compat/operators/filter"))},{"rxjs-compat/operators/filter":294}],500:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var audit_1=require("../internal/operators/audit");exports.audit=audit_1.audit;var auditTime_1=require("../internal/operators/auditTime");exports.auditTime=auditTime_1.auditTime;var buffer_1=require("../internal/operators/buffer");exports.buffer=buffer_1.buffer;var bufferCount_1=require("../internal/operators/bufferCount");exports.bufferCount=bufferCount_1.bufferCount;var bufferTime_1=require("../internal/operators/bufferTime");exports.bufferTime=bufferTime_1.bufferTime;var bufferToggle_1=require("../internal/operators/bufferToggle");exports.bufferToggle=bufferToggle_1.bufferToggle;var bufferWhen_1=require("../internal/operators/bufferWhen");exports.bufferWhen=bufferWhen_1.bufferWhen;var catchError_1=require("../internal/operators/catchError");exports.catchError=catchError_1.catchError;var combineAll_1=require("../internal/operators/combineAll");exports.combineAll=combineAll_1.combineAll;var combineLatest_1=require("../internal/operators/combineLatest");exports.combineLatest=combineLatest_1.combineLatest;var concat_1=require("../internal/operators/concat");exports.concat=concat_1.concat;var concatAll_1=require("../internal/operators/concatAll");exports.concatAll=concatAll_1.concatAll;var concatMap_1=require("../internal/operators/concatMap");exports.concatMap=concatMap_1.concatMap;var concatMapTo_1=require("../internal/operators/concatMapTo");exports.concatMapTo=concatMapTo_1.concatMapTo;var count_1=require("../internal/operators/count");exports.count=count_1.count;var debounce_1=require("../internal/operators/debounce");exports.debounce=debounce_1.debounce;var debounceTime_1=require("../internal/operators/debounceTime");exports.debounceTime=debounceTime_1.debounceTime;var defaultIfEmpty_1=require("../internal/operators/defaultIfEmpty");exports.defaultIfEmpty=defaultIfEmpty_1.defaultIfEmpty;var delay_1=require("../internal/operators/delay");exports.delay=delay_1.delay;var delayWhen_1=require("../internal/operators/delayWhen");exports.delayWhen=delayWhen_1.delayWhen;var dematerialize_1=require("../internal/operators/dematerialize");exports.dematerialize=dematerialize_1.dematerialize;var distinct_1=require("../internal/operators/distinct");exports.distinct=distinct_1.distinct;var distinctUntilChanged_1=require("../internal/operators/distinctUntilChanged");exports.distinctUntilChanged=distinctUntilChanged_1.distinctUntilChanged;var distinctUntilKeyChanged_1=require("../internal/operators/distinctUntilKeyChanged");exports.distinctUntilKeyChanged=distinctUntilKeyChanged_1.distinctUntilKeyChanged;var elementAt_1=require("../internal/operators/elementAt");exports.elementAt=elementAt_1.elementAt;var endWith_1=require("../internal/operators/endWith");exports.endWith=endWith_1.endWith;var every_1=require("../internal/operators/every");exports.every=every_1.every;var exhaust_1=require("../internal/operators/exhaust");exports.exhaust=exhaust_1.exhaust;var exhaustMap_1=require("../internal/operators/exhaustMap");exports.exhaustMap=exhaustMap_1.exhaustMap;var expand_1=require("../internal/operators/expand");exports.expand=expand_1.expand;var filter_1=require("../internal/operators/filter");exports.filter=filter_1.filter;var finalize_1=require("../internal/operators/finalize");exports.finalize=finalize_1.finalize;var find_1=require("../internal/operators/find");exports.find=find_1.find;var findIndex_1=require("../internal/operators/findIndex");exports.findIndex=findIndex_1.findIndex;var first_1=require("../internal/operators/first");exports.first=first_1.first;var groupBy_1=require("../internal/operators/groupBy");exports.groupBy=groupBy_1.groupBy;var ignoreElements_1=require("../internal/operators/ignoreElements");exports.ignoreElements=ignoreElements_1.ignoreElements;var isEmpty_1=require("../internal/operators/isEmpty");exports.isEmpty=isEmpty_1.isEmpty;var last_1=require("../internal/operators/last");exports.last=last_1.last;var map_1=require("../internal/operators/map");exports.map=map_1.map;var mapTo_1=require("../internal/operators/mapTo");exports.mapTo=mapTo_1.mapTo;var materialize_1=require("../internal/operators/materialize");exports.materialize=materialize_1.materialize;var max_1=require("../internal/operators/max");exports.max=max_1.max;var merge_1=require("../internal/operators/merge");exports.merge=merge_1.merge;var mergeAll_1=require("../internal/operators/mergeAll");exports.mergeAll=mergeAll_1.mergeAll;var mergeMap_1=require("../internal/operators/mergeMap");exports.mergeMap=mergeMap_1.mergeMap,exports.flatMap=mergeMap_1.flatMap;var mergeMapTo_1=require("../internal/operators/mergeMapTo");exports.mergeMapTo=mergeMapTo_1.mergeMapTo;var mergeScan_1=require("../internal/operators/mergeScan");exports.mergeScan=mergeScan_1.mergeScan;var min_1=require("../internal/operators/min");exports.min=min_1.min;var multicast_1=require("../internal/operators/multicast");exports.multicast=multicast_1.multicast;var observeOn_1=require("../internal/operators/observeOn");exports.observeOn=observeOn_1.observeOn;var onErrorResumeNext_1=require("../internal/operators/onErrorResumeNext");exports.onErrorResumeNext=onErrorResumeNext_1.onErrorResumeNext;var pairwise_1=require("../internal/operators/pairwise");exports.pairwise=pairwise_1.pairwise;var partition_1=require("../internal/operators/partition");exports.partition=partition_1.partition;var pluck_1=require("../internal/operators/pluck");exports.pluck=pluck_1.pluck;var publish_1=require("../internal/operators/publish");exports.publish=publish_1.publish;var publishBehavior_1=require("../internal/operators/publishBehavior");exports.publishBehavior=publishBehavior_1.publishBehavior;var publishLast_1=require("../internal/operators/publishLast");exports.publishLast=publishLast_1.publishLast;var publishReplay_1=require("../internal/operators/publishReplay");exports.publishReplay=publishReplay_1.publishReplay;var race_1=require("../internal/operators/race");exports.race=race_1.race;var reduce_1=require("../internal/operators/reduce");exports.reduce=reduce_1.reduce;var repeat_1=require("../internal/operators/repeat");exports.repeat=repeat_1.repeat;var repeatWhen_1=require("../internal/operators/repeatWhen");exports.repeatWhen=repeatWhen_1.repeatWhen;var retry_1=require("../internal/operators/retry");exports.retry=retry_1.retry;var retryWhen_1=require("../internal/operators/retryWhen");exports.retryWhen=retryWhen_1.retryWhen;var refCount_1=require("../internal/operators/refCount");exports.refCount=refCount_1.refCount;var sample_1=require("../internal/operators/sample");exports.sample=sample_1.sample;var sampleTime_1=require("../internal/operators/sampleTime");exports.sampleTime=sampleTime_1.sampleTime;var scan_1=require("../internal/operators/scan");exports.scan=scan_1.scan;var sequenceEqual_1=require("../internal/operators/sequenceEqual");exports.sequenceEqual=sequenceEqual_1.sequenceEqual;var share_1=require("../internal/operators/share");exports.share=share_1.share;var shareReplay_1=require("../internal/operators/shareReplay");exports.shareReplay=shareReplay_1.shareReplay;var single_1=require("../internal/operators/single");exports.single=single_1.single;var skip_1=require("../internal/operators/skip");exports.skip=skip_1.skip;var skipLast_1=require("../internal/operators/skipLast");exports.skipLast=skipLast_1.skipLast;var skipUntil_1=require("../internal/operators/skipUntil");exports.skipUntil=skipUntil_1.skipUntil;var skipWhile_1=require("../internal/operators/skipWhile");exports.skipWhile=skipWhile_1.skipWhile;var startWith_1=require("../internal/operators/startWith");exports.startWith=startWith_1.startWith;var subscribeOn_1=require("../internal/operators/subscribeOn");exports.subscribeOn=subscribeOn_1.subscribeOn;var switchAll_1=require("../internal/operators/switchAll");exports.switchAll=switchAll_1.switchAll;var switchMap_1=require("../internal/operators/switchMap");exports.switchMap=switchMap_1.switchMap;var switchMapTo_1=require("../internal/operators/switchMapTo");exports.switchMapTo=switchMapTo_1.switchMapTo;var take_1=require("../internal/operators/take");exports.take=take_1.take;var takeLast_1=require("../internal/operators/takeLast");exports.takeLast=takeLast_1.takeLast;var takeUntil_1=require("../internal/operators/takeUntil");exports.takeUntil=takeUntil_1.takeUntil;var takeWhile_1=require("../internal/operators/takeWhile");exports.takeWhile=takeWhile_1.takeWhile;var tap_1=require("../internal/operators/tap");exports.tap=tap_1.tap;var throttle_1=require("../internal/operators/throttle");exports.throttle=throttle_1.throttle;var throttleTime_1=require("../internal/operators/throttleTime");exports.throttleTime=throttleTime_1.throttleTime;var throwIfEmpty_1=require("../internal/operators/throwIfEmpty");exports.throwIfEmpty=throwIfEmpty_1.throwIfEmpty;var timeInterval_1=require("../internal/operators/timeInterval");exports.timeInterval=timeInterval_1.timeInterval;var timeout_1=require("../internal/operators/timeout");exports.timeout=timeout_1.timeout;var timeoutWith_1=require("../internal/operators/timeoutWith");exports.timeoutWith=timeoutWith_1.timeoutWith;var timestamp_1=require("../internal/operators/timestamp");exports.timestamp=timestamp_1.timestamp;var toArray_1=require("../internal/operators/toArray");exports.toArray=toArray_1.toArray;var window_1=require("../internal/operators/window");exports.window=window_1.window;var windowCount_1=require("../internal/operators/windowCount");exports.windowCount=windowCount_1.windowCount;var windowTime_1=require("../internal/operators/windowTime");exports.windowTime=windowTime_1.windowTime;var windowToggle_1=require("../internal/operators/windowToggle");exports.windowToggle=windowToggle_1.windowToggle;var windowWhen_1=require("../internal/operators/windowWhen");exports.windowWhen=windowWhen_1.windowWhen;var withLatestFrom_1=require("../internal/operators/withLatestFrom");exports.withLatestFrom=withLatestFrom_1.withLatestFrom;var zip_1=require("../internal/operators/zip");exports.zip=zip_1.zip;var zipAll_1=require("../internal/operators/zipAll");exports.zipAll=zipAll_1.zipAll},{"../internal/operators/audit":343,"../internal/operators/auditTime":344,"../internal/operators/buffer":345,"../internal/operators/bufferCount":346,"../internal/operators/bufferTime":347,"../internal/operators/bufferToggle":348,"../internal/operators/bufferWhen":349,"../internal/operators/catchError":350,"../internal/operators/combineAll":351,"../internal/operators/combineLatest":352,"../internal/operators/concat":353,"../internal/operators/concatAll":354,"../internal/operators/concatMap":355,"../internal/operators/concatMapTo":356,"../internal/operators/count":357,"../internal/operators/debounce":358,"../internal/operators/debounceTime":359,"../internal/operators/defaultIfEmpty":360,"../internal/operators/delay":361,"../internal/operators/delayWhen":362,"../internal/operators/dematerialize":363,"../internal/operators/distinct":364,"../internal/operators/distinctUntilChanged":365,"../internal/operators/distinctUntilKeyChanged":366,"../internal/operators/elementAt":367,"../internal/operators/endWith":368,"../internal/operators/every":369,"../internal/operators/exhaust":370,"../internal/operators/exhaustMap":371,"../internal/operators/expand":372,"../internal/operators/filter":373,"../internal/operators/finalize":374,"../internal/operators/find":375,"../internal/operators/findIndex":376,"../internal/operators/first":377,"../internal/operators/groupBy":378,"../internal/operators/ignoreElements":379,"../internal/operators/isEmpty":380,"../internal/operators/last":381,"../internal/operators/map":382,"../internal/operators/mapTo":383,"../internal/operators/materialize":384,"../internal/operators/max":385,"../internal/operators/merge":386,"../internal/operators/mergeAll":387,"../internal/operators/mergeMap":388,"../internal/operators/mergeMapTo":389,"../internal/operators/mergeScan":390,"../internal/operators/min":391,"../internal/operators/multicast":392,"../internal/operators/observeOn":393,"../internal/operators/onErrorResumeNext":394,"../internal/operators/pairwise":395,"../internal/operators/partition":396,"../internal/operators/pluck":397,"../internal/operators/publish":398,"../internal/operators/publishBehavior":399,"../internal/operators/publishLast":400,"../internal/operators/publishReplay":401,"../internal/operators/race":402,"../internal/operators/reduce":403,"../internal/operators/refCount":404,"../internal/operators/repeat":405,"../internal/operators/repeatWhen":406,"../internal/operators/retry":407,"../internal/operators/retryWhen":408,"../internal/operators/sample":409,"../internal/operators/sampleTime":410,"../internal/operators/scan":411,"../internal/operators/sequenceEqual":412,"../internal/operators/share":413,"../internal/operators/shareReplay":414,"../internal/operators/single":415,"../internal/operators/skip":416,"../internal/operators/skipLast":417,"../internal/operators/skipUntil":418,"../internal/operators/skipWhile":419,"../internal/operators/startWith":420,"../internal/operators/subscribeOn":421,"../internal/operators/switchAll":422,"../internal/operators/switchMap":423,"../internal/operators/switchMapTo":424,"../internal/operators/take":425,"../internal/operators/takeLast":426,"../internal/operators/takeUntil":427,"../internal/operators/takeWhile":428,"../internal/operators/tap":429,"../internal/operators/throttle":430,"../internal/operators/throttleTime":431,"../internal/operators/throwIfEmpty":432,"../internal/operators/timeInterval":433,"../internal/operators/timeout":434,"../internal/operators/timeoutWith":435,"../internal/operators/timestamp":436,"../internal/operators/toArray":437,"../internal/operators/window":438,"../internal/operators/windowCount":439,"../internal/operators/windowTime":440,"../internal/operators/windowToggle":441,"../internal/operators/windowWhen":442,"../internal/operators/withLatestFrom":443,"../internal/operators/zip":444,"../internal/operators/zipAll":445}],501:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(require("rxjs-compat/operators/take"))},{"rxjs-compat/operators/take":295}],502:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleOptions=exports.Database=void 0;const essentials_1=require("libx.js/build/bundles/essentials"),_1=require("."),Memory_1=require("./PersistencyManagers/Memory");exports.Database=class{constructor(options){var _a;this.collections=null,this.onReady=essentials_1.libx.newPromise(),this.options=Object.assign(Object.assign({},new ModuleOptions),options),this.onReady.then(this.onReady_cb),this.onStart(),null===(_a=this.options.persistencyManager.onChangeEvent)||void 0===_a?void 0:_a.subscribe(this.onDbExternalChange.bind(this))}get(collection,id){return __awaiter(this,void 0,void 0,function*(){this.checkDataReady();let col=this.collections[collection];return null==col&&(col=this.collections[collection]={}),col[id]})}find(collection,predicate){return __awaiter(this,void 0,void 0,function*(){this.checkDataReady();const col=this.collections[collection],res=[];for(let key in col){const item=col[key];predicate(item,res.length)&&(item._id=key,res.push(item))}return 0==res.length?null:res})}findOne(collection,predicate){return __awaiter(this,void 0,void 0,function*(){return this.checkDataReady(),this.find(collection,(x,count)=>1>count&&predicate(x,count))})}resetDB(){return __awaiter(this,void 0,void 0,function*(){yield this.options.persistencyManager.write({},this.options.compactJson)})}insert(collection,obj){return __awaiter(this,void 0,void 0,function*(){return this.checkDataReady(),yield this.createCollectionIfMissing(collection),null==obj._id&&(obj._id=(0,_1.generateId)()),this.collections[collection][obj._id]=obj,this.tryContinuosWrite(),obj._id})}update(collection,id,subset){return __awaiter(this,void 0,void 0,function*(){this.checkDataReady(),yield this.createCollectionIfMissing(collection);const col=this.collections[collection];return col[id]=essentials_1.libx.ObjectHelpers.merge(col[id],subset),this.tryContinuosWrite(),col[id]})}delete(collection,id){return __awaiter(this,void 0,void 0,function*(){this.checkDataReady();const col=this.collections[collection];delete col[id],this.tryContinuosWrite()})}shutdown(){var _a,_b;return __awaiter(this,void 0,void 0,function*(){yield null===(_b=(_a=this.options.persistencyManager).shutdown)||void 0===_b?void 0:_b.call(_a)})}onStart(){return __awaiter(this,void 0,void 0,function*(){if(essentials_1.libx.log.d("DB: onStart"),null==this.options.initialData)this.collections=(yield this.options.persistencyManager.read())||{};else{const existing=yield this.options.persistencyManager.read(),merged=Object.assign(Object.assign({},existing),this.options.initialData);yield this.options.persistencyManager.write(merged,this.options.compactJson),this.collections=merged}this.onReady.resolve()})}onReady_cb(){return __awaiter(this,void 0,void 0,function*(){essentials_1.libx.log.d("DB: onReady")})}createCollectionIfMissing(name){return __awaiter(this,void 0,void 0,function*(){if(null==this.collections[name])return this.collections[name]={}})}checkDataReady(){if(null!=this.collections)return!0;throw"LocalDatabase: Data not ready, use `.onReady promise to await for it`"}tryContinuosWrite(){return __awaiter(this,void 0,void 0,function*(){this.options.continuosWrite&&(yield this.options.persistencyManager.write(this.collections,this.options.compactJson))})}onDbExternalChange(){return __awaiter(this,void 0,void 0,function*(){essentials_1.libx.log.v("Database:onDbExternalChange: file changed!"),this.collections=yield this.options.persistencyManager.read()})}};class ModuleOptions{constructor(){this.compactJson=!1,this.persistencyManager=new Memory_1.MemoryPersistencyManager,this.continuosWrite=!1}}exports.ModuleOptions=ModuleOptions},{".":504,"./PersistencyManagers/Memory":503,"libx.js/build/bundles/essentials":103}],503:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MemoryPersistencyManager=void 0;const log_1=require("libx.js/build/modules/log");exports.MemoryPersistencyManager=class{constructor(){this.dbPath="./.tmp/db.json"}write(data,compactJson=!0){return __awaiter(this,void 0,void 0,function*(){log_1.log.v("MemoryPersistencyManager:write: writing DB",data)})}read(){return __awaiter(this,void 0,void 0,function*(){return null})}}},{"libx.js/build/modules/log":123}],504:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.idToDate=exports.generateId=void 0;const ObjectId_1=require("libx.js/build/helpers/ObjectId");exports.generateId=function(){return ObjectId_1.ObjectId.new()},exports.idToDate=function(id){return ObjectId_1.ObjectId.toDate(id)}},{"libx.js/build/helpers/ObjectId":112}],505:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Matrix=void 0;const essentials_1=require("libx.js/build/bundles/essentials"),Exceptions_1=__importDefault(require("libx.js/build/helpers/Exceptions")),Database_1=require("./DB/Database"),Memory_1=require("./DB/PersistencyManagers/Memory"),MessageQueueManager_1=require("./MessageQueue/MessageQueueManager"),CronScheduler_1=require("./Scheduler/CronScheduler"),Orchestrator_1=require("./Servicer/Orchestrator"),Request_1=require("./Servicer/Request");exports.Matrix=class{constructor(){this.services={},this.mq={},this.scheduler=new CronScheduler_1.CronScheduler}init(){}addService(endpoint,newFactory,minCount=1,maxCount=1){return __awaiter(this,void 0,void 0,function*(){const newService=this.services[endpoint]=new Orchestrator_1.Orchestrator(newFactory,minCount,maxCount);return yield newService.initiate(),newService})}request(path,method=Request_1.RequestMethods.GET,body,options){return __awaiter(this,void 0,void 0,function*(){let req=new Request_1.RequestX(path,method,body);return req=Object.assign(Object.assign({},req),options),yield this.requestWithReq(req)})}requestWithReq(request){var _a;return __awaiter(this,void 0,void 0,function*(){const prefix=null===(_a=essentials_1.libx.getMatch(request.path,/(\/[^\/\?\#]*)\/?/))||void 0===_a?void 0:_a[0],service=this.services[prefix];if(null==service)throw new Exceptions_1.default("Matrix:request: Could not locate service for given route",{request,prefix});request.path=request.path.substring(prefix.length);const ret=yield service.handleIncomingRequest(request);return ret})}addDB(persistencyManager=new Memory_1.MemoryPersistencyManager,initialData,options){return __awaiter(this,void 0,void 0,function*(){if(null!=this.db)throw new Exceptions_1.default("Matrix:addDB: DB already initiated");return this.db=new Database_1.Database(Object.assign({persistencyManager,initialData},options)),yield this.db.onReady,essentials_1.libx.di.register("db",this.db),this.db})}addMQ(queueName,worker){return __awaiter(this,void 0,void 0,function*(){if(null==this.mqMgr&&(this.mqMgr=new MessageQueueManager_1.MessageQueueManager,essentials_1.libx.di.register("mq",this.mqMgr)),null!=this.mq[queueName])return this.mq[queueName];const publisher=yield this.mqMgr.createQueue(queueName);return this.mqMgr.addWorker(queueName,worker,2),this.mq[queueName]=publisher})}addScheduler(recurrence,tick,schedulerType){return __awaiter(this,void 0,void 0,function*(){if(schedulerType==CronScheduler_1.SchedulerTypes.Once)return this.scheduler.scheduleOnce(recurrence,tick);if(schedulerType==CronScheduler_1.SchedulerTypes.Recurring)return this.scheduler.scheduleRepeating(recurrence,tick);throw new Exceptions_1.default("Matrix:addScheduler: Unrecognized scheduler type",schedulerType,recurrence)})}shutdown(){return __awaiter(this,void 0,void 0,function*(){yield this.db.shutdown()})}}},{"./DB/Database":502,"./DB/PersistencyManagers/Memory":503,"./MessageQueue/MessageQueueManager":508,"./Scheduler/CronScheduler":510,"./Servicer/Orchestrator":513,"./Servicer/Request":514,"libx.js/build/bundles/essentials":103,"libx.js/build/helpers/Exceptions":110}],506:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Consumer=void 0;const log_1=require("libx.js/build/modules/log"),essentials_1=require("libx.js/build/bundles/essentials");exports.Consumer=class{constructor(manager,treat,instanceNum){this.manager=manager,this.treat=treat,this.instanceNum=instanceNum,this.isBusy=!1,this.id=essentials_1.libx.newGuid(!0)}assign(publisher){this.publisher=publisher,this.queueName=publisher.name}triggered(message){return __awaiter(this,void 0,void 0,function*(){if(yield essentials_1.libx.sleep(0),!this.isBusy){if(!(yield this.publisher.lock(message)))log_1.log.d(`Consumer: ${this.getIdentifier()}: Message already locked`,message);else if(!1==this.isBusy){log_1.log.d(`Consumer: ${this.getIdentifier()}: Successfully locked, treating message`,message),this.isBusy=!0;try{yield this.treat(message,this.getIdentifier()),log_1.log.d(`Consumer: ${this.getIdentifier()}: Treatment completed successfully, releasing`,message),yield this.publisher.ack(message)}catch(ex){log_1.log.e(`Consumer: ${this.getIdentifier()}: Error while treating, rejecting message`,ex,message),yield this.publisher.reject(message)}}else log_1.log.d(`Consumer: ${this.getIdentifier()}: Consumer already busy`),yield this.publisher.reject(message);this.isBusy=!1}})}getIdentifier(){return this.identifier||(this.identifier=`${this.queueName}:${this.instanceNum}:${this.id.substring(0,3)}`)}}},{"libx.js/build/bundles/essentials":103,"libx.js/build/modules/log":123}],507:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageEnvelopStatuses=exports.MessageEnvelop=void 0;const essentials_1=require("libx.js/build/bundles/essentials");exports.MessageEnvelop=class{constructor(payload){this.payload=payload,this.id=essentials_1.libx.newGuid()}};var MessageEnvelopStatuses;(function(MessageEnvelopStatuses){MessageEnvelopStatuses[MessageEnvelopStatuses.ready=0]="ready",MessageEnvelopStatuses[MessageEnvelopStatuses.locked=1]="locked",MessageEnvelopStatuses[MessageEnvelopStatuses.acked=2]="acked"})(MessageEnvelopStatuses=exports.MessageEnvelopStatuses||(exports.MessageEnvelopStatuses={}))},{"libx.js/build/bundles/essentials":103}],508:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageQueueManager=void 0;const Consumer_1=require("./Consumer"),Publisher_1=require("./Publisher");exports.MessageQueueManager=class{constructor(){this.publishers={},this.consumers=[]}createQueue(queueName){return __awaiter(this,void 0,void 0,function*(){const mq=new Publisher_1.Publisher(this,queueName);return this.publishers[queueName]=mq,mq})}addWorker(queueName,worker,instances=1){return __awaiter(this,void 0,void 0,function*(){for(let i=0;i<instances;i++){const consumer=new Consumer_1.Consumer(this,worker.treat,i);this.consumers.push(consumer);const publisher=this.publishers[queueName];consumer.assign(publisher),yield publisher.subscribe(message=>__awaiter(this,void 0,void 0,function*(){null==message||(yield consumer.triggered(message))}),consumer.identifier)}})}getPublisher(queueName){return __awaiter(this,void 0,void 0,function*(){return this.publishers[queueName]})}}},{"./Consumer":506,"./Publisher":509}],509:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Publisher=void 0;const EventsStream_1=require("libx.js/build/modules/EventsStream"),MessageEnvelop_1=require("./MessageEnvelop"),log_1=require("libx.js/build/modules/log");exports.Publisher=class{constructor(manager,name){this.manager=manager,this.name=name,this.queue=[],this.map={},this.onNew=new EventsStream_1.EventsStream,this.onAck=new EventsStream_1.EventsStream,this.onAck.subscribe(message=>{null==message||(this.queue.remove(message.payload),delete this.map[message.payload.id])})}subscribe(action,consumerIdentifier){return __awaiter(this,void 0,void 0,function*(){this.onNew.subscribe(event=>__awaiter(this,void 0,void 0,function*(){null==event||(yield action(event.payload,consumerIdentifier))}))})}enqueue(item){return __awaiter(this,void 0,void 0,function*(){const newMessage=new MessageEnvelop_1.MessageEnvelop(item);this.queue.push(newMessage),this.map[newMessage.id]=newMessage,newMessage.status=MessageEnvelop_1.MessageEnvelopStatuses.ready,yield this.tryBroadcastNext()})}tryBroadcastNext(){return __awaiter(this,void 0,void 0,function*(){if(0!=this.queue.length)for(let next of this.queue)if(next.status==MessageEnvelop_1.MessageEnvelopStatuses.ready){log_1.log.d("Publisher:tryBroadcastNext: trying to notify consumers on next message in line...",next,this.queue.length),this.onNew.emit(next);break}})}isLocked(message){return __awaiter(this,void 0,void 0,function*(){return message.status==MessageEnvelop_1.MessageEnvelopStatuses.locked})}lock(message){return __awaiter(this,void 0,void 0,function*(){const m=this.map[message.id];return null!=m&&!(m.status!=MessageEnvelop_1.MessageEnvelopStatuses.ready)&&(m.status=MessageEnvelop_1.MessageEnvelopStatuses.locked,setTimeout(()=>this.tryBroadcastNext(),0),!0)})}ack(message){return __awaiter(this,void 0,void 0,function*(){const m=this.map[message.id];if(m.status!=MessageEnvelop_1.MessageEnvelopStatuses.locked)throw"Publisher:ack: Can not ack message that is not in \"locked\" state";m.status=MessageEnvelop_1.MessageEnvelopStatuses.acked,this.onAck.emit(message),delete this.map[message.id],yield this.tryBroadcastNext()})}reject(message){return __awaiter(this,void 0,void 0,function*(){const m=this.map[message.id];m.status=MessageEnvelop_1.MessageEnvelopStatuses.ready})}}},{"./MessageEnvelop":507,"libx.js/build/modules/EventsStream":117,"libx.js/build/modules/log":123}],510:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SchedulerTypes=exports.CronScheduler=void 0;const log_1=require("libx.js/build/modules/log"),helpers_1=require("libx.js/build/helpers"),ScheduleFormatParser_1=require("./ScheduleFormatParser");exports.CronScheduler=class{constructor(){}scheduleOnce(cronSchedulingFormat,tick){return __awaiter(this,void 0,void 0,function*(){const next=ScheduleFormatParser_1.ScheduleFormatParser.parseCronFormat(cronSchedulingFormat);log_1.log.d("CronScheduler:scheduleOnce: Calculating next tick and waiting...",cronSchedulingFormat,next),yield helpers_1.helpers.delay(next.getTime()-new Date().getTime()),log_1.log.d("CronScheduler:scheduleOnce: Passed, ticking..."),null!=tick&&(yield tick())})}scheduleRepeating(cronSchedulingFormat,tick){return __awaiter(this,void 0,void 0,function*(){log_1.log.d("CronScheduler:scheduleRepeating: setting up...",cronSchedulingFormat);const p=new helpers_1.helpers.Deferred;return this.scheduleOnce(cronSchedulingFormat,()=>__awaiter(this,void 0,void 0,function*(){log_1.log.d("CronScheduler:scheduleRepeating: tick reached, scheduling next tick...",cronSchedulingFormat),yield tick(),yield this.scheduleRepeating(cronSchedulingFormat,tick)})),p})}};var SchedulerTypes;(function(SchedulerTypes){SchedulerTypes[SchedulerTypes.Once=0]="Once",SchedulerTypes[SchedulerTypes.Recurring=1]="Recurring"})(SchedulerTypes=exports.SchedulerTypes||(exports.SchedulerTypes={}))},{"./ScheduleFormatParser":511,"libx.js/build/helpers":113,"libx.js/build/modules/log":123}],511:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScheduleFormatParser=void 0;const cron_parser_1=__importDefault(require("cron-parser"));exports.ScheduleFormatParser=class{static parseCronFormat(input,timezone){return cron_parser_1.default.parseExpression(input,{tz:timezone}).next().toDate()}}},{"cron-parser":83}],512:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseService=void 0;const browserHelpers_1=require("libx.js/build/browser/browserHelpers"),essentials_1=require("libx.js/build/bundles/essentials"),log_1=require("libx.js/build/modules/log"),index_1=require("libx.js/build/helpers/index");class BaseService{constructor(){this.jobsTreated=0,this.isBusy=!1,this.handlers={"/":this.handler_default.bind(this)},this.id=essentials_1.libx.newGuid(!0),this.identifier=this.identifier||(this.identifier=`${this.id.substring(0,3)}`),this.createdAt=new Date,this.bootstrap()}bootstrap(){log_1.log.d("BaseService:bootstrap: ")}handle(request,res){return __awaiter(this,void 0,void 0,function*(){this.isBusy=!0;const url=index_1.helpers.parseUrl(request.path),handler=this.handlers["/"+(null===url||void 0===url?void 0:url.path)];return null==handler?this.handler_default(request):yield handler(request),log_1.log.d("BaseService:handle: ",request.body,request.reqId.substring(-4),this.identifier,`${request.getAgeMS()}ms`,`counter; ${this.jobsTreated+1}`,`path: ${request.path}`),this.isBusy=!1,res.body=(request.body?request.body+":":"")+this.identifier,this.jobsTreated++,res})}teardown(){log_1.log.d("BaseService:teardown: ")}getIsBusy(){return __awaiter(this,void 0,void 0,function*(){return this.isBusy})}static new(){return __awaiter(this,void 0,void 0,function*(){return yield essentials_1.libx.di.initiate(BaseService)})}handler_default(request){return __awaiter(this,void 0,void 0,function*(){const delayTime=browserHelpers_1.browserHelpers.queryString("delay",request.path)||essentials_1.libx.randomNumber(2000)+200;yield essentials_1.libx.delay(delayTime)})}}exports.BaseService=BaseService},{"libx.js/build/browser/browserHelpers":99,"libx.js/build/bundles/essentials":103,"libx.js/build/helpers/index":113,"libx.js/build/modules/log":123}],513:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Orchestrator=void 0;const Queue_1=require("libx.js/build/modules/Queue"),Callbacks_1=require("libx.js/build/modules/Callbacks"),log_1=require("libx.js/build/modules/log"),essentials_1=require("libx.js/build/bundles/essentials");exports.Orchestrator=class{constructor(serviceFactory,minCount=1,maxCount=3){this.serviceFactory=serviceFactory,this.minCount=minCount,this.maxCount=maxCount,this.instances=[],this.queue=new Queue_1.Queue([],{onEnqueueCallback:this.treat.bind(this)}),this.isBusy=!1,this.serviceTTL_MS=200,this.onIdle=new Callbacks_1.Callbacks,this.onBusy=new Callbacks_1.Callbacks,this.onJobCompleted=new Callbacks_1.Callbacks,this.onAutoScale=new Callbacks_1.Callbacks,this.onJobCompleted.subscribe(this.onJobCompletedCallback.bind(this))}initiate(){return __awaiter(this,void 0,void 0,function*(){yield this.scaleUp(this.minCount)})}getStats(){return __awaiter(this,void 0,void 0,function*(){return{instancesCount:this.instances.length,busyInstances:(yield Promise.all(this.instances.map(x=>__awaiter(this,void 0,void 0,function*(){return yield x.getIsBusy()})))).filter(x=>!0==x).length,pendingJobs:this.queue.count()}})}handleIncomingRequest(request){return __awaiter(this,void 0,void 0,function*(){return log_1.log.d("Orchestrator:handleIncomingRequest: New incoming request",request),null==request.promise&&(request.promise=essentials_1.libx.newPromise()),this.queue.enqueue(request),request.promise})}getFreeInstance(){return __awaiter(this,void 0,void 0,function*(){const busyMap=yield Promise.all(this.instances.map(x=>__awaiter(this,void 0,void 0,function*(){return{busy:yield x.getIsBusy(),instance:x}})));for(let instance of busyMap)if(!instance.busy)return instance.instance})}treat(){return __awaiter(this,void 0,void 0,function*(){const stats=yield this.getStats();if(log_1.log.d("Orchestrator:treat: stats:",stats),0==this.queue.count())return log_1.log.d("Orchestrator:treat: No more pending jobs..."),this.isBusy&&0==stats.busyInstances&&(this.onIdle.trigger(stats),this.isBusy=!1),void setTimeout(()=>__awaiter(this,void 0,void 0,function*(){0==this.queue.count()&&this.tryScaleDown()}),100);const instance=yield this.getFreeInstance();if(null==instance){const shouldScale=this.instances.length<this.maxCount;return log_1.log.d("Orchestrator:treat: No available instances, "+(shouldScale?`will try to scale from ${this.instances.length} by one instance (${this.maxCount} max)`:"will wait until completion of running jobs...")),void this.scaleUp(1)}const request=this.queue.dequeue();let p;log_1.log.d("Orchestrator:treat: Treating...");const res={};return p=instance.handle(request,res),!1==this.isBusy&&(this.isBusy=!0,this.getStats().then(stats=>{0<stats.busyInstances&&this.onBusy.trigger(stats)})),p.then(()=>{this.onJobCompleted.trigger(request),request.promise.resolve(res)}),p})}onJobCompletedCallback(request){return __awaiter(this,void 0,void 0,function*(){log_1.log.d("Orchestrator:onJobCompletedCallback",request.reqId.substring(-4)),this.treat()})}scaleUp(count=1){return __awaiter(this,void 0,void 0,function*(){log_1.log.d(`Orchestrator:scaleUp: Scale up by:${count}, Count:${this.instances.length}`);let isScaled=!1;if(!(this.instances.length>=this.maxCount)){for(let i=0;i<count;i++)try{const newService=yield this.serviceFactory();this.instances.push(newService),isScaled=!0}catch(err){log_1.log.e("Orchestrator:scaleUp: Failed to create a new service",err)}isScaled&&(this.onAutoScale.trigger(this.instances.length),setTimeout(()=>this.treat(),100))}})}tryScaleDown(count=1){return __awaiter(this,void 0,void 0,function*(){if(this.instances.length<=this.minCount)return;log_1.log.d(`Orchestrator:tryScaleDown: Scale down by:${count}, Count:${this.instances.length}`);let isScaled=!1;for(let instance of this.instances){if(yield instance.getIsBusy())continue;const removed=this.instances.shift();if(count--,removed.teardown(),isScaled=!0,0>=count)break}return isScaled&&this.onAutoScale.trigger(this.instances.length),!1})}}},{"libx.js/build/bundles/essentials":103,"libx.js/build/modules/Callbacks":115,"libx.js/build/modules/Queue":120,"libx.js/build/modules/log":123}],514:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestX=exports.ResponseTypes=exports.RequestMethods=void 0;const DB_1=require("../DB");var RequestMethods;(function(RequestMethods){RequestMethods[RequestMethods.GET=0]="GET",RequestMethods[RequestMethods.POST=1]="POST",RequestMethods[RequestMethods.PUT=2]="PUT",RequestMethods[RequestMethods.DELETE=3]="DELETE"})(RequestMethods=exports.RequestMethods||(exports.RequestMethods={}));var ResponseTypes;(function(ResponseTypes){ResponseTypes[ResponseTypes.OK=0]="OK",ResponseTypes[ResponseTypes.InputError=1]="InputError",ResponseTypes[ResponseTypes.ServerError=2]="ServerError",ResponseTypes[ResponseTypes.NotFound=3]="NotFound",ResponseTypes[ResponseTypes.RateLimit=4]="RateLimit",ResponseTypes[ResponseTypes.NotAuthorized=5]="NotAuthorized",ResponseTypes[ResponseTypes.Forbidden=6]="Forbidden",ResponseTypes[ResponseTypes.Moved=7]="Moved"})(ResponseTypes=exports.ResponseTypes||(exports.ResponseTypes={}));exports.RequestX=class{constructor(path,method,body){this.reqId=(0,DB_1.generateId)(),this.createdAt=new Date,this.path=path,this.method=method,this.body=body}getAgeMS(){return new Date().getTime()-this.createdAt.getTime()}}},{"../DB":504}],515:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const browser_essentials_1=require("libx.js/build/bundles/browser.essentials"),log_1=require("libx.js/build/modules/log"),Matrix_1=require("./Matrix"),Memory_1=require("./DB/PersistencyManagers/Memory"),CronScheduler_1=require("./Scheduler/CronScheduler"),Request_1=require("./Servicer/Request"),BaseService_1=require("./Servicer/BaseService"),ObjectId_1=require("libx.js/build/helpers/ObjectId");window.dojo==null&&(window.dojo={}),window.dojo={matrix:new Matrix_1.Matrix,MemoryPersistencyManager:Memory_1.MemoryPersistencyManager,BaseService:BaseService_1.BaseService,SchedulerTypes:CronScheduler_1.SchedulerTypes,RequestMethods:Request_1.RequestMethods,Request:Request_1.RequestX,ResponseTypes:Request_1.ResponseTypes,ObjectId:ObjectId_1.ObjectId,libx:browser_essentials_1.libx,log:log_1.log},log_1.log.isBrowser=!0},{"./DB/PersistencyManagers/Memory":503,"./Matrix":505,"./Scheduler/CronScheduler":510,"./Servicer/BaseService":512,"./Servicer/Request":514,"libx.js/build/bundles/browser.essentials":102,"libx.js/build/helpers/ObjectId":112,"libx.js/build/modules/log":123}]},{},[515])(515)});